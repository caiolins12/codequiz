* { margin: 0; padding: 0; box-sizing: border-box; }
html, body {
  height: 100%;
  overflow: hidden;
  overscroll-behavior: none;
}
body { -webkit-user-select: none; user-select: none; }
input, textarea { -webkit-user-select: text; user-select: text; }

:root {
  --bg: #0f0f1a;
  --bg2: #1a1a2e;
  --bg3: #25253d;
  --primary: #6c63ff;
  --primary-glow: rgba(108, 99, 255, 0.3);
  --secondary: #00d4aa;
  --accent: #ff6b9d;
  --text: #e8e8f0;
  --text2: #9999b3;
  --success: #00d4aa;
  --error: #ff4757;
  --warning: #ffa502;
  --radius: 16px;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  /* Glass-morphism */
  --glass-bg: rgba(26, 26, 46, 0.7);
  --glass-border: rgba(255, 255, 255, 0.08);

  /* Shadows */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);

  /* Glows */
  --glow-primary: 0 0 20px rgba(108, 99, 255, 0.4);
  --glow-secondary: 0 0 20px rgba(0, 212, 170, 0.4);
  --glow-accent: 0 0 20px rgba(255, 107, 157, 0.4);

  /* Gradients */
  --gradient-primary: linear-gradient(135deg, #6c63ff, #a855f7);
  --gradient-secondary: linear-gradient(135deg, #00d4aa, #00ff88);
  --gradient-accent: linear-gradient(135deg, #ff6b9d, #ff006e);
  --gradient-hero: linear-gradient(135deg, rgba(108, 99, 255, 0.12), rgba(255, 107, 157, 0.12));
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100dvh;
  height: 100dvh;
  overflow: hidden;
  overflow-x: hidden;
  overscroll-behavior-x: contain;
  -webkit-tap-highlight-color: transparent;
}

#app {
  max-width: 480px;
  margin: 0 auto;
  width: 100%;
  min-height: 100dvh;
  height: 100dvh;
  max-height: 100dvh;
  position: relative;
  overflow: hidden;
}
#app.app-wide {
  max-width: min(1100px, 100vw);
}

/* Screens */
.screen {
  display: none;
  flex-direction: column;
  padding: 20px;
  padding-top: calc(20px + var(--safe-top));
  padding-bottom: calc(80px + var(--safe-bottom));
  min-height: 100dvh;
  height: 100dvh;
  max-height: 100dvh;
  overflow: hidden;
  animation: fadeIn 0.3s ease;
}
.screen.active { display: flex; }
.screen.screen-enter {
  animation: fadeIn 0.28s ease;
}

/* iOS viewport and spacing normalization */
@supports (-webkit-touch-callout: none) {
  html, body, #app, .screen {
    min-height: 100dvh;
    height: 100dvh;
    max-height: 100dvh;
  }
  body,
  #app,
  .screen {
    min-height: -webkit-fill-available;
    height: -webkit-fill-available;
    max-height: -webkit-fill-available;
  }
  .screen {
    padding-top: calc(14px + var(--safe-top));
    padding-bottom: calc(32px + var(--safe-bottom));
  }
  .admin-lock-btn {
    bottom: calc(28px + var(--safe-bottom));
  }
  .home-build-badge {
    bottom: calc(58px + var(--safe-bottom));
  }
  .user-profile-hero {
    margin-bottom: 10px;
  }
  .home-actions {
    margin-top: 2px;
  }
}

.preload-screen {
  align-items: center;
  justify-content: center;
  background:
    radial-gradient(circle at 12% 18%, rgba(108, 99, 255, 0.18), transparent 38%),
    radial-gradient(circle at 84% 84%, rgba(0, 212, 170, 0.14), transparent 40%),
    linear-gradient(180deg, #0b1026, #11183a 55%, #0f1430);
}
.preload-screen.preload-exit {
  animation: preloadFadeOut 0.22s ease forwards;
}
.preload-card {
  width: min(92vw, 360px);
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(10, 14, 34, 0.78);
  backdrop-filter: blur(8px);
  padding: 28px 18px 20px;
  text-align: center;
  box-shadow: 0 18px 42px rgba(0, 0, 0, 0.35);
}
.preload-logo {
  font-size: 46px;
  font-weight: 900;
  line-height: 1;
  color: var(--primary);
  text-shadow: 0 0 22px rgba(108, 99, 255, 0.42);
  margin-bottom: 10px;
}
.preload-title {
  font-size: 24px;
  font-weight: 800;
  letter-spacing: 0.4px;
  margin-bottom: 6px;
  background: linear-gradient(135deg, #8a86ff, #4cf8db);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.preload-subtitle {
  font-size: 13px;
  color: var(--text2);
  min-height: 18px;
}
.preload-bar {
  margin: 14px auto 0;
  width: 100%;
  max-width: 280px;
  height: 6px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.08);
  overflow: hidden;
}
.preload-bar-fill {
  width: 42%;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(108, 99, 255, 0.92), rgba(0, 212, 170, 0.92));
  animation: preloadSweep 1.1s ease-in-out infinite alternate;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes preloadSweep {
  from { transform: translateX(-36%); }
  to { transform: translateX(138%); }
}

@keyframes preloadFadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pop {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-6px); }
  40%, 80% { transform: translateX(6px); }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes confetti-fall {
  0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}
@keyframes glow-pulse {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.1); }
}
@keyframes shine {
  0% { left: -100%; }
  100% { left: 100%; }
}
@keyframes score-bump {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}
@keyframes rotate-bg {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
@keyframes timer-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}
@keyframes pvp-critical-pulse {
  0%, 100% {
    box-shadow: 0 0 0 rgba(255, 95, 119, 0.04), 0 0 18px rgba(255, 95, 119, 0.2);
  }
  50% {
    box-shadow: 0 0 0 rgba(255, 95, 119, 0.14), 0 0 32px rgba(255, 95, 119, 0.36);
  }
}
@keyframes pvp-critical-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(0.6px); }
  50% { transform: translateX(-0.8px); }
  75% { transform: translateX(0.6px); }
}
@keyframes pvp-phase-glow {
  0%, 100% {
    box-shadow: 0 8px 20px rgba(10, 15, 35, 0.28), inset 0 1px 0 rgba(255, 255, 255, 0.06);
  }
  50% {
    box-shadow: 0 10px 28px rgba(78, 124, 255, 0.32), inset 0 1px 0 rgba(255, 255, 255, 0.12);
  }
}
@keyframes pvp-badge-breathe {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-1px); }
}
@keyframes reward-rise {
  0% { opacity: 0; transform: translateY(0) scale(0.8); }
  20% { opacity: 1; }
  100% { opacity: 0; transform: translateY(var(--ry, -140px)) translateX(var(--rx, 0px)) scale(1.15); }
}
@keyframes reward-glow {
  0%, 100% { box-shadow: 0 0 0 rgba(255, 165, 2, 0); }
  50% { box-shadow: 0 0 28px rgba(255, 165, 2, 0.65), 0 0 56px rgba(108, 99, 255, 0.35); }
}
@keyframes pvp-outcome-pulse {
  0% { transform: scale(0.96); opacity: 0; }
  60% { transform: scale(1.03); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}
@keyframes pvp-result-seq-in {
  0% { opacity: 0; transform: translateY(14px) scale(0.985); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes pvp-result-emoji-pop {
  0% { opacity: 0; transform: scale(0.6) rotate(-12deg); }
  55% { opacity: 1; transform: scale(1.12) rotate(4deg); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); }
}
@keyframes pvp-result-transition-fade {
  0% { opacity: 0; }
  100% { opacity: 1; }
}
@keyframes pvp-result-transition-rise {
  0% { opacity: 0; transform: translateY(18px) scale(0.96); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes pvp-result-transition-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
@keyframes cosmetic-shimmer {
  0% { transform: translateX(-135%) skewX(-18deg); opacity: 0; }
  30% { opacity: 0.35; }
  100% { transform: translateX(145%) skewX(-18deg); opacity: 0; }
}
@keyframes cosmetic-hue-shift {
  0% { filter: hue-rotate(0deg); }
  100% { filter: hue-rotate(360deg); }
}
@keyframes cosmetic-breath {
  0%, 100% { transform: scale(1); opacity: 0.34; }
  50% { transform: scale(1.08); opacity: 0.62; }
}
@keyframes cosmetic-stars {
  0% { background-position: 0% 0%, 0% 0%; }
  100% { background-position: 140px -120px, -160px 140px; }
}
@keyframes cosmetic-wave {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}
@keyframes cosmetic-particle-drift {
  0% { transform: translateY(0) translateX(0); opacity: 0.25; }
  50% { transform: translateY(-8px) translateX(4px); opacity: 0.62; }
  100% { transform: translateY(-16px) translateX(-3px); opacity: 0.2; }
}
@keyframes cosmetic-reflect-sweep {
  0% { transform: translateX(-120%) skewX(-18deg); opacity: 0; }
  22% { opacity: 0.45; }
  100% { transform: translateX(140%) skewX(-18deg); opacity: 0; }
}
@keyframes cosmetic-pulse-shadow {
  0%, 100% { box-shadow: 0 0 0 rgba(255,255,255,0), 0 0 16px rgba(108,99,255,0.22); }
  50% { box-shadow: 0 0 12px rgba(255,255,255,0.2), 0 0 22px rgba(108,99,255,0.36); }
}
@keyframes legendary-aura-pulse {
  0%, 100% {
    box-shadow:
      0 0 0 rgba(255,255,255,0),
      0 0 10px rgba(138, 217, 255, 0.22),
      0 0 22px rgba(143, 90, 255, 0.2);
  }
  50% {
    box-shadow:
      0 0 8px rgba(255,255,255,0.24),
      0 0 20px rgba(138, 217, 255, 0.42),
      0 0 36px rgba(143, 90, 255, 0.34);
  }
}
@keyframes legendary-prism-spin {
  0% { transform: rotate(0deg) scale(1); opacity: 0.36; }
  50% { transform: rotate(180deg) scale(1.06); opacity: 0.62; }
  100% { transform: rotate(360deg) scale(1); opacity: 0.34; }
}
@keyframes legendary-flare-flicker {
  0%, 100% { opacity: 0.22; filter: brightness(1); }
  14% { opacity: 0.48; filter: brightness(1.26); }
  28% { opacity: 0.34; filter: brightness(1.12); }
  46% { opacity: 0.68; filter: brightness(1.46); }
  62% { opacity: 0.42; filter: brightness(1.18); }
  82% { opacity: 0.58; filter: brightness(1.34); }
}
@keyframes legendary-void-drift {
  0% { background-position: 0% 50%, 0% 0%; }
  50% { background-position: 100% 50%, 40px -30px; }
  100% { background-position: 0% 50%, -40px 30px; }
}
@keyframes legendary-arc-flash {
  0%, 100% { opacity: 0.1; filter: brightness(1); }
  9% { opacity: 0.44; filter: brightness(1.32); }
  11% { opacity: 0.16; }
  13% { opacity: 0.66; filter: brightness(1.62); }
  16% { opacity: 0.14; }
  34% { opacity: 0.22; }
  36% { opacity: 0.54; filter: brightness(1.42); }
  38% { opacity: 0.12; }
  56% { opacity: 0.28; }
  58% { opacity: 0.48; filter: brightness(1.3); }
  60% { opacity: 0.14; }
  76% { opacity: 0.24; }
  78% { opacity: 0.6; filter: brightness(1.56); }
  81% { opacity: 0.12; }
}
@keyframes legendary-nebula-orbit {
  0% { transform: rotate(0deg) scale(1); opacity: 0.28; }
  50% { transform: rotate(180deg) scale(1.08); opacity: 0.5; }
  100% { transform: rotate(360deg) scale(1); opacity: 0.26; }
}
@keyframes legendary-ember-rise {
  0% { background-position: 18% 92%, 78% 86%, 56% 95%; opacity: 0.28; }
  50% { background-position: 22% 52%, 72% 38%, 52% 54%; opacity: 0.56; }
  100% { background-position: 26% 6%, 66% -8%, 48% 4%; opacity: 0.14; }
}
@keyframes legendary-smoke-drift {
  0% { background-position: 0% 100%, 100% 92%; opacity: 0.2; }
  50% { background-position: 12% 56%, 86% 46%; opacity: 0.34; }
  100% { background-position: 24% 8%, 72% 2%; opacity: 0.16; }
}
@keyframes legendary-fluid-flow {
  0% { background-position: 0% 54%, 100% 46%, 0% 100%; }
  50% { background-position: 100% 46%, 0% 54%, 48% 0%; }
  100% { background-position: 0% 54%, 100% 46%, 100% 100%; }
}
@keyframes legendary-rain-fall {
  0% { background-position: 0 -36px, 0 -72px; opacity: 0.2; }
  100% { background-position: 0 46px, 0 88px; opacity: 0.36; }
}
@keyframes legendary-snow-fall {
  0% { background-position: 0 -24px, 48px -64px; opacity: 0.2; }
  50% { background-position: 18px 34px, 66px 12px; opacity: 0.38; }
  100% { background-position: 30px 72px, 84px 72px; opacity: 0.18; }
}
@keyframes legendary-leaf-drift {
  0% { background-position: 10% -12%, 84% -22%; opacity: 0.18; }
  50% { background-position: 42% 48%, 64% 46%; opacity: 0.34; }
  100% { background-position: 76% 112%, 42% 118%; opacity: 0.14; }
}
@keyframes legendary-dust-sweep {
  0%, 100% { opacity: 0.9; filter: saturate(1) brightness(1); }
  50% { opacity: 1; filter: saturate(1.08) brightness(1.06); }
}
@keyframes legendary-reflect-glint {
  0% { transform: translateX(-120%) skewX(-24deg); opacity: 0; }
  18% { opacity: 0.62; }
  44% { opacity: 0.08; }
  100% { transform: translateX(150%) skewX(-24deg); opacity: 0; }
}
@keyframes legendary-electro-surge {
  0%, 100% { opacity: 0.16; transform: translateX(-7%) scale(1); }
  50% { opacity: 0.46; transform: translateX(7%) scale(1.05); }
}
@keyframes legendary-core-bloom {
  0%, 100% { opacity: 0.9; filter: saturate(1) brightness(1); }
  50% { opacity: 1; filter: saturate(1.2) brightness(1.18); }
}
@keyframes legendary-spectrum-shift {
  0% { background-position: 0% 50%, 100% 50%, 0 0; filter: saturate(1) hue-rotate(0deg); }
  50% { background-position: 100% 50%, 0% 50%, 42px -28px; filter: saturate(1.2) hue-rotate(6deg); }
  100% { background-position: 0% 50%, 100% 50%, -42px 28px; filter: saturate(1) hue-rotate(0deg); }
}
@keyframes legendary-lens-glow {
  0%, 100% { opacity: 0.34; transform: scale(0.98); }
  50% { opacity: 0.72; transform: scale(1.04); }
}
@keyframes legendary-particle-burst {
  0% { opacity: 0.2; background-position: 16% 90%, 84% 84%, 52% 92%; }
  50% { opacity: 0.52; background-position: 22% 44%, 78% 36%, 48% 40%; }
  100% { opacity: 0.18; background-position: 30% -6%, 70% -10%, 44% 4%; }
}
@keyframes legendary-kaleido-pan {
  0% {
    background-position: 50% 50%, 12% 18%, 88% 82%, 50% 50%, 50% 50%;
  }
  25% {
    background-position: 64% 38%, 82% 16%, 14% 86%, 36% 64%, 50% 50%;
  }
  50% {
    background-position: 50% 22%, 86% 84%, 16% 12%, 64% 36%, 50% 50%;
  }
  75% {
    background-position: 34% 36%, 18% 86%, 84% 14%, 62% 68%, 50% 50%;
  }
  100% {
    background-position: 50% 50%, 12% 18%, 88% 82%, 50% 50%, 50% 50%;
  }
}
@keyframes legendary-kaleido-breathe {
  0%, 100% {
    filter: saturate(1.12) contrast(1.08);
  }
  50% {
    filter: saturate(1.24) contrast(1.14);
  }
}
@keyframes legendary-kaleido-spin-a {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.06); }
  100% { transform: rotate(360deg) scale(1); }
}
@keyframes legendary-kaleido-spin-b {
  0% { transform: rotate(360deg) scale(1.04); }
  50% { transform: rotate(180deg) scale(0.98); }
  100% { transform: rotate(0deg) scale(1.04); }
}

/* Utility */
button { touch-action: manipulation; }

/* Home Screen */
.home-header {
  text-align: center;
  padding: 20px 0 16px;
}
.logo-icon {
  font-size: 44px;
  font-weight: 900;
  color: var(--primary);
  margin-bottom: 6px;
  text-shadow: 0 0 30px var(--primary-glow);
}
.home-header h1 {
  font-size: 34px;
  font-weight: 800;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.subtitle { color: var(--text2); margin-top: 4px; font-size: 14px; }

/* Profile Hero */
.user-profile-hero {
  background: var(--gradient-hero);
  border: 1px solid rgba(108, 99, 255, 0.25);
  border-radius: 20px;
  padding: 18px;
  margin-bottom: 8px;
  position: relative;
  overflow: hidden;
  box-shadow: var(--shadow-md), inset 0 1px 0 rgba(255,255,255,0.06);
}
.hero-bg-glow {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(108,99,255,0.08) 0%, transparent 70%);
  animation: rotate-bg 25s linear infinite;
  pointer-events: none;
}
.hero-content {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  gap: 14px;
  padding-right: 0;
  padding-top: 0;
  min-height: 82px;
}
.hero-avatar-wrap {
  position: relative;
  width: 64px;
  height: 64px;
  flex-shrink: 0;
}
.hero-avatar {
  font-size: 34px;
  line-height: 1;
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: var(--bg2);
  border: 2px solid var(--primary);
  border-radius: 50%;
  position: relative;
  z-index: 2;
}
.hero-avatar-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: inherit;
  display: block;
}
.hero-avatar-glow {
  position: absolute;
  inset: -6px;
  background: var(--gradient-primary);
  border-radius: 50%;
  opacity: 0.25;
  filter: blur(10px);
  animation: none;
}
.hero-info { flex: 1; min-width: 0; }
.hero-name-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: center;
  gap: 8px;
  min-width: 0;
  margin-bottom: 6px;
}
.hero-name {
  justify-self: start;
  width: fit-content;
  max-width: 100%;
  min-width: 0;
  display: inline-flex;
  align-items: center;
  font-size: 17px;
  font-weight: 800;
  color: var(--text);
  margin-bottom: 0;
  padding: 3px 8px;
  border-radius: 8px;
  border: 1px solid rgba(150, 178, 255, 0.45);
  background: #101f40;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.hero-level-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  min-height: 24px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(136, 172, 255, 0.52);
  background: linear-gradient(135deg, #17305f, #21498a);
  color: #eef4ff;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.2px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.14), 0 4px 12px rgba(8, 16, 34, 0.34);
}
.hero-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text2);
  margin-bottom: 5px;
}
.hero-meta > span { white-space: nowrap; }
.hero-level { color: var(--primary); font-weight: 700; }
.hero-dot { opacity: 0.4; }
.hero-streak { font-weight: 700; }
.hero-badges-line {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px 8px;
  margin-bottom: 6px;
  min-width: 0;
}
.hero-badges-group {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
  min-width: 0;
  overflow: visible;
}
.hero-badges-line .tier-badge {
  font-size: 10px;
  padding: 2px 6px;
  min-width: fit-content;
  max-width: none;
  flex: 0 0 auto;
  overflow: visible;
  text-overflow: clip;
  white-space: nowrap;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
}
.hero-badges-line .tier-badge.tier-easy {
  background: #0d5e52;
  border-color: #22c9b2;
  color: #e7fff8;
}
.hero-badges-line .tier-badge.tier-medium {
  background: #6f4b10;
  border-color: #f0b748;
  color: #fff0ce;
}
.hero-badges-line .tier-badge.tier-hard {
  background: #6a1f2e;
  border-color: #ff7b95;
  color: #ffe2e8;
}
.hero-badges-line .hero-coins {
  margin-left: auto;
}
.hero-tier { display: inline-flex; align-items: center; }
.hero-tier .tier-badge { max-width: 100%; }
.hero-tier .tier-badge > span:last-child {
  overflow: hidden;
  text-overflow: ellipsis;
}
.hero-coins {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid #e7b14c;
  background: #6a4a0f;
  color: #fff0cf;
  font-weight: 800;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
  line-height: 1;
  flex-shrink: 0;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
}
.hero-coins-icon {
  font-size: 13px;
  line-height: 1;
}
.hero-coins-value {
  font-size: 13px;
  line-height: 1;
}
.hero-xp-bar {
  height: 7px;
  padding: 1px;
  background: #111f3e;
  border: 1px solid rgba(126, 160, 248, 0.48);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
}
.hero-xp-fill {
  height: 100%;
  background: var(--gradient-primary);
  border-radius: 7px;
  transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 0 8px rgba(108, 99, 255, 0.5);
}
.hero-xp-label {
  display: inline-flex;
  align-items: stretch;
  gap: 0;
  width: fit-content;
  font-size: 10px;
  color: #e6edff;
  margin-top: 4px;
  padding: 0;
  border-radius: 999px;
  border: 1px solid rgba(126, 160, 248, 0.42);
  background: #132449;
  font-weight: 600;
  overflow: hidden;
}
.hero-xp-level {
  display: inline-flex;
  align-items: center;
  padding: 2px 7px;
  border-right: 1px solid rgba(150, 183, 255, 0.44);
  background: linear-gradient(135deg, #1d3a70, #2a4f93);
  font-weight: 800;
  letter-spacing: 0.15px;
  line-height: 1;
}
.hero-xp-sep {
  opacity: 0.78;
}
.hero-xp-progress {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  white-space: nowrap;
  line-height: 1;
}
.hero-logout {
  position: relative;
  margin-left: 0;
  flex-shrink: 0;
  background: linear-gradient(135deg, rgba(220, 52, 76, 0.9), rgba(176, 22, 48, 0.92));
  border: 1px solid rgba(255, 160, 174, 0.34);
  color: #ffe8ec;
  padding: 6px 12px;
  border-radius: 9px;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.2s, filter 0.2s, box-shadow 0.2s, background 0.2s;
  box-shadow: 0 6px 14px rgba(120, 14, 34, 0.35);
}
.hero-logout:hover {
  filter: brightness(1.06);
}
.hero-logout:active {
  transform: scale(0.95);
  filter: brightness(0.98);
}

/* Defensive profile card visibility guard to avoid legacy CSS collisions */
.user-profile-hero .hero-content,
.user-profile-hero .hero-info,
.user-profile-hero .hero-name,
.user-profile-hero .hero-meta,
.user-profile-hero .hero-xp-bar,
.user-profile-hero .hero-xp-label,
.user-profile-hero .hero-logout {
  visibility: visible !important;
  opacity: 1 !important;
}

/* Modern Stat Cards */
.player-stats-modern {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin: 16px 0 24px;
}
.stat-card-modern {
  background: var(--glass-bg);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  padding: 16px 8px 14px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-sm), inset 0 1px 0 rgba(255,255,255,0.04);
  position: relative;
  overflow: hidden;
  transition: transform 0.25s, box-shadow 0.25s;
}
.stat-card-modern::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.04), transparent);
  transition: left 0.5s;
  pointer-events: none;
}
.stat-card-modern:active::after { left: 100%; }
.stat-level { border-color: rgba(108,99,255,0.2); }
.stat-xp { border-color: rgba(0,212,170,0.2); }
.stat-streak { border-color: rgba(255,107,157,0.2); }
.stat-icon { font-size: 22px; margin-bottom: 6px; }
.stat-icon-float { animation: float 2.5s ease-in-out infinite; }
.stat-value {
  font-size: 24px;
  font-weight: 800;
  color: var(--primary);
  font-variant-numeric: tabular-nums;
}
.stat-label {
  font-size: 10px;
  color: var(--text2);
  margin-top: 3px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 600;
}

/* Home Actions */
.home-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  background: linear-gradient(160deg, rgba(255,255,255,0.03), rgba(108,99,255,0.1));
  border: 1px solid rgba(108, 99, 255, 0.28);
  border-radius: 22px;
  padding: 14px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.22);
}
.home-actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.home-actions-grid-tools { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
.home-actions-title {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  color: var(--text2);
  margin-top: 2px;
  margin-bottom: -2px;
  padding-left: 2px;
}
.home-actions .btn-modern {
  min-height: 56px;
}
.home-play-btn {
  min-height: 64px !important;
  border-radius: 16px !important;
  box-shadow: 0 8px 24px rgba(108, 99, 255, 0.35) !important;
}

/* Buttons */
.btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 14px 20px;
  border: none;
  border-radius: var(--radius);
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s;
  width: 100%;
  position: relative;
  overflow: hidden;
}
.btn:active { transform: scale(0.97); }
.btn-primary {
  background: var(--gradient-primary);
  color: white;
  box-shadow: 0 4px 20px var(--primary-glow);
}
.btn-primary:active { box-shadow: 0 2px 10px var(--primary-glow); }
.btn-secondary {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  color: var(--text);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-sm);
}
.btn-lg { padding: 16px 24px; font-size: 17px; }
.btn-icon { font-size: 18px; flex-shrink: 0; }
.btn-text { flex: 1; text-align: left; }
.btn-arrow {
  font-size: 20px;
  font-weight: 300;
  opacity: 0.5;
  transition: transform 0.2s, opacity 0.2s;
  flex-shrink: 0;
}
.btn-modern:active .btn-arrow { transform: translateX(3px); opacity: 0.8; }

.btn-back {
  background: var(--bg2);
  border: 1px solid var(--bg3);
  color: var(--text);
  width: 40px;
  height: 40px;
  border-radius: 12px;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.screen-top {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 24px;
}
.screen-top h2 { font-size: 22px; font-weight: 700; }

/* Language/Theme Grid â€” redesigned */
.select-subtitle {
  color: var(--text2);
  font-size: 13px;
  margin-top: 0;
  margin-bottom: 14px;
  line-height: 1.45;
}
.category-section {
  margin-bottom: 22px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.category-header {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.category-label {
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: #c8d3fb;
  margin-bottom: 0;
  padding-left: 2px;
}
.category-desc {
  font-size: 13px;
  color: #97a9de;
  opacity: 0.95;
  margin-bottom: 0;
  padding-left: 2px;
}
.category-cards {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.lang-grid {
  display: flex;
  flex-direction: column;
  gap: 14px;
  overflow-y: auto;
  overflow-x: hidden;
  flex: 1;
  padding-bottom: 16px;
  padding-right: 2px;
}
.lang-card {
  width: 100%;
  appearance: none;
  border: 1px solid rgba(138, 153, 225, 0.26);
  color: var(--text);
  text-align: left;
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border-radius: 20px;
  padding: 14px 14px 12px 16px;
  cursor: pointer;
  transition: all 0.25s;
  display: flex;
  align-items: center;
  gap: 14px;
  position: relative;
  overflow: hidden;
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.26);
}
.lang-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: var(--card-accent, var(--primary));
  border-radius: 4px 0 0 4px;
  opacity: 0.78;
  transition: opacity 0.25s;
}
.lang-card:hover {
  border-color: rgba(171, 185, 255, 0.38);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.3);
}
.lang-card:active { transform: translateX(3px) scale(0.98); }
.lang-card:active { border-color: var(--card-accent, var(--primary)); }
.lang-card:active::before { opacity: 1; }
.lang-card.active {
  border-color: var(--card-accent, var(--primary));
  background:
    linear-gradient(152deg, rgba(32, 40, 80, 0.9), rgba(20, 28, 57, 0.95)),
    radial-gradient(circle at 12% -45%, rgba(108, 99, 255, 0.24), transparent 52%);
  box-shadow:
    0 0 0 1px rgba(170, 184, 255, 0.16) inset,
    0 12px 24px rgba(0, 0, 0, 0.32);
}
.lang-icon {
  font-size: 30px;
  width: 54px;
  height: 54px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 15px;
  background: linear-gradient(150deg, rgba(53, 64, 111, 0.94), rgba(35, 45, 86, 0.98));
  border: 1px solid rgba(153, 169, 245, 0.2);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
  flex-shrink: 0;
}
.lang-info { flex: 1; min-width: 0; }
.lang-name {
  font-weight: 800;
  font-size: 16px;
  line-height: 1.2;
  color: #eef2ff;
}
.lang-desc {
  font-size: 13px;
  line-height: 1.35;
  color: #a7b6e3;
  margin-top: 3px;
}
.lang-meta {
  display: flex;
  align-items: center;
  gap: 9px;
  margin-top: 9px;
}
.lang-progress {
  flex: 1;
  height: 6px;
  background: rgba(100, 115, 177, 0.3);
  border-radius: 999px;
  overflow: hidden;
  border: 1px solid rgba(151, 164, 227, 0.16);
}
.lang-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--card-accent, var(--primary)), var(--secondary));
  border-radius: 999px;
  transition: width 0.5s;
  box-shadow: 0 0 6px rgba(108, 99, 255, 0.3);
}
.lang-pct {
  font-size: 13px;
  font-weight: 800;
  color: #d4dcfb;
  white-space: nowrap;
}
.lang-arrow {
  color: #a8b8e8;
  font-size: 21px;
  margin-left: 2px;
  transition: transform 0.2s;
  line-height: 1;
}
.lang-card:hover .lang-arrow { transform: translateX(3px); }

/* Topics */
.topic-header-card {
  border-radius: 18px;
  border: 1px solid rgba(143, 161, 236, 0.26);
  background:
    radial-gradient(circle at 14% -42%, rgba(120, 101, 255, 0.24), transparent 46%),
    linear-gradient(152deg, rgba(26, 34, 70, 0.96), rgba(16, 23, 49, 0.98));
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.3);
  padding: 14px;
  margin-bottom: 12px;
}
.topic-header-kicker {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 1.1px;
  color: #a7b7e9;
}
.topic-header-title {
  margin-top: 4px;
  font-size: 21px;
  line-height: 1.1;
  font-weight: 900;
  color: #edf2ff;
}
.topic-header-desc {
  margin-top: 5px;
  font-size: 13px;
  line-height: 1.45;
  color: #a9b8e2;
}
.topic-header-meta {
  margin-top: 9px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px 8px;
}
.topic-header-meta span {
  border-radius: 999px;
  border: 1px solid rgba(154, 171, 240, 0.24);
  background: rgba(255, 255, 255, 0.04);
  color: #cdd8f8;
  font-size: 11px;
  font-weight: 700;
  padding: 4px 9px;
}
.topic-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 2px;
  padding-bottom: 8px;
}
.topic-card {
  width: 100%;
  appearance: none;
  border: 1px solid rgba(136, 152, 221, 0.25);
  color: var(--text);
  text-align: left;
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border-radius: 18px;
  padding: 14px 12px 13px;
  cursor: pointer;
  transition: all 0.24s;
  display: flex;
  align-items: center;
  gap: 12px;
  box-shadow: 0 7px 16px rgba(0, 0, 0, 0.25);
  position: relative;
}
.topic-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  border-radius: 4px 0 0 4px;
  background: linear-gradient(180deg, rgba(108, 99, 255, 0.92), rgba(0, 212, 170, 0.88));
  opacity: 0.7;
}
.topic-card:hover {
  border-color: rgba(168, 183, 250, 0.35);
}
.topic-card.active {
  border-color: rgba(108, 137, 255, 0.55);
  box-shadow:
    0 0 0 1px rgba(170, 188, 255, 0.12) inset,
    0 10px 20px rgba(0, 0, 0, 0.32);
  background:
    linear-gradient(152deg, rgba(31, 40, 78, 0.9), rgba(21, 29, 58, 0.96)),
    radial-gradient(circle at 10% -50%, rgba(95, 122, 255, 0.2), transparent 54%);
}
.topic-card:active { transform: scale(0.98); }
.topic-emoji {
  font-size: 27px;
  width: 46px;
  height: 46px;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(150deg, rgba(56, 66, 112, 0.94), rgba(37, 46, 86, 0.98));
  border: 1px solid rgba(150, 165, 236, 0.18);
  flex-shrink: 0;
}
.topic-info { flex: 1; min-width: 0; }
.topic-name-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}
.topic-name {
  font-weight: 800;
  font-size: 16px;
  line-height: 1.22;
  color: #eef2ff;
}
.topic-count {
  border-radius: 999px;
  border: 1px solid rgba(157, 174, 244, 0.24);
  background: rgba(255, 255, 255, 0.04);
  color: #c7d3f8;
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.5px;
  padding: 4px 8px;
  white-space: nowrap;
}
.topic-desc {
  font-size: 13px;
  line-height: 1.38;
  color: #a6b5e1;
  margin-top: 4px;
}
.topic-progress-row {
  margin-top: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.topic-progress-bar {
  flex: 1;
  height: 6px;
  border-radius: 999px;
  background: rgba(100, 115, 177, 0.3);
  border: 1px solid rgba(151, 164, 227, 0.16);
  overflow: hidden;
}
.topic-progress-fill {
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, #6c63ff, #00d4aa);
  box-shadow: 0 0 6px rgba(108, 99, 255, 0.3);
  transition: width 0.45s ease;
}
.topic-progress-pct {
  font-size: 11px;
  font-weight: 800;
  color: #d4dcfb;
  white-space: nowrap;
}
.topic-badge {
  padding: 4px 9px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 800;
  white-space: nowrap;
  flex-shrink: 0;
}
.topic-badge.completed { background: rgba(0,212,170,0.15); color: var(--success); }
.topic-badge.started { background: rgba(108,99,255,0.15); color: var(--primary); }
.topic-badge.new { background: rgba(255,165,2,0.15); color: var(--warning); }
.topic-arrow {
  color: #a6b6e7;
  font-size: 20px;
  line-height: 1;
  flex-shrink: 0;
}

/* Difficulty */
.difficulty-list {
  display: flex;
  flex-direction: column;
  gap: 14px;
  flex: 1;
  justify-content: flex-start;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: 8px;
}
.diff-card {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border: 2px solid var(--glass-border);
  border-radius: 20px;
  padding: 22px;
  cursor: pointer;
  transition: all 0.25s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  text-align: center;
  box-shadow: var(--shadow-sm);
}
.diff-card:active { transform: scale(0.97); }
.diff-emoji { font-size: 32px; }
.diff-name { font-size: 18px; font-weight: 800; color: var(--text); }
.diff-desc { font-size: 13px; color: var(--text2); }
.diff-meta {
  margin-top: 4px;
  font-size: 11px;
  color: #b6c2ea;
  font-weight: 600;
}
.diff-progress {
  width: min(220px, 92%);
  height: 7px;
  border-radius: 999px;
  background: rgba(100, 115, 177, 0.3);
  border: 1px solid rgba(151, 164, 227, 0.16);
  overflow: hidden;
  margin-top: 6px;
}
.diff-progress-fill {
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, #6c63ff, #00d4aa);
  box-shadow: 0 0 7px rgba(108, 99, 255, 0.35);
  transition: width 0.45s ease;
}
.diff-mult {
  font-size: 12px;
  font-weight: 700;
  margin-top: 6px;
  padding: 3px 10px;
  border-radius: 8px;
  background: rgba(255,255,255,0.04);
}
.diff-easy:active { border-color: var(--success); box-shadow: var(--glow-secondary); }
.diff-easy .diff-mult { color: var(--success); }
.diff-easy .diff-progress-fill { background: linear-gradient(90deg, #00d4aa, #3ef5bf); }
.diff-medium:active { border-color: var(--warning); box-shadow: 0 0 20px rgba(255,165,2,0.3); }
.diff-medium .diff-mult { color: var(--warning); }
.diff-medium .diff-progress-fill { background: linear-gradient(90deg, #f9b43b, #ffd56a); }
.diff-hard:active { border-color: var(--accent); box-shadow: var(--glow-accent); }
.diff-hard .diff-mult { color: var(--accent); }
.diff-hard .diff-progress-fill { background: linear-gradient(90deg, #ff6b9d, #ff9868); }

/* Quiz Screen */
.pve-quiz-shell {
  margin-bottom: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(142, 161, 236, 0.26);
  background:
    radial-gradient(circle at 8% -42%, rgba(120, 99, 255, 0.24), transparent 46%),
    linear-gradient(150deg, rgba(24, 31, 62, 0.94), rgba(15, 22, 47, 0.98));
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.26);
}
.pve-quiz-topline {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}
.pve-quiz-mode {
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: #b9c8ef;
}
.pve-quiz-difficulty {
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 800;
  border: 1px solid transparent;
}
.pve-quiz-difficulty-easy {
  color: #8eeec2;
  background: rgba(0, 212, 170, 0.13);
  border-color: rgba(0, 212, 170, 0.34);
}
.pve-quiz-difficulty-medium {
  color: #ffd782;
  background: rgba(255, 165, 2, 0.14);
  border-color: rgba(255, 165, 2, 0.36);
}
.pve-quiz-difficulty-hard {
  color: #ff9aaa;
  background: rgba(255, 71, 87, 0.14);
  border-color: rgba(255, 71, 87, 0.34);
}
.pve-quiz-meta {
  margin-top: 7px;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
  color: #c6d2f5;
  font-size: 12px;
}
.pve-quiz-dot {
  opacity: 0.55;
}
.quiz-header { margin-bottom: 8px; }
.quiz-progress {
  height: 6px;
  background: var(--bg3);
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 12px;
}
.quiz-progress-bar {
  height: 100%;
  background: var(--gradient-primary);
  border-radius: 3px;
  transition: width 0.4s ease;
  width: 0%;
  box-shadow: 0 0 8px rgba(108, 99, 255, 0.5);
}
.quiz-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  font-weight: 600;
  color: var(--text2);
  gap: 8px;
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border-radius: 12px;
  padding: 10px 14px;
  border: 1px solid var(--glass-border);
}
.pve-quiz-info {
  justify-content: space-between;
  gap: 10px;
}
.quiz-info-main {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.quiz-info-main > span {
  white-space: nowrap;
}
.btn-quiz-menu {
  border: 1px solid rgba(161, 180, 250, 0.3);
  background: rgba(255, 255, 255, 0.05);
  color: #d8e2ff;
  border-radius: 10px;
  width: 36px;
  height: 36px;
  font-size: 16px;
  font-weight: 900;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.btn-quiz-menu:active {
  transform: scale(0.94);
}
.btn-pause {
  background: var(--bg2);
  border: 1px solid var(--bg3);
  color: var(--text2);
  width: 34px;
  height: 34px;
  border-radius: 10px;
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  letter-spacing: -2px;
  transition: all 0.2s;
}
.btn-pause:active { transform: scale(0.9); }
.quiz-lives { display: flex; gap: 4px; font-size: 18px; }
.heart { transition: all 0.3s; }
.heart.lost { opacity: 0.2; transform: scale(0.8); }

.quiz-streak {
  text-align: center;
  padding: 6px;
  font-size: 13px;
  font-weight: 700;
  color: var(--warning);
  animation: pulse 0.6s ease;
}

.quiz-timer {
  height: 4px;
  background: var(--bg3);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 16px;
}
.timer-bar {
  height: 100%;
  background: var(--secondary);
  border-radius: 2px;
  width: 100%;
  transition: width 0.1s linear, background-color 0.3s;
}
.timer-bar.warning { background: var(--warning); box-shadow: 0 0 8px rgba(255,165,2,0.4); }
.timer-bar.danger { background: var(--error); box-shadow: 0 0 8px rgba(255,71,87,0.5); animation: timer-pulse 0.5s ease-in-out infinite; }

.quiz-body { flex: 1; display: flex; flex-direction: column; }
.pve-quiz-body {
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 2px;
  padding-bottom: 6px;
}
.pvp-quiz-body {
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: 12px;
  scrollbar-width: none;
}
.pvp-quiz-body::-webkit-scrollbar { display: none; }
.pvp-quiz-body .options-list { flex: 0 0 auto; }

.question-card {
  background: var(--glass-bg);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 18px;
  margin-bottom: 12px;
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-md), inset 0 1px 0 rgba(255,255,255,0.04);
  animation: slideUp 0.3s ease;
  position: relative;
  overflow: hidden;
}
.question-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--gradient-primary);
}
.question-scroll-wrap {
  max-height: clamp(132px, 33vh, 260px);
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 8px;
  scrollbar-width: thin;
  scrollbar-color: rgba(134, 170, 255, 0.72) rgba(255, 255, 255, 0.06);
  scrollbar-gutter: stable;
}
.question-scroll-wrap::-webkit-scrollbar {
  width: 6px;
}
.question-scroll-wrap::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.06);
  border-radius: 999px;
}
.question-scroll-wrap::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(150, 184, 255, 0.9), rgba(95, 132, 255, 0.9));
  border-radius: 999px;
}
.question-scroll-wrap.has-overflow {
  padding-right: 10px;
}
.question-scroll-indicator {
  position: absolute;
  top: 12px;
  right: 6px;
  width: 3px;
  height: 52px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(176, 204, 255, 0.24), rgba(112, 158, 255, 0.72), rgba(176, 204, 255, 0.24));
  box-shadow: 0 0 10px rgba(102, 145, 255, 0.22);
  pointer-events: none;
}
.question-text { font-size: 16px; font-weight: 600; line-height: 1.45; }
.question-code {
  background: var(--bg);
  border-radius: 10px;
  padding: 14px;
  margin-top: 12px;
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 13px;
  line-height: 1.6;
  overflow-x: auto;
  color: var(--secondary);
  border: 1px solid var(--bg3);
}

.options-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
}
.option-btn {
  background: var(--glass-bg);
  backdrop-filter: blur(6px);
  border: 2px solid var(--glass-border);
  border-radius: var(--radius);
  padding: 13px 14px;
  color: var(--text);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
  display: flex;
  align-items: center;
  gap: 12px;
  line-height: 1.4;
  position: relative;
}
.option-btn::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  border-radius: var(--radius) 0 0 var(--radius);
  background: var(--primary);
  opacity: 0;
  transition: opacity 0.2s;
}
.option-btn:active { transform: translateX(4px) scale(0.98); }
.option-btn:active::before { opacity: 0.6; }
.option-btn.selected {
  border-color: rgba(108, 99, 255, 0.75);
  box-shadow: 0 0 0 2px rgba(108, 99, 255, 0.18), 0 8px 20px rgba(108, 99, 255, 0.18);
  background: rgba(108, 99, 255, 0.12);
}
.option-btn.selected::before {
  opacity: 1;
}
.option-btn .opt-letter {
  width: 28px;
  height: 28px;
  border-radius: 8px;
  background: var(--bg3);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 12px;
  flex-shrink: 0;
  transition: all 0.25s;
}
.option-btn.correct {
  border-color: var(--success);
  background: rgba(0,212,170,0.12);
  box-shadow: 0 0 20px rgba(0,212,170,0.2), inset 0 0 16px rgba(0,212,170,0.05);
  animation: pop 0.3s ease;
}
.option-btn.correct::before { background: var(--success); opacity: 1; width: 5px; }
.option-btn.correct .opt-letter {
  background: var(--success);
  color: white;
  box-shadow: 0 0 10px rgba(0,212,170,0.5);
  transform: scale(1.1);
}
.option-btn.wrong {
  border-color: var(--error);
  background: rgba(255,71,87,0.12);
  box-shadow: 0 0 20px rgba(255,71,87,0.2), inset 0 0 16px rgba(255,71,87,0.05);
  animation: shake 0.4s ease;
}
.option-btn.wrong::before { background: var(--error); opacity: 1; width: 5px; }
.option-btn.wrong .opt-letter {
  background: var(--error);
  color: white;
  box-shadow: 0 0 10px rgba(255,71,87,0.5);
}
.option-btn.disabled { pointer-events: none; opacity: 0.4; }
.quiz-confirm-btn {
  margin-top: 10px;
  min-height: 44px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 800;
  letter-spacing: 0.2px;
}
.pvp-question-card {
  pointer-events: auto;
  overflow: visible;
}
.pvp-question-card .question-scroll-wrap {
  max-height: clamp(126px, 28vh, 236px);
}
.pvp-question-card .question-text {
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.pvp-question-card .question-code {
  max-width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.pvp-answer-actions {
  margin-top: 10px;
  display: flex;
  justify-content: center;
}
.pvp-confirm-answer-btn {
  min-width: 220px;
  max-width: 100%;
  border-color: rgba(143, 190, 255, 0.4);
  background: linear-gradient(135deg, #5f5bff, #2fcbcf);
  box-shadow: 0 10px 26px rgba(41, 95, 255, 0.28);
  transition: transform 0.16s ease, box-shadow 0.2s ease, filter 0.2s ease;
}
.pvp-confirm-answer-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 30px rgba(41, 95, 255, 0.36);
}
.pvp-confirm-answer-btn:active {
  transform: translateY(1px) scale(0.992);
}
.pvp-confirm-answer-btn:disabled {
  filter: saturate(0.52) brightness(0.84);
  box-shadow: none;
  transform: none;
}

/* Feedback Screen */
.feedback-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
  gap: 16px;
  padding: 16px 14px calc(88px + var(--safe-bottom));
  overflow-y: auto;
  overflow-x: hidden;
}
.feedback-emoji { font-size: 64px; animation: pop 0.4s ease; }
.feedback-title { font-size: 26px; font-weight: 800; }
.feedback-explain {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border-radius: 18px;
  padding: 18px;
  font-size: 14px;
  line-height: 1.6;
  color: var(--text2);
  max-width: 100%;
  text-align: left;
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-sm);
}
.feedback-xp {
  font-size: 22px;
  font-weight: 800;
  color: var(--secondary);
  animation: pop 0.5s ease;
  text-shadow: 0 0 16px rgba(0, 212, 170, 0.4);
}

/* Result Screen */
.result-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 12px;
  padding: 10px;
}
.pve-result-content {
  width: 100%;
  min-height: 0;
  justify-content: flex-start;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 8px calc(96px + var(--safe-bottom));
  gap: 10px;
}
.pve-result-content .btn {
  width: 100%;
}
.result-emoji { font-size: 72px; animation: pop 0.5s ease; }
.result-title { font-size: 28px; font-weight: 800; }
.result-subtitle { color: var(--text2); font-size: 15px; }
.result-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  width: 100%;
  margin: 16px 0;
}
.result-stat {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border-radius: 18px;
  padding: 16px;
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-sm);
}
.result-stat-value { font-size: 28px; font-weight: 800; color: var(--primary); font-variant-numeric: tabular-nums; }
.result-stat-label { font-size: 12px; color: var(--text2); margin-top: 4px; }
.result-xp-bar {
  width: 100%;
  background: var(--bg3);
  height: 10px;
  border-radius: 5px;
  overflow: hidden;
  margin: 8px 0;
}
.result-xp-fill {
  height: 100%;
  background: var(--gradient-primary);
  border-radius: 5px;
  transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 0 12px rgba(108, 99, 255, 0.5);
}
.result-level-info { font-size: 13px; color: var(--text2); }
.quiz-result-panel {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 6px 2px 2px;
  border-radius: 18px;
  position: relative;
  overflow: hidden;
}
.quiz-result-panel::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.22;
  background: linear-gradient(120deg, rgba(255, 255, 255, 0.15), transparent 42%, rgba(255, 255, 255, 0.1) 68%, transparent);
  animation: cosmetic-shimmer 2.8s linear infinite;
}
.quiz-result-panel > * {
  position: relative;
  z-index: 1;
}
.quiz-result-panel.tier-high {
  border: 1px solid rgba(0, 212, 170, 0.4);
  background: linear-gradient(145deg, rgba(0, 212, 170, 0.14), rgba(17, 21, 43, 0.94));
}
.quiz-result-panel.tier-mid {
  border: 1px solid rgba(108, 99, 255, 0.4);
  background: linear-gradient(145deg, rgba(108, 99, 255, 0.14), rgba(17, 21, 43, 0.94));
}
.quiz-result-panel.tier-low {
  border: 1px solid rgba(255, 71, 87, 0.38);
  background: linear-gradient(145deg, rgba(255, 71, 87, 0.14), rgba(17, 21, 43, 0.94));
}
.result-leaderboard {
  width: 100%;
  margin-top: 8px;
  padding: 12px;
  border-radius: 14px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
}
.result-leaderboard-title {
  font-size: 13px;
  font-weight: 800;
  color: var(--text2);
  text-align: left;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.4px;
}
.result-leaderboard-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.result-leaderboard-item {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 8px 10px;
}
.result-leaderboard-pos {
  min-width: 32px;
  font-weight: 800;
  color: var(--text2);
}

/* Sync Badge */
.sync-badge {
  position: fixed;
  right: 14px;
  bottom: calc(66px + var(--safe-bottom));
  z-index: 60;
  background: rgba(26, 26, 46, 0.88);
  border: 1px solid var(--glass-border);
  color: var(--text2);
  font-size: 11px;
  font-weight: 700;
  padding: 7px 10px;
  border-radius: 999px;
  backdrop-filter: blur(8px);
  box-shadow: var(--shadow-sm);
  transition: all 0.2s ease;
}
.sync-badge.pending {
  color: var(--warning);
  border-color: rgba(255, 165, 2, 0.4);
}
.sync-badge.success {
  color: var(--secondary);
  border-color: rgba(0, 212, 170, 0.4);
}
.sync-badge.error {
  color: var(--error);
  border-color: rgba(255, 71, 87, 0.45);
}

/* Stats Screen */
.stats-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
  overflow-y: auto;
}
.stats-card {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border-radius: 18px;
  padding: 18px;
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-sm);
}
.stats-card h3 { font-size: 14px; color: var(--text2); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
.stats-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--bg3); }
.stats-row:last-child { border: none; }
.stats-row-label { color: var(--text2); font-size: 14px; }
.stats-row-value { font-weight: 700; font-size: 14px; }

/* Achievements */
.achievements-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  flex: 1;
  overflow-y: auto;
}
.achievement-card {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border: 1px solid var(--glass-border);
  border-radius: 18px;
  padding: 16px;
  display: flex;
  align-items: center;
  gap: 14px;
  transition: all 0.2s;
  box-shadow: var(--shadow-sm);
}
.achievement-card.unlocked { border-color: var(--warning); box-shadow: 0 0 16px rgba(255,165,2,0.15); }
.achievement-icon { font-size: 32px; flex-shrink: 0; }
.achievement-card.locked .achievement-icon { filter: grayscale(1); opacity: 0.4; }
.achievement-info { flex: 1; }
.achievement-name { font-weight: 700; font-size: 14px; }
.achievement-desc { font-size: 12px; color: var(--text2); margin-top: 2px; }
.achievement-check { color: var(--warning); font-size: 20px; }

/* Toast */
#toast-container {
  position: fixed;
  top: calc(20px + var(--safe-top));
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
}
.toast {
  background: linear-gradient(145deg, rgba(23, 29, 56, 0.95), rgba(17, 22, 43, 0.95));
  border: 1px solid rgba(108, 99, 255, 0.46);
  border-radius: 14px;
  padding: 12px 20px;
  font-size: 14px;
  font-weight: 700;
  animation: slideUp 0.3s ease, fadeOut 0.3s ease 2.5s forwards;
  white-space: nowrap;
  text-align: center;
  box-shadow: 0 8px 24px rgba(0,0,0,0.42), 0 0 0 1px rgba(108, 99, 255, 0.16);
  backdrop-filter: blur(8px);
}
.network-warning-float {
  position: fixed;
  top: calc(20px + var(--safe-top));
  right: calc(14px + var(--safe-right));
  z-index: 2300;
  max-width: min(320px, calc(100vw - 28px));
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255, 165, 2, 0.36);
  background: linear-gradient(145deg, rgba(28, 25, 16, 0.96), rgba(21, 20, 13, 0.96));
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.38), 0 0 0 1px rgba(255, 165, 2, 0.12);
  animation: networkWarningIn 0.32s ease, networkWarningBreath 2.2s ease-in-out infinite;
  pointer-events: none;
}
.network-warning-float.offline {
  border-color: rgba(255, 71, 87, 0.52);
  background: linear-gradient(145deg, rgba(40, 18, 22, 0.96), rgba(29, 14, 17, 0.96));
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 71, 87, 0.2);
}
.network-warning-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--warning);
  box-shadow: 0 0 0 4px rgba(255, 165, 2, 0.16);
  flex-shrink: 0;
  animation: networkDotPulse 1s ease-in-out infinite;
}
.network-warning-float.offline .network-warning-dot {
  background: #ff6e7e;
  box-shadow: 0 0 0 4px rgba(255, 110, 126, 0.2);
}
.network-warning-text {
  color: #ffe7b7;
  font-size: 12px;
  font-weight: 700;
  line-height: 1.35;
}
.network-warning-float.offline .network-warning-text {
  color: #ffd9dd;
}
@keyframes fadeOut {
  to { opacity: 0; transform: translateY(-10px); }
}

@keyframes queueStatusIn {
  from { opacity: 0; transform: translateY(6px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes queueStatusPulse {
  0%, 100% { transform: scale(1); opacity: 0.95; }
  50% { transform: scale(1.24); opacity: 1; }
}

@keyframes metricShimmer {
  0%, 74% { left: -140%; opacity: 0; }
  78% { opacity: 0.3; }
  100% { left: 140%; opacity: 0; }
}

@keyframes onlineValuePulse {
  0%, 100% { transform: scale(1); opacity: 0.92; }
  50% { transform: scale(1.08); opacity: 1; }
}

@keyframes statusSweep {
  0%, 70% { left: -135%; opacity: 0; }
  78% { opacity: 0.4; }
  100% { left: 135%; opacity: 0; }
}

@keyframes networkWarningIn {
  from { opacity: 0; transform: translateY(-10px) translateX(8px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) translateX(0) scale(1); }
}

@keyframes networkWarningBreath {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-1px); }
}

@keyframes networkDotPulse {
  0%, 100% { transform: scale(1); opacity: 0.9; }
  50% { transform: scale(1.25); opacity: 1; }
}

@media (prefers-reduced-motion: reduce) {
  .pvp-metric::before,
  .pvp-metric-live-value,
  .challenge-status::before,
  .queue-action-indicator,
  .queue-action-status,
  .network-warning-float,
  .network-warning-dot,
  .pvp-quiz-timer.time-critical,
  .pvp-quiz-timer.time-critical .timer-bar,
  .pvp-round-indicator.phase-final,
  .pvp-round-indicator.phase-elimination,
  .pvp-round-indicator .pvp-round-phase,
  .pvp-round-countdown.is-urgent,
  .pvp-round-card.phase-elimination,
  .pvp-result-panel-dynamic .pvp-result-seq,
  .pvp-result-transition-overlay,
  .pvp-result-transition-card,
  .pvp-result-transition-spinner {
    animation: none !important;
  }
}

/* Confetti */
.confetti-piece {
  position: fixed;
  width: 10px;
  height: 10px;
  top: -10px;
  z-index: 999;
  border-radius: 2px;
  animation: confetti-fall 2.5s linear forwards;
}

/* Auth transition overlay */
.auth-transition-overlay {
  position: fixed;
  inset: 0;
  z-index: 2400;
  background: rgba(7, 9, 20, 0.78);
  backdrop-filter: blur(3px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.auth-transition-card {
  width: 100%;
  max-width: 360px;
  background: linear-gradient(145deg, rgba(28, 31, 62, 0.97), rgba(19, 22, 45, 0.97));
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 20px 18px;
  text-align: center;
  box-shadow: 0 18px 42px rgba(0, 0, 0, 0.45);
}
.auth-transition-spinner {
  width: 30px;
  height: 30px;
  margin: 0 auto 12px;
  border: 3px solid rgba(255, 255, 255, 0.22);
  border-top-color: var(--primary);
  border-radius: 50%;
  animation: spin 0.75s linear infinite;
}
.auth-transition-title {
  font-size: 17px;
  font-weight: 800;
  margin-bottom: 6px;
}
.auth-transition-subtitle {
  color: var(--text2);
  font-size: 13px;
  line-height: 1.45;
}

/* Update banner */
.update-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 2000;
  background: linear-gradient(135deg, var(--primary), #8b7dff);
  color: white;
  padding: calc(14px + var(--safe-top)) 20px 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  animation: slideDown 0.4s ease;
  box-shadow: 0 4px 20px rgba(0,0,0,0.4);
}
@keyframes slideDown {
  from { transform: translateY(-100%); }
  to { transform: translateY(0); }
}
.update-banner-text {
  font-size: 14px;
  font-weight: 600;
}
.update-notice-bar {
  position: fixed;
  top: calc(8px + var(--safe-top));
  left: 50%;
  transform: translateX(-50%);
  width: min(calc(100% - 18px), 520px);
  z-index: 2200;
  pointer-events: none;
}
.update-notice-inner {
  pointer-events: auto;
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 14px;
  padding: 8px 10px 8px 11px;
  border: 1px solid rgba(96, 129, 255, 0.42);
  background:
    radial-gradient(circle at 8% -40%, rgba(120, 98, 255, 0.34), transparent 44%),
    linear-gradient(150deg, rgba(20, 27, 56, 0.98), rgba(11, 17, 38, 0.98));
  box-shadow:
    0 12px 26px rgba(4, 8, 24, 0.52),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(6px);
}
.update-notice-main {
  flex: 1;
  min-width: 0;
  display: flex;
  align-items: center;
  gap: 9px;
}
.update-notice-dot {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: #59f1bf;
  box-shadow: 0 0 0 0 rgba(89, 241, 191, 0.5);
  flex-shrink: 0;
  animation: update-dot-pulse 1.5s ease-in-out infinite;
}
.update-notice-copy {
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}
.update-notice-title {
  color: #f0f3ff;
  font-size: 12px;
  line-height: 1.2;
  font-weight: 800;
  letter-spacing: 0.2px;
}
.update-notice-text {
  color: #b7c5ef;
  font-size: 10px;
  line-height: 1.25;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.update-notice-btn {
  min-height: 32px;
  min-width: 92px;
  border-radius: 999px;
  border: 1px solid rgba(129, 149, 255, 0.62);
  padding: 6px 12px;
  color: #f7f8ff;
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.2px;
  background: linear-gradient(135deg, rgba(96, 125, 255, 0.95), rgba(46, 195, 173, 0.92));
  box-shadow: 0 6px 14px rgba(47, 83, 180, 0.35);
}
.update-notice-btn:active {
  transform: scale(0.96);
}
.update-notice-btn:disabled {
  opacity: 0.78;
  cursor: wait;
}
.update-notice-bar.is-applying .update-notice-dot {
  background: #ffd166;
  box-shadow: 0 0 0 0 rgba(255, 209, 102, 0.45);
}
@keyframes update-dot-pulse {
  0% { box-shadow: 0 0 0 0 rgba(89, 241, 191, 0.46); }
  72% { box-shadow: 0 0 0 10px rgba(89, 241, 191, 0); }
  100% { box-shadow: 0 0 0 0 rgba(89, 241, 191, 0); }
}
.update-spinner {
  width: 18px;
  height: 18px;
  border: 2.5px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}

.cookie-consent-banner {
  position: fixed;
  left: 50%;
  bottom: calc(14px + var(--safe-bottom));
  transform: translateX(-50%);
  width: min(calc(100% - 20px), 520px);
  z-index: 2100;
}
.cookie-consent-card {
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background:
    radial-gradient(circle at 90% -25%, rgba(86, 120, 255, 0.2), transparent 48%),
    linear-gradient(155deg, rgba(18, 24, 47, 0.97), rgba(10, 15, 34, 0.98));
  box-shadow: 0 16px 30px rgba(0, 0, 0, 0.45);
  padding: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
}
.cookie-consent-copy {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.cookie-consent-title {
  font-size: 13px;
  font-weight: 800;
  color: #f0f3ff;
}
.cookie-consent-text {
  font-size: 11px;
  line-height: 1.35;
  color: #afbee8;
}
.cookie-consent-actions {
  display: flex;
  gap: 7px;
  flex-shrink: 0;
}
.cookie-consent-btn {
  min-height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(126, 146, 255, 0.36);
  padding: 6px 11px;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.1px;
}
.cookie-consent-btn-muted {
  color: #d6def9;
  background: rgba(255, 255, 255, 0.05);
}
.cookie-consent-btn-primary {
  color: #f8f9ff;
  border-color: rgba(108, 129, 255, 0.58);
  background: linear-gradient(135deg, rgba(102, 126, 255, 0.95), rgba(63, 187, 171, 0.95));
}

/* Mandatory reset modal */
.reset-modal {
  position: fixed;
  inset: 0;
  z-index: 2500;
  background: rgba(8, 9, 20, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.reset-modal-card {
  width: 100%;
  max-width: 420px;
  background: linear-gradient(145deg, rgba(28, 31, 62, 0.96), rgba(20, 22, 48, 0.96));
  border: 1px solid var(--glass-border);
  border-radius: 18px;
  padding: 22px;
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
  text-align: center;
}
.reset-modal-card {
  animation: pop 0.24s ease;
}
.reset-modal-card h3 {
  font-size: 22px;
  font-weight: 800;
  margin-bottom: 10px;
}
.reset-modal-card p {
  color: var(--text2);
  font-size: 14px;
  line-height: 1.5;
  margin-bottom: 18px;
}
.reward-collect-modal {
  z-index: 2800;
}
.reward-collect-card {
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 165, 2, 0.45);
  background:
    radial-gradient(circle at 12% 0%, rgba(255, 165, 2, 0.2), transparent 40%),
    radial-gradient(circle at 90% 10%, rgba(108, 99, 255, 0.25), transparent 46%),
    linear-gradient(145deg, rgba(26, 30, 60, 0.96), rgba(17, 19, 42, 0.96));
  box-shadow: 0 24px 52px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.08);
}
.reward-collect-card h3 {
  margin-bottom: 6px;
}
.reward-collect-card p {
  margin-bottom: 14px;
}
.reward-collect-shine {
  position: absolute;
  inset: -8px;
  pointer-events: none;
}
.reward-collect-shine::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(105deg, transparent 20%, rgba(255, 255, 255, 0.25) 50%, transparent 80%);
  animation: cosmetic-shimmer 2.3s linear infinite;
}
.reward-collect-list {
  display: grid;
  gap: 8px;
  margin-bottom: 12px;
}
.reward-collect-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.16);
  background: rgba(255, 255, 255, 0.05);
}
.reward-collect-item-label {
  font-size: 13px;
  color: var(--text2);
  font-weight: 700;
}
.reward-collect-item-value {
  font-size: 16px;
  font-weight: 900;
  color: var(--text);
}
.reward-collect-item-value.xp { color: #8ec5ff; }
.reward-collect-item-value.coins { color: var(--warning); }
.reward-collect-item-value.points { color: var(--secondary); }
.reward-collect-item-value.points-loss { color: #ff8f9f; }
.reward-collect-item-value.level { color: #ffd76a; }
.reward-collect-item-value.achievement { color: #ffb4da; }
.reward-collect-btn {
  width: 100%;
  min-height: 56px;
  margin-top: 2px;
  border: 1px solid rgba(255, 180, 69, 0.7);
  border-radius: 14px;
  background: linear-gradient(135deg, #ff9f1a, #ff5f6d 55%, #9b5cff);
  color: #fff;
  font-size: 17px;
  font-weight: 900;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  box-shadow: 0 14px 30px rgba(255, 95, 109, 0.4), 0 0 26px rgba(255, 159, 26, 0.42);
  animation: reward-glow 1.4s ease-in-out infinite;
}
.reward-collect-btn:active {
  transform: scale(0.97);
}
.reward-collect-btn[disabled] {
  opacity: 0.7;
  pointer-events: none;
}
.reward-collect-particles {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2810;
  overflow: hidden;
}
.reward-fx-particle {
  position: fixed;
  left: 0;
  top: 0;
  width: var(--size, 18px);
  height: var(--size, 18px);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--size, 18px);
  line-height: 1;
  opacity: 0;
  pointer-events: none;
  transform: translate3d(0, 0, 0) scale(0.72) rotate(var(--rotation, 0deg));
  animation-name: reward-fx-rise;
  animation-duration: var(--duration, 1800ms);
  animation-delay: var(--delay, 0ms);
  animation-fill-mode: forwards;
  animation-timing-function: cubic-bezier(0.19, 0.77, 0.21, 1);
  will-change: transform, opacity;
}
.reward-fx-particle.coin {
  filter: drop-shadow(0 0 8px rgba(255, 197, 58, 0.65));
}
.reward-fx-particle.xp {
  color: #9ed8ff;
  text-shadow: 0 0 8px rgba(136, 202, 255, 0.56);
}
@keyframes reward-fx-rise {
  0% {
    opacity: 0;
    transform: translate3d(0, 0, 0) scale(0.68) rotate(var(--rotation, 0deg));
  }
  12% {
    opacity: 1;
  }
  55% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translate3d(calc(var(--dx, 0px) + var(--drift, 0px)), var(--dy, -260px), 0) scale(1.02) rotate(calc(var(--rotation, 0deg) + 8deg));
  }
}
.reward-fx-particle::after {
  content: '';
  position: absolute;
  inset: auto;
  width: 38%;
  height: 38%;
  border-radius: 999px;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.75) 0%, transparent 72%);
  transform: translateY(16%);
  opacity: 0.82;
}
.reward-fx-particle.xp::after {
  background: radial-gradient(circle, rgba(188, 229, 255, 0.86) 0%, transparent 72%);
}
.reward-fx-particle.coin::after {
  background: radial-gradient(circle, rgba(255, 233, 156, 0.82) 0%, transparent 72%);
}
.reward-fx-particle.xp:nth-child(2n) {
  transform: translate3d(0, 0, 0) scale(0.65) rotate(calc(var(--rotation, 0deg) - 8deg));
}
.reward-fx-particle.coin:nth-child(2n + 1) {
  transform: translate3d(0, 0, 0) scale(0.78) rotate(calc(var(--rotation, 0deg) + 12deg));
}
.reward-fx-particle:nth-child(3n) {
  filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.28));
}
.level-up-flash {
  animation: reward-glow 0.7s ease-in-out 2;
}

/* Sound toggle */
/* Music Player */
.music-player {
  position: fixed;
  bottom: calc(16px + var(--safe-bottom));
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 32px);
  max-width: 400px;
  height: 48px;
  background: var(--bg2);
  border: 1px solid var(--bg3);
  border-radius: 24px;
  display: none;
  align-items: center;
  gap: 10px;
  padding: 0 8px 0 16px;
  z-index: 150;
  box-shadow: 0 4px 16px rgba(0,0,0,0.4);
}
.music-player.visible {
  display: flex;
}
.music-player-icon {
  font-size: 16px;
  color: var(--primary);
  animation: pulse 1.5s ease infinite;
  flex-shrink: 0;
}
.music-player-name {
  flex: 1;
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.music-player-skip {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: var(--bg3);
  border: none;
  color: var(--text);
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.2s;
}
.music-player-skip:active { transform: scale(0.85); background: var(--primary); }

/* Audio Settings Screen */
.audio-settings {
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.settings-save-btn {
  width: auto;
  min-width: 132px;
  align-self: flex-end;
  margin-top: 2px;
  padding: 10px 16px;
  font-size: 14px;
}
.settings-personal-data {
  margin-top: 14px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 18px;
  padding: 16px;
  box-shadow: var(--shadow-sm);
}
.settings-personal-title {
  font-size: 16px;
  font-weight: 800;
  color: var(--text);
}
.settings-personal-subtitle {
  margin-top: 4px;
  color: var(--text2);
  font-size: 12px;
}
.settings-personal-form {
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.settings-input-label {
  font-size: 12px;
  color: var(--text2);
  font-weight: 700;
}
.settings-input {
  width: 100%;
  max-width: none;
  text-align: left;
  font-size: 15px;
  padding: 12px 14px;
}
.settings-personal-hint {
  min-height: 16px;
  color: var(--text2);
  font-size: 11px;
}
.settings-personal-form .btn {
  width: 100%;
  margin-top: 2px;
}
.settings-app-version {
  margin-top: 14px;
  text-align: center;
  font-size: 12px;
  color: var(--text2);
  opacity: 0.9;
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.settings-app-version-code {
  color: var(--text);
  font-size: 13px;
  font-weight: 800;
  letter-spacing: 0.5px;
}
.settings-app-version-updated {
  color: var(--text2);
  font-size: 11px;
  font-weight: 600;
}
.pwa-install-box {
  margin-top: 10px;
  padding: 12px;
  border-radius: 14px;
  border: 1px solid rgba(108, 99, 255, 0.3);
  background: linear-gradient(145deg, rgba(108, 99, 255, 0.12), rgba(0, 212, 170, 0.08));
}
.pwa-install-btn {
  width: 100%;
  min-height: 44px;
  font-weight: 800;
  letter-spacing: 0.3px;
}
.pwa-install-hint {
  margin-top: 8px;
  font-size: 11px;
  line-height: 1.35;
  color: var(--text2);
  text-align: center;
}

.audio-option {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border: 1px solid var(--glass-border);
  border-radius: 18px;
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  box-shadow: var(--shadow-sm);
}

.audio-option-header {
  display: flex;
  align-items: center;
  gap: 14px;
}

.audio-option-icon {
  font-size: 26px;
  width: 44px;
  height: 44px;
  background: var(--bg3);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.audio-option-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
}

.audio-option-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--text);
}

.audio-option-desc {
  font-size: 12px;
  color: var(--text2);
}

.settings-switch {
  position: relative;
  display: inline-flex;
  width: 56px;
  height: 32px;
  flex-shrink: 0;
}

.settings-switch input {
  position: absolute;
  inset: 0;
  margin: 0;
  opacity: 0;
  cursor: pointer;
  z-index: 3;
}

.settings-switch-track {
  width: 100%;
  height: 100%;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.16);
  border: 1px solid rgba(255, 255, 255, 0.24);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
  display: inline-flex;
  align-items: center;
  padding: 3px;
  transition: background-color 0.2s ease, box-shadow 0.2s ease;
}

.settings-switch-thumb {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: #ffffff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.38);
  transform: translateX(0);
  transition: transform 0.2s ease;
}

.settings-switch input:checked + .settings-switch-track {
  background: linear-gradient(135deg, var(--primary), #4fdbcf);
  border-color: rgba(108, 99, 255, 0.7);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

.settings-switch input:checked + .settings-switch-track .settings-switch-thumb {
  transform: translateX(24px);
}

.settings-switch input:focus-visible + .settings-switch-track {
  outline: 2px solid rgba(108, 99, 255, 0.55);
  outline-offset: 2px;
}

.vol-label {
  font-size: 14px;
  font-weight: 700;
  color: var(--primary);
  min-width: 40px;
  text-align: right;
}

/* Volume Slider */
.vol-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 6px;
  background: var(--bg3);
  border-radius: 3px;
  outline: none;
  cursor: pointer;
}

.vol-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 22px;
  height: 22px;
  background: var(--primary);
  border-radius: 50%;
  border: 3px solid var(--bg2);
  box-shadow: 0 2px 8px var(--primary-glow);
  cursor: pointer;
  transition: transform 0.15s;
}

.vol-slider::-webkit-slider-thumb:active {
  transform: scale(1.2);
}

.vol-slider::-moz-range-thumb {
  width: 22px;
  height: 22px;
  background: var(--primary);
  border-radius: 50%;
  border: 3px solid var(--bg2);
  box-shadow: 0 2px 8px var(--primary-glow);
  cursor: pointer;
}

.vol-slider::-moz-range-track {
  height: 6px;
  background: var(--bg3);
  border-radius: 3px;
}
.admin-lock-btn {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(76px + var(--safe-bottom));
  width: 34px;
  height: 34px;
  border: none;
  background: transparent;
  color: #ffd563;
  font-size: 20px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  text-shadow: 0 2px 7px rgba(0, 0, 0, 0.52);
  z-index: 180;
  padding: 0;
}
.home-build-badge {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(114px + var(--safe-bottom));
  max-width: calc(100vw - 28px);
  padding: 0 8px;
  font-size: 10px;
  line-height: 1.25;
  letter-spacing: 0.15px;
  color: rgba(196, 202, 229, 0.86);
  text-align: center;
  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.42);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  pointer-events: none;
  z-index: 179;
}
.admin-lock-btn:focus-visible {
  outline: 2px solid rgba(255, 213, 99, 0.6);
  outline-offset: 2px;
  border-radius: 50%;
}
.admin-lock-btn:active {
  transform: translateX(-50%) scale(0.9);
}

.admin-screen-shell {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
  min-height: 0;
}
.admin-screen-hero {
  border: 1px solid rgba(121, 141, 255, 0.28);
  border-radius: 14px;
  padding: 14px;
  background: linear-gradient(135deg, rgba(33, 42, 99, 0.44), rgba(20, 24, 60, 0.62));
}
.admin-screen-hero-title {
  font-size: 15px;
  font-weight: 800;
  color: rgba(241, 245, 255, 0.96);
}
.admin-screen-hero-subtitle {
  margin-top: 6px;
  color: rgba(188, 198, 233, 0.9);
  font-size: 12px;
  line-height: 1.4;
}
.admin-screen-stats {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}
.admin-screen-stat-card {
  border: 1px solid rgba(97, 114, 206, 0.3);
  border-radius: 12px;
  padding: 11px;
  background: rgba(13, 17, 45, 0.7);
}
.admin-screen-stat-card span {
  display: block;
  color: rgba(189, 199, 240, 0.86);
  font-size: 11px;
}
.admin-screen-stat-card strong {
  display: block;
  margin-top: 4px;
  font-size: 20px;
  font-weight: 800;
  color: rgba(245, 248, 255, 0.98);
}
.admin-screen-updated-at {
  font-size: 11px;
  color: rgba(178, 189, 232, 0.84);
}
.admin-screen-actions {
  display: grid;
  gap: 10px;
}
.admin-daemon-control {
  border: 1px solid rgba(98, 123, 223, 0.3);
  border-radius: 12px;
  padding: 10px;
  background: rgba(13, 18, 46, 0.72);
  display: grid;
  gap: 10px;
}
.admin-daemon-head {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}
.admin-daemon-dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  margin-top: 4px;
  flex: 0 0 auto;
  box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.06);
}
.admin-daemon-dot.enabled {
  background: #4be6b1;
  box-shadow: 0 0 0 4px rgba(75, 230, 177, 0.18), 0 0 12px rgba(75, 230, 177, 0.45);
}
.admin-daemon-dot.disabled {
  background: #ff8b8b;
  box-shadow: 0 0 0 4px rgba(255, 139, 139, 0.18), 0 0 12px rgba(255, 139, 139, 0.45);
}
.admin-daemon-copy {
  display: grid;
  gap: 4px;
}
.admin-daemon-copy strong {
  font-size: 13px;
  color: rgba(240, 245, 255, 0.96);
}
.admin-daemon-copy span {
  font-size: 11px;
  color: rgba(178, 190, 235, 0.9);
}
.admin-daemon-toggles {
  display: grid;
  gap: 8px;
}
.admin-daemon-toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  border: 1px solid rgba(99, 123, 219, 0.24);
  border-radius: 10px;
  padding: 8px 10px;
  background: rgba(12, 18, 44, 0.58);
}
.admin-daemon-toggle-copy {
  display: grid;
  gap: 2px;
}
.admin-daemon-toggle-copy strong {
  font-size: 12px;
  color: rgba(240, 245, 255, 0.95);
}
.admin-daemon-toggle-copy span {
  font-size: 10px;
  color: rgba(182, 194, 236, 0.88);
}
.admin-monitor-date-label {
  margin-bottom: 10px;
  color: rgba(186, 197, 236, 0.9);
  font-size: 12px;
}
.admin-monitor-list {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  display: grid;
  grid-auto-rows: min-content;
  align-content: start;
  gap: 10px;
  padding-bottom: 12px;
}
.admin-monitor-item {
  border: 1px solid rgba(103, 122, 221, 0.3);
  border-radius: 14px;
  padding: 12px;
  background: rgba(13, 18, 46, 0.76);
  display: grid;
  align-content: start;
  gap: 10px;
}
.admin-monitor-item-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}
.admin-monitor-item-id {
  font-size: 10px;
  color: rgba(176, 189, 233, 0.78);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.admin-monitor-status {
  border-radius: 999px;
  padding: 3px 8px;
  font-size: 10px;
  font-weight: 700;
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(238, 242, 255, 0.94);
}
.admin-monitor-status.status-active {
  background: rgba(60, 154, 255, 0.2);
  border-color: rgba(90, 177, 255, 0.46);
}
.admin-monitor-status.status-pending_accept {
  background: rgba(255, 193, 84, 0.2);
  border-color: rgba(255, 208, 112, 0.48);
}
.admin-monitor-status.status-round_result {
  background: rgba(177, 131, 255, 0.2);
  border-color: rgba(196, 163, 255, 0.46);
}
.admin-monitor-status.status-finished {
  background: rgba(106, 235, 168, 0.18);
  border-color: rgba(126, 240, 183, 0.42);
}
.admin-monitor-versus {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: rgba(234, 240, 255, 0.95);
}
.admin-monitor-versus span:first-child {
  text-align: left;
}
.admin-monitor-versus span:last-child {
  text-align: right;
}
.admin-monitor-versus strong {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.98);
}
.admin-monitor-meta {
  font-size: 11px;
  color: rgba(171, 184, 230, 0.86);
}
.admin-monitor-item.admin-monitor-item-quiz {
  border-color: rgba(119, 167, 255, 0.44);
  background:
    radial-gradient(circle at 92% -10%, rgba(95, 161, 255, 0.18), transparent 52%),
    radial-gradient(circle at 2% 110%, rgba(97, 232, 199, 0.12), transparent 46%),
    rgba(11, 18, 44, 0.84);
}
.admin-monitor-quiz-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}
.admin-monitor-quiz-title {
  font-size: 14px;
  color: rgba(247, 250, 255, 0.98);
}
.admin-monitor-quiz-bot {
  font-size: 12px;
  font-weight: 700;
  color: rgba(205, 220, 255, 0.96);
  text-align: right;
}
.admin-monitor-quiz-result {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
}
.admin-monitor-quiz-score {
  font-size: 15px;
  color: rgba(255, 255, 255, 0.98);
}
.admin-monitor-quiz-accuracy {
  font-size: 11px;
  color: rgba(173, 224, 255, 0.95);
  font-weight: 700;
}
.admin-monitor-quiz-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}
.admin-monitor-quiz-chip {
  display: inline-flex;
  align-items: center;
  min-height: 22px;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(150, 183, 255, 0.34);
  background: rgba(34, 52, 113, 0.52);
  color: rgba(226, 235, 255, 0.95);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.02em;
}
.admin-monitor-quiz-meta-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(96px, 1fr));
  gap: 8px;
}
.admin-monitor-quiz-meta-item {
  display: grid;
  gap: 3px;
  padding: 8px 9px;
  border-radius: 10px;
  border: 1px solid rgba(127, 158, 233, 0.34);
  background: rgba(18, 29, 70, 0.62);
}
.admin-monitor-quiz-meta-item span {
  font-size: 9px;
  color: rgba(172, 190, 234, 0.86);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}
.admin-monitor-quiz-meta-item strong {
  font-size: 12px;
  color: rgba(240, 245, 255, 0.97);
}
.admin-auth-modal .admin-auth-card {
  max-width: 340px;
}
.admin-auth-input {
  margin-top: 8px;
}
.admin-auth-error {
  margin-top: 8px;
  color: #ff9b9b;
  font-size: 12px;
  font-weight: 700;
}

/* Pause Overlay */
.pause-overlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 15, 26, 0.92);
  z-index: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.pause-overlay.visible {
  opacity: 1;
  pointer-events: auto;
}
.pause-modal {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 40px 30px;
  width: 90%;
  max-width: 340px;
  animation: pop 0.3s ease;
}
.pause-icon {
  font-size: 48px;
  color: var(--primary);
  letter-spacing: -6px;
  margin-bottom: 4px;
}
.pause-title {
  font-size: 28px;
  font-weight: 800;
  margin-bottom: 12px;
}

.quiz-action-overlay {
  position: fixed;
  inset: 0;
  z-index: 2300;
  background: rgba(8, 10, 24, 0.76);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}
.quiz-action-modal {
  width: min(100%, 360px);
  border-radius: 18px;
  border: 1px solid rgba(153, 173, 246, 0.28);
  background:
    radial-gradient(circle at 12% -38%, rgba(120, 99, 255, 0.3), transparent 44%),
    linear-gradient(155deg, rgba(27, 34, 70, 0.98), rgba(15, 21, 48, 0.98));
  box-shadow: 0 18px 44px rgba(0, 0, 0, 0.45);
  padding: 16px 14px 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.quiz-action-title {
  font-size: 17px;
  font-weight: 900;
  color: #eef2ff;
}
.quiz-action-subtitle {
  font-size: 12px;
  color: #b5c4ec;
  line-height: 1.45;
}
.quiz-action-buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.quiz-action-close {
  border-color: rgba(190, 203, 255, 0.28);
}

/* (Profile hero styles are above in Home Screen section) */

/* Profile / Login Screen */
.profile-header {
  text-align: center;
  padding: 50px 0 30px;
}
.profile-header h2 {
  font-size: 24px;
  font-weight: 800;
  margin-bottom: 8px;
}
.profile-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 0 10px;
}
#screen-login {
  justify-content: center;
  align-items: center;
  padding-top: calc(14px + var(--safe-top));
  padding-bottom: calc(14px + var(--safe-bottom));
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(circle at 16% 12%, rgba(148, 102, 255, 0.3), transparent 43%),
    radial-gradient(circle at 82% 86%, rgba(44, 122, 255, 0.2), transparent 46%),
    linear-gradient(180deg, #070a1b 0%, #0c1432 52%, #0a122e 100%);
}
.login-shell {
  width: min(100%, 438px);
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}
.login-bg-orb {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  filter: blur(2px);
}
.login-bg-orb-a {
  width: 240px;
  height: 240px;
  top: -124px;
  right: -116px;
  background: radial-gradient(circle, rgba(148, 102, 255, 0.34), rgba(148, 102, 255, 0));
}
.login-bg-orb-b {
  width: 210px;
  height: 210px;
  left: -96px;
  bottom: -96px;
  background: radial-gradient(circle, rgba(36, 123, 255, 0.26), rgba(36, 123, 255, 0));
}
.login-bg-grid {
  position: absolute;
  inset: 10px;
  border-radius: 26px;
  pointer-events: none;
  opacity: 0.2;
  background-image:
    linear-gradient(rgba(146, 161, 255, 0.13) 1px, transparent 1px),
    linear-gradient(90deg, rgba(146, 161, 255, 0.13) 1px, transparent 1px);
  background-size: 20px 20px;
}
.login-card {
  width: 100%;
  position: relative;
  border-radius: 26px;
  border: 1px solid rgba(179, 196, 255, 0.22);
  background:
    linear-gradient(156deg, rgba(18, 24, 50, 0.98), rgba(11, 16, 37, 0.98)),
    radial-gradient(circle at 18% -38%, rgba(148, 102, 255, 0.28), transparent 56%);
  padding: clamp(20px, 5.1vw, 30px) clamp(16px, 4.8vw, 26px);
  box-shadow:
    0 24px 52px rgba(0, 0, 0, 0.42),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  display: flex;
  flex-direction: column;
  gap: 18px;
}
.login-brand-stack {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 10px;
}
.login-logo-wrap {
  width: 108px;
  height: 108px;
  border-radius: 26px;
  border: 1px solid rgba(171, 188, 255, 0.32);
  background: linear-gradient(155deg, rgba(139, 95, 255, 0.36), rgba(78, 121, 255, 0.18));
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 12px 24px rgba(33, 48, 111, 0.45);
}
.login-logo-symbol {
  font-size: 58px;
  font-weight: 900;
  letter-spacing: 1px;
  color: #9a6fff;
  text-shadow:
    0 0 14px rgba(154, 111, 255, 0.75),
    0 0 26px rgba(121, 86, 238, 0.42);
}
.login-title {
  margin: 2px 0 0;
  font-size: clamp(44px, 11.4vw, 62px);
  line-height: 0.94;
  font-weight: 900;
  letter-spacing: -1px;
  background: linear-gradient(145deg, #ab7cff, #8b6bff 52%, #d58dff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.login-subtitle {
  max-width: 350px;
  color: #afbee8;
  font-size: 13px;
  line-height: 1.52;
  letter-spacing: 0.1px;
}
.login-pill-row {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 8px;
}
.login-pill {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(165, 183, 255, 0.25);
  background: rgba(255, 255, 255, 0.04);
  color: #c8d4fb;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.45px;
  text-transform: uppercase;
}
.login-auth-panel {
  border-radius: 18px;
  border: 1px solid rgba(180, 196, 255, 0.22);
  background: linear-gradient(155deg, rgba(255, 255, 255, 0.055), rgba(255, 255, 255, 0.02));
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.login-auth-label {
  font-size: 11px;
  letter-spacing: 0.95px;
  text-transform: uppercase;
  font-weight: 800;
  color: #c7d1f5;
}
.login-google-btn {
  width: 100%;
  min-height: 54px;
  border-radius: 14px;
  justify-content: center !important;
  padding: 0 14px;
  gap: 10px;
  font-size: 15px;
  box-shadow: 0 10px 18px rgba(9, 11, 24, 0.28);
}
.login-google-btn:disabled {
  opacity: 0.74;
  cursor: wait;
}
.btn-google {
  background: #ffffff;
  border: 1px solid #d4dae7;
  color: #111827;
  font-weight: 700;
}
.btn-google:hover {
  background: #f6f8fd;
  border-color: #c9d2e8;
}
.btn-google:active {
  background: #edf1fa;
  transform: translateY(1px);
}
.google-mark {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #fff;
  flex-shrink: 0;
}
.google-mark svg {
  width: 20px;
  height: 20px;
}
.login-auth-note {
  font-size: 11px;
  line-height: 1.45;
  color: #a6b4e0;
}

/* Profile Setup */
.profile-setup-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 0 10px;
}
.avatar-preview {
  font-size: 64px;
  line-height: 1;
  width: 100px;
  height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: var(--bg2);
  border: 3px solid var(--primary);
  border-radius: 50%;
  box-shadow: var(--glow-primary);
  position: relative;
}
.profile-input {
  width: 100%;
  max-width: 300px;
  background: var(--bg2);
  border: 2px solid var(--bg3);
  border-radius: var(--radius);
  color: var(--text);
  font-size: 18px;
  font-weight: 600;
  padding: 14px 20px;
  text-align: center;
  outline: none;
  transition: border-color 0.2s;
}
.profile-input:focus { border-color: var(--primary); }
.profile-input::placeholder { color: var(--text2); font-weight: 400; }
.avatar-section-title {
  font-size: 14px;
  color: var(--text2);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-top: 8px;
}
.avatar-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 8px;
  width: 100%;
  max-width: 320px;
}
.avatar-option {
  width: 100%;
  aspect-ratio: 1;
  font-size: 24px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  padding: 0;
  background: var(--glass-bg);
  border: 2px solid var(--glass-border);
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.2s;
}
.avatar-option:active { transform: scale(0.9); }
.avatar-option.selected {
  border-color: var(--primary);
  background: rgba(108, 99, 255, 0.2);
  box-shadow: var(--glow-primary);
  transform: scale(1.05);
}

/* Rankings Screen */
.ranking-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}
.ranking-tab {
  flex: 1;
  padding: 10px;
  background: var(--glass-bg);
  border: 2px solid var(--glass-border);
  border-radius: 12px;
  color: var(--text2);
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  text-align: center;
  transition: all 0.2s;
}
.ranking-tab.active {
  border-color: var(--primary);
  color: var(--text);
  background: rgba(108, 99, 255, 0.15);
  box-shadow: var(--glow-primary);
}
.ranking-content { flex: 1; overflow-y: auto; }
.ranking-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.ranking-item {
  display: grid;
  grid-template-columns: 34px 42px minmax(0, 1fr) auto;
  align-items: center;
  column-gap: 9px;
  row-gap: 4px;
  background: var(--glass-bg);
  backdrop-filter: blur(6px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 12px 11px;
  transition: all 0.2s;
}
.ranking-self {
  border-color: var(--primary);
  background: rgba(108, 99, 255, 0.1);
  box-shadow: 0 0 12px rgba(108,99,255,0.15);
}
.ranking-top1 { border-color: #ffd700; box-shadow: 0 0 16px rgba(255,215,0,0.2); }
.ranking-top2 { border-color: #c0c0c0; box-shadow: 0 0 12px rgba(192,192,192,0.15); }
.ranking-top3 { border-color: #cd7f32; box-shadow: 0 0 12px rgba(205,127,50,0.15); }
.rank-pos {
  font-size: 15px;
  font-weight: 800;
  min-width: 34px;
  text-align: center;
  color: var(--text2);
}
.ranking-top1 .rank-pos { color: #ffd700; }
.ranking-top2 .rank-pos { color: #c0c0c0; }
.ranking-top3 .rank-pos { color: #cd7f32; }
.rank-avatar {
  font-size: 25.2px;
  width: 42px;
  height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg3);
  border-radius: 50%;
  flex-shrink: 0;
}
.rank-info { flex: 1; min-width: 0; }
.rank-name-row {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  min-width: 0;
}
.rank-name {
  display: block;
  width: 100%;
  max-width: 100%;
  min-width: 0;
  font-weight: 700;
  font-size: 13px;
  line-height: 1.18;
  color: #eef4ff;
  padding: 3px 8px;
  border-radius: 8px;
  border: 1px solid rgba(152, 182, 255, 0.42);
  background: #122247;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.rank-meta {
  width: fit-content;
  max-width: 100%;
  font-size: 11px;
  color: #d7e3ff;
  margin-top: 5px;
  padding: 2px 7px;
  border-radius: 999px;
  border: 1px solid rgba(126, 158, 238, 0.4);
  background: #122247;
}
.rank-xp {
  font-size: 13px;
  font-weight: 800;
  color: #eff4ff;
  white-space: nowrap;
  text-align: right;
  justify-self: end;
  padding: 4px 9px;
  border-radius: 999px;
  border: 1px solid rgba(148, 177, 255, 0.52);
  background: linear-gradient(135deg, #193465, #234a87);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
}
.ranking-empty, .ranking-loading {
  text-align: center;
  padding: 40px 20px;
  color: var(--text2);
  font-size: 14px;
}
.quiz-selector {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}
.ranking-select {
  flex: 1;
  background: var(--bg2);
  border: 1px solid var(--bg3);
  border-radius: 10px;
  color: var(--text);
  font-size: 13px;
  padding: 10px 8px;
  outline: none;
  cursor: pointer;
  min-width: 0;
}
.ranking-select:focus { border-color: var(--primary); }

/* Challenge / PVP */
#screen-pvp {
  position: relative;
}
.challenge-panel {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border: 1px solid var(--glass-border);
  border-radius: 18px;
  padding: 18px;
  box-shadow: var(--shadow-sm);
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.challenge-panel h3 {
  font-size: 18px;
  font-weight: 800;
}
.challenge-panel p {
  color: var(--text2);
  font-size: 14px;
  line-height: 1.5;
}
.play-mode-panel {
  margin-top: 4px;
  padding: 20px;
}
.play-mode-actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
.play-mode-btn {
  min-height: 160px !important;
  border-radius: 18px !important;
  display: flex !important;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.play-mode-icon {
  font-size: 34px;
  line-height: 1;
}
.play-mode-title {
  font-size: 24px;
  font-weight: 900;
  letter-spacing: 1px;
  line-height: 1;
}
.play-mode-subtitle {
  font-size: 12px;
  font-weight: 700;
  opacity: 0.9;
  letter-spacing: 0.3px;
}
.play-mode-panel .btn-modern {
  min-height: 60px;
}
.challenge-arena {
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(108, 99, 255, 0.42);
  background:
    radial-gradient(circle at 20% -10%, rgba(108,99,255,0.22), transparent 56%),
    radial-gradient(circle at 90% 0%, rgba(0,212,170,0.16), transparent 48%),
    linear-gradient(165deg, rgba(18,22,46,0.96), rgba(12,15,34,0.98));
  box-shadow: 0 16px 32px rgba(0,0,0,0.34), inset 0 1px 0 rgba(255,255,255,0.04);
}
.challenge-arena h3 {
  text-transform: uppercase;
  letter-spacing: 0.9px;
}
.challenge-diff-list {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}
.challenge-diff-auto {
  border: 1px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.04);
  border-radius: 12px;
  padding: 9px 10px;
  font-size: 13px;
  font-weight: 700;
  color: var(--text);
  text-align: center;
}
.tier-badge {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  border-radius: 999px;
  padding: 4px 9px;
  border: 1px solid rgba(255,255,255,0.2);
  background: rgba(255,255,255,0.08);
  font-size: 11px;
  font-weight: 800;
  line-height: 1;
  white-space: nowrap;
}
.tier-emblem {
  font-size: 12px;
  line-height: 1;
}
.tier-badge-compact {
  padding: 2px 7px;
  font-size: 10px;
}
.tier-badge-rank {
  padding: 2px 7px;
  font-size: 10px;
  max-width: none;
  overflow: visible;
  text-overflow: clip;
  flex-shrink: 0;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
}
.tier-badge-rank.tier-easy {
  background: #0d5e52;
  border-color: #22c9b2;
  color: #e7fff8;
}
.tier-badge-rank.tier-medium {
  background: #6f4b10;
  border-color: #f0b748;
  color: #fff0ce;
}
.tier-badge-rank.tier-hard {
  background: #6a1f2e;
  border-color: #ff7b95;
  color: #ffe2e8;
}
.tier-badge-arena {
  font-size: 13px;
  padding: 6px 12px;
}
.tier-easy {
  border-color: rgba(0, 212, 170, 0.45);
  background: rgba(0, 212, 170, 0.14);
  color: #c3fff1;
}
.tier-medium {
  border-color: rgba(255, 165, 2, 0.52);
  background: rgba(255, 165, 2, 0.16);
  color: #ffe7b7;
}
.tier-hard {
  border-color: rgba(255, 71, 87, 0.52);
  background: rgba(255, 71, 87, 0.15);
  color: #ffd6db;
}
.pvp-metrics {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}
.pvp-metric {
  position: relative;
  overflow: hidden;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.03));
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 14px;
  padding: 10px 8px;
  text-align: center;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 8px 18px rgba(0, 0, 0, 0.18);
  transition: transform 0.28s ease, border-color 0.28s ease, box-shadow 0.28s ease;
}
.pvp-metric::before {
  content: '';
  position: absolute;
  top: 0;
  left: -140%;
  width: 140%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.14), transparent);
  opacity: 0.35;
  animation: metricShimmer 5.2s ease-in-out infinite;
  pointer-events: none;
}
.pvp-metric:hover {
  transform: translateY(-2px);
  border-color: rgba(255,255,255,0.3);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.09), 0 10px 22px rgba(0, 0, 0, 0.25);
}
.pvp-metric span {
  display: block;
  color: var(--text2);
  font-size: 11px;
  margin-bottom: 4px;
}
.pvp-metric strong {
  font-size: 15px;
  color: var(--text);
}
.pvp-metric-live {
  border-color: rgba(0, 212, 170, 0.34);
  box-shadow: inset 0 1px 0 rgba(195, 255, 241, 0.08), 0 10px 24px rgba(0, 212, 170, 0.14);
}
.pvp-metric-live-value {
  display: inline-block;
  color: #c8fff1;
  text-shadow: 0 0 12px rgba(0, 212, 170, 0.28);
  animation: onlineValuePulse 1.9s ease-in-out infinite;
}
.challenge-diff-btn {
  border: 1px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text2);
  border-radius: 12px;
  font-size: 13px;
  font-weight: 700;
  padding: 11px 8px;
  cursor: pointer;
}
.challenge-diff-btn.active {
  border-color: var(--primary);
  color: var(--text);
  background: rgba(108, 99, 255, 0.14);
}
.challenge-status {
  position: relative;
  overflow: hidden;
  min-height: 24px;
  font-size: 13px;
  color: #d5d8ef;
  text-align: center;
  background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  padding: 8px 10px;
  transition: transform 0.24s ease, border-color 0.24s ease, box-shadow 0.24s ease;
}
.challenge-status::before {
  content: '';
  position: absolute;
  top: 0;
  left: -135%;
  width: 120%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.11), transparent);
  animation: statusSweep 5.8s ease-in-out infinite;
  pointer-events: none;
}
.queue-action-status {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  min-height: 20px;
  margin-top: 2px;
  font-size: 12px;
  color: #ffe7b7;
  border-color: rgba(255, 165, 2, 0.24);
  background: linear-gradient(145deg, rgba(255, 165, 2, 0.14), rgba(255, 165, 2, 0.06));
  box-shadow: 0 8px 18px rgba(255, 165, 2, 0.12);
  animation: queueStatusIn 0.28s ease;
}
.queue-action-indicator {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: #ffd27f;
  box-shadow: 0 0 0 4px rgba(255, 165, 2, 0.14);
  flex-shrink: 0;
  animation: queueStatusPulse 1.1s ease-in-out infinite;
}
.queue-action-text {
  font-weight: 700;
  letter-spacing: 0.15px;
}
.challenge-queue-btn {
  min-height: 58px !important;
  border-radius: 14px !important;
  font-size: 16px !important;
  font-weight: 900 !important;
  letter-spacing: 0.5px;
  box-shadow: 0 12px 24px rgba(108,99,255,0.32) !important;
}
.challenge-leave-btn {
  min-height: 52px !important;
  border-radius: 14px !important;
  font-weight: 800 !important;
}
.challenge-edit-emojis-btn {
  min-height: 46px !important;
  border-radius: 12px !important;
  font-size: 13px !important;
  font-weight: 800 !important;
}
.challenge-log-download-btn {
  align-self: center;
  margin-top: 6px;
  min-height: 30px !important;
  padding: 6px 12px !important;
  border-radius: 10px !important;
  font-size: 11px !important;
  font-weight: 700 !important;
  letter-spacing: 0.25px;
  opacity: 0.9;
}
.challenge-emoji-preview {
  margin-top: 8px;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 6px;
}
.challenge-emoji-chip {
  min-width: 32px;
  height: 32px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.08);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}
.challenge-emoji-preview-modal {
  margin-top: 4px;
}
.challenge-admin-btn {
  width: 56px;
  height: 56px;
  margin: 2px auto 0;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.24);
  background: linear-gradient(145deg, rgba(22, 27, 56, 0.96), rgba(16, 21, 44, 0.98));
  color: #ffe39a;
  font-size: 23px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.36), 0 0 0 2px rgba(255, 165, 2, 0.12);
}
.challenge-admin-btn:active {
  transform: scale(0.96);
}
.pvp-wait-modal {
  position: fixed;
  inset: 0;
  z-index: 2200;
  pointer-events: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.pvp-wait-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(3, 6, 18, 0.68);
  backdrop-filter: blur(1px);
}
.pvp-wait-card {
  min-height: 20px;
  pointer-events: none;
  border-radius: 14px;
  border: 1px solid rgba(255, 165, 2, 0.38);
  background: linear-gradient(145deg, rgba(23, 26, 50, 0.97), rgba(17, 20, 40, 0.97));
  box-shadow: 0 14px 32px rgba(0, 0, 0, 0.45);
  padding: 12px 16px;
  backdrop-filter: blur(8px);
  animation: pop 0.18s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text2);
  font-weight: 800;
}
.pvp-wait-dot {
  width: 9px;
  height: 9px;
  border-radius: 50%;
  background: var(--warning);
  box-shadow: 0 0 0 3px rgba(255, 165, 2, 0.2);
  animation: pulse 0.9s ease-in-out infinite;
}
.pvp-score-cards {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin: 10px 0 8px;
}
.pvp-round-indicator {
  margin: 2px 0 8px;
  border-radius: 14px;
  border: 1px solid rgba(144, 164, 255, 0.24);
  background: linear-gradient(135deg, rgba(40, 50, 96, 0.52), rgba(23, 30, 62, 0.62));
  text-transform: uppercase;
  color: var(--text2);
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: center;
  padding: 6px 10px 7px;
  box-shadow: 0 8px 20px rgba(10, 15, 35, 0.28), inset 0 1px 0 rgba(255, 255, 255, 0.06);
}
.pvp-round-main {
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 1.1px;
}
.pvp-round-phase {
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 1px;
  color: #c7d6ff;
  opacity: 0.9;
}
.pvp-round-indicator.phase-final {
  border-color: rgba(120, 180, 255, 0.52);
  background:
    radial-gradient(circle at 12% 32%, rgba(108, 99, 255, 0.28), transparent 52%),
    radial-gradient(circle at 88% 62%, rgba(71, 186, 255, 0.18), transparent 54%),
    linear-gradient(135deg, rgba(42, 45, 101, 0.8), rgba(26, 31, 74, 0.86));
  animation: pvp-phase-glow 1.5s ease-in-out infinite;
}
.pvp-round-indicator.phase-final .pvp-round-phase {
  color: #9fd7ff;
  animation: pvp-badge-breathe 1.4s ease-in-out infinite;
}
.pvp-round-indicator.phase-elimination {
  border-color: rgba(255, 119, 135, 0.52);
  background:
    radial-gradient(circle at 14% 28%, rgba(255, 93, 124, 0.24), transparent 56%),
    radial-gradient(circle at 84% 62%, rgba(255, 164, 64, 0.18), transparent 58%),
    linear-gradient(135deg, rgba(76, 28, 48, 0.86), rgba(42, 17, 33, 0.9));
  animation: pvp-phase-glow 0.95s ease-in-out infinite;
}
.pvp-round-indicator.phase-elimination .pvp-round-phase {
  color: #ffd5cf;
  animation: pvp-badge-breathe 0.9s ease-in-out infinite;
}
.pvp-round-indicator.time-warning {
  border-color: rgba(255, 185, 84, 0.5);
}
.pvp-round-indicator.time-critical {
  border-color: rgba(255, 110, 137, 0.56);
  animation: pvp-critical-pulse 0.9s ease-in-out infinite;
}
.pvp-quiz-timer {
  height: 8px;
  margin-bottom: 10px;
  border-radius: 999px;
  border: 1px solid rgba(115, 131, 214, 0.42);
  background: linear-gradient(135deg, rgba(28, 36, 72, 0.92), rgba(18, 25, 50, 0.96));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 6px 14px rgba(0, 0, 0, 0.25);
  transition: box-shadow 0.22s ease, border-color 0.22s ease, transform 0.16s ease;
}
.pvp-quiz-timer .timer-bar {
  border-radius: 999px;
  background: linear-gradient(90deg, #00d4aa, #6c63ff);
  box-shadow: 0 0 12px rgba(98, 167, 255, 0.35);
}
.pvp-quiz-timer.time-warning {
  border-color: rgba(255, 178, 62, 0.7);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.08), 0 8px 18px rgba(255, 178, 62, 0.22);
}
.pvp-quiz-timer .timer-bar.warning {
  background: linear-gradient(90deg, #ffb342, #ffcf66);
  box-shadow: 0 0 12px rgba(255, 165, 2, 0.35);
}
.pvp-quiz-timer.time-critical {
  border-color: rgba(255, 96, 128, 0.78);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.08), 0 8px 20px rgba(255, 95, 119, 0.35);
  animation: pvp-critical-pulse 0.72s ease-in-out infinite;
}
.pvp-quiz-timer .timer-bar.danger {
  background: linear-gradient(90deg, #ff5f77, #ff3659);
  box-shadow: 0 0 12px rgba(255, 71, 87, 0.44);
}
.pvp-quiz-timer.time-critical .timer-bar {
  animation: pvp-critical-shake 0.34s ease-in-out infinite;
}
.pvp-score-card {
  background: linear-gradient(140deg, rgba(20, 29, 64, 0.88), rgba(14, 21, 48, 0.9));
  border: 1px solid rgba(150, 174, 255, 0.3);
  border-radius: 12px;
  padding: 10px 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
  overflow: hidden;
  position: relative;
}
.pvp-score-card strong {
  color: #f0f5ff;
  font-size: 19px;
  padding: 0 2px;
  border: none;
  background: transparent;
  border-radius: 0;
  box-shadow: none;
  text-shadow: 0 0 8px rgba(129, 169, 255, 0.42);
}
.pvp-score-card-left {
  border-color: rgba(108, 99, 255, 0.35);
}
.pvp-score-card-right {
  border-color: rgba(0, 212, 170, 0.35);
}
.pvp-player-identity {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}
.pvp-player-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg3);
  font-size: 20px;
  flex-shrink: 0;
}
.pvp-player-name {
  font-size: 12px;
  font-weight: 800;
  color: #eef4ff;
  padding: 2px 8px;
  border-radius: 8px;
  border: 1px solid rgba(152, 182, 255, 0.42);
  background: #122247;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.pvp-header {
  padding-bottom: 8px;
}
.pvp-header .quiz-info {
  justify-content: center;
  background: transparent;
  border: none;
  padding: 0;
  backdrop-filter: none;
  width: 100%;
}
.pvp-exit-btn {
  width: auto;
  min-width: 178px;
  border-radius: 999px;
  border: 1px solid rgba(255, 113, 129, 0.46);
  background: linear-gradient(135deg, #ff5b77, #ff3659);
  color: #fff;
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.3px;
  box-shadow: 0 10px 20px rgba(255, 71, 87, 0.28);
  padding: 10px 16px;
  margin: 0 auto;
}
.pvp-exit-btn:active {
  transform: scale(0.96);
  box-shadow: 0 6px 12px rgba(255, 71, 87, 0.22);
}
.pvp-emoji-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 3200;
  overflow: hidden;
}
.pvp-emoji-fx {
  position: absolute;
  top: 58%;
  font-size: 48px;
  line-height: 1;
  animation: pvp-emoji-float 1.2s ease forwards;
  filter: drop-shadow(0 8px 14px rgba(0, 0, 0, 0.35));
}
.pvp-emoji-fx.left { left: 8%; }
.pvp-emoji-fx.right { right: 8%; }
.pvp-emoji-bar {
  margin-top: 8px;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 8px;
  position: sticky;
  bottom: calc(6px + var(--safe-bottom));
  z-index: 2310;
  padding: 6px 0;
}
.pvp-round-emoji-actions {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 8px;
}
.pvp-emoji-btn {
  width: 38px;
  height: 38px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.24);
  background: rgba(255, 255, 255, 0.09);
  color: var(--text);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 21px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  isolation: isolate;
  transition: all 0.18s ease;
}
.pvp-emoji-glyph {
  position: relative;
  z-index: 3;
  line-height: 1;
}
.pvp-emoji-cooldown-fill {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1;
  background: linear-gradient(180deg, rgba(31, 36, 66, 0.35), rgba(11, 14, 28, 0.92));
  transition: height 0.09s linear;
  pointer-events: none;
}
.pvp-emoji-cooldown-label {
  position: absolute;
  inset: 0;
  z-index: 4;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 900;
  letter-spacing: 0.2px;
  color: #e7ecff;
  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.5);
  background: rgba(8, 10, 20, 0.36);
  pointer-events: none;
}
.pvp-emoji-btn.is-cooldown {
  cursor: not-allowed;
  border-color: rgba(163, 180, 255, 0.42);
  background: rgba(38, 45, 79, 0.46);
}
.pvp-emoji-btn.is-cooldown:active {
  transform: none;
  background: rgba(38, 45, 79, 0.46);
}
.pvp-emoji-btn:disabled {
  opacity: 1;
}
.pvp-emoji-btn:active {
  transform: scale(0.9);
  background: rgba(108, 99, 255, 0.25);
}
@keyframes pvp-emoji-float {
  0% { opacity: 0; transform: translateY(24px) scale(0.82) rotate(-6deg); }
  15% { opacity: 1; }
  85% { opacity: 1; }
  100% { opacity: 0; transform: translateY(-72px) scale(1.12) rotate(6deg); }
}

.match-accept-card {
  width: min(96vw, 760px);
  max-width: 760px;
  padding: 18px 16px 16px;
}
.match-accept-players {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr);
  gap: 10px;
  margin-top: 8px;
  align-items: center;
}
.match-accept-player {
  width: 100%;
  min-width: 0;
}
.match-accept-player-card {
  width: 100%;
  min-height: 148px;
  padding: 14px 10px 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  border-radius: 18px;
  overflow: hidden;
  overflow: clip;
}
.match-accept-player-card .pvp-player-identity {
  width: 100%;
  min-width: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.match-accept-identity {
  gap: 8px;
  width: 100%;
  min-width: 0;
}
.match-accept-avatar {
  width: 42px;
  height: 42px;
  font-size: 22px;
  margin: 0 auto;
}
.match-accept-name-block {
  display: flex;
  flex-direction: column;
  min-width: 0;
  width: 100%;
  max-width: 100%;
  gap: 4px;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding-right: 0;
}
.match-accept-name-block .pvp-player-name {
  display: block;
  font-size: 14px;
  font-weight: 800;
  color: #f1f5ff;
  text-align: center;
  width: fit-content;
  max-width: 100%;
  padding: 3px 9px;
  border-radius: 8px;
  border: 1px solid rgba(156, 184, 255, 0.42);
  background: #122247;
  white-space: normal;
  overflow-wrap: anywhere;
  overflow: hidden;
  text-overflow: clip;
  line-height: 1.18;
  word-break: normal;
}
.match-accept-meta {
  font-size: 12px;
  font-weight: 600;
  color: #dbe5ff;
  text-align: center;
  width: fit-content;
  max-width: 100%;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid rgba(126, 158, 238, 0.4);
  background: #122247;
  white-space: normal;
  overflow-wrap: anywhere;
  overflow: hidden;
  text-overflow: clip;
  line-height: 1.18;
  word-break: normal;
}
.match-accept-dot {
  position: absolute !important;
  top: 10px;
  right: 10px;
  inset: auto !important;
  left: auto;
  bottom: auto;
  transform: none;
  width: 11px;
  height: 11px;
  border-radius: 50%;
  background: #9ea3b5;
  border: 2px solid rgba(16, 18, 38, 0.85);
  box-shadow: 0 0 0 1px rgba(158, 163, 181, 0.18);
  margin: 0;
  z-index: 4;
  pointer-events: none;
}
.match-accept-player-card > .match-accept-dot {
  top: 10px !important;
  right: 10px !important;
  inset: auto !important;
  left: auto !important;
  bottom: auto !important;
  transform: none !important;
}
.match-accept-player .match-accept-state {
  position: absolute;
  left: 50%;
  right: auto;
  transform: translateX(-50%);
  bottom: 10px;
  margin: 0;
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 800;
  line-height: 1;
  max-width: calc(100% - 18px);
  border-radius: 999px;
  border: 1px solid rgba(141, 170, 248, 0.44);
  background: #132449;
  text-align: center;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.match-accept-player-card > .match-accept-state {
  left: 50% !important;
  right: auto !important;
  transform: translateX(-50%) !important;
}
.match-accept-player .match-accept-state:empty { display: none; }
.match-accept-vs {
  width: 52px;
  height: 52px;
  border-radius: 999px;
  border: 1px solid rgba(255, 165, 2, 0.38);
  background: radial-gradient(circle at 30% 30%, rgba(255, 209, 102, 0.22), rgba(255, 165, 2, 0.08));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 31px;
  box-shadow: 0 10px 18px rgba(0, 0, 0, 0.32), 0 0 18px rgba(255, 165, 2, 0.28);
  animation: glow-pulse 1.8s ease-in-out infinite;
}
.match-accept-vs.ready {
  border-color: rgba(0, 212, 170, 0.62);
  background: radial-gradient(circle at 30% 30%, rgba(0, 212, 170, 0.26), rgba(108, 99, 255, 0.22));
  box-shadow: 0 0 16px rgba(0, 212, 170, 0.45), 0 0 24px rgba(108, 99, 255, 0.35);
}
.match-accept-player.pending .match-accept-state { color: var(--text2); }
.match-accept-player.accepted {
  transform: translateZ(0);
}
.match-accept-player.accepted .match-accept-player-card {
  border-color: rgba(0, 212, 170, 0.45);
  box-shadow: 0 0 0 1px rgba(0, 212, 170, 0.26), 0 0 14px rgba(0, 212, 170, 0.18);
}
.match-accept-player.accepted .match-accept-dot {
  background: var(--success);
  box-shadow: 0 0 0 1px rgba(0, 212, 170, 0.28), 0 0 8px rgba(0, 212, 170, 0.34);
}
.match-accept-player.accepted .match-accept-state { color: var(--success); }
.match-accept-player.rejected {
  transform: translateZ(0);
}
.match-accept-player.rejected .match-accept-player-card {
  border-color: rgba(255, 71, 87, 0.52);
  box-shadow: 0 0 0 1px rgba(255, 71, 87, 0.24), 0 0 14px rgba(255, 71, 87, 0.18);
}
.match-accept-player.rejected .match-accept-dot {
  background: var(--error);
  box-shadow: 0 0 0 1px rgba(255, 71, 87, 0.28), 0 0 8px rgba(255, 71, 87, 0.34);
}
.match-accept-player.rejected .match-accept-state { color: var(--error); }
.match-accept-countdown {
  margin-top: 12px;
  font-size: 13px;
  font-weight: 700;
  color: var(--text2);
  min-height: 20px;
}
.match-accept-actions {
  margin-top: 10px;
  display: flex;
  gap: 10px;
  justify-content: center;
}
.result-action-btn {
  width: 100%;
  min-height: 46px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 800;
  letter-spacing: 0.2px;
}
.result-action-btn-primary {
  box-shadow: 0 12px 22px rgba(108, 99, 255, 0.34);
}
.result-action-btn-secondary {
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.04);
}
.settings-screen .audio-settings {
  gap: 10px;
}
.settings-bot-config .settings-bot-form {
  margin-top: 8px;
}
.settings-bot-emoji-pool {
  margin-top: 2px;
  margin-bottom: 4px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}
.settings-screen .settings-personal-data,
.settings-screen .audio-option {
  border-radius: 14px;
  padding: 11px;
}
.settings-screen .settings-personal-data {
  margin-top: 8px;
}
.settings-screen .settings-personal-title {
  font-size: 14px;
}
.settings-screen .settings-personal-subtitle {
  font-size: 11px;
  margin-top: 2px;
}
.settings-screen .settings-personal-form {
  margin-top: 7px;
  gap: 6px;
}
.settings-screen .settings-input-label {
  font-size: 11px;
}
.settings-screen .settings-input {
  padding: 9px 10px;
  font-size: 13px;
}
.settings-screen .settings-personal-hint {
  min-height: 14px;
  font-size: 10px;
}
.settings-screen .audio-option-header {
  gap: 9px;
}
.settings-screen .audio-option-icon {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  font-size: 20px;
}
.settings-screen .audio-option-title {
  font-size: 13px;
}
.settings-screen .audio-option-desc {
  font-size: 10px;
}
.settings-screen .audio-slider-row {
  gap: 8px;
}
.settings-screen .vol-label {
  font-size: 12px;
  min-width: 34px;
}
.settings-screen .settings-sfx-test {
  min-height: 38px;
  font-size: 12px;
}
.pvp-round-card {
  width: min(92vw, 620px);
  min-height: clamp(260px, 40vh, 350px);
  border-radius: 22px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background:
    radial-gradient(circle at 18% 8%, rgba(108, 99, 255, 0.28), transparent 40%),
    radial-gradient(circle at 86% 92%, rgba(0, 212, 170, 0.2), transparent 42%),
    linear-gradient(160deg, rgba(18, 22, 44, 0.95), rgba(10, 14, 32, 0.96));
  box-shadow: 0 22px 44px rgba(0, 0, 0, 0.48);
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: 10px;
  text-align: center;
  position: relative;
  z-index: 1;
  padding: 14px 12px 10px;
}
.pvp-round-card.phase-final {
  border-color: rgba(117, 172, 255, 0.42);
  box-shadow: 0 22px 44px rgba(0, 0, 0, 0.48), 0 0 26px rgba(86, 148, 255, 0.2);
}
.pvp-round-card.phase-elimination {
  border-color: rgba(255, 124, 143, 0.46);
  box-shadow: 0 22px 46px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 86, 115, 0.25);
  animation: pvp-critical-pulse 0.86s ease-in-out infinite;
}
.pvp-round-card.phase-elimination .pvp-round-kicker {
  color: #ffd6dc;
}
.pvp-round-kicker {
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 1.4px;
  color: #b9c4f3;
  text-transform: uppercase;
}
.pvp-round-title {
  font-size: clamp(22px, 4.8vw, 34px);
  line-height: 1.14;
  font-weight: 900;
  color: #f1f4ff;
  max-width: 94%;
}
.pvp-round-scoreline {
  width: min(96%, 520px);
  border-radius: 16px;
  border: 1px solid rgba(160, 176, 255, 0.26);
  background: rgba(255, 255, 255, 0.05);
  padding: 12px 14px;
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr);
  align-items: center;
  gap: 10px;
}
.pvp-round-score-item {
  display: grid;
  gap: 4px;
}
.pvp-round-score-item span {
  font-size: 12px;
  color: #c5cff4;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.pvp-round-score-item strong {
  font-size: clamp(24px, 5.5vw, 36px);
  color: #f3f5ff;
  line-height: 1;
}
.pvp-round-score-divider {
  font-size: 28px;
  color: rgba(229, 234, 255, 0.8);
  font-weight: 800;
}
.pvp-round-countdown {
  font-size: clamp(16px, 3.5vw, 22px);
  color: #dce3ff;
  font-weight: 800;
}
.pvp-round-countdown.is-urgent {
  color: #ffd7df;
  text-shadow: 0 0 16px rgba(255, 113, 133, 0.36);
  animation: pvp-badge-breathe 0.45s ease-in-out infinite;
}
.pvp-round-answer-feedback {
  width: min(96%, 520px);
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}
.pvp-round-answer-chip {
  border-radius: 12px;
  border: 1px solid rgba(189, 199, 255, 0.24);
  background: rgba(255, 255, 255, 0.05);
  padding: 8px 10px;
  display: grid;
  gap: 3px;
  text-align: left;
}
.pvp-round-answer-chip.success {
  border-color: rgba(0, 212, 170, 0.55);
  background: rgba(0, 212, 170, 0.14);
}
.pvp-round-answer-chip.error {
  border-color: rgba(255, 107, 129, 0.55);
  background: rgba(255, 107, 129, 0.14);
}
.pvp-round-answer-name {
  color: #d7e0ff;
  font-size: 11px;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.pvp-round-answer-state {
  font-size: 13px;
  line-height: 1.1;
  font-weight: 900;
  color: #f5f7ff;
}
.pvp-round-emoji-actions-modal {
  width: min(94%, 460px);
  margin-top: 2px;
  padding-top: 2px;
  padding-bottom: 2px;
}
@media (max-width: 560px) {
  .pvp-round-answer-feedback {
    grid-template-columns: minmax(0, 1fr);
  }
}
.pvp-round-hint {
  font-size: 12px;
  color: #aebae9;
  max-width: 90%;
}
.pvp-leave-card {
  max-width: 420px;
}
.pvp-round-lines {
  margin-top: 8px;
  display: grid;
  gap: 8px;
}
.pvp-round-line {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid var(--glass-border);
  border-radius: 10px;
  padding: 8px 10px;
}
.pvp-round-line strong {
  color: var(--primary);
  font-size: 14px;
}
.pvp-round-score {
  margin-top: 12px;
  font-size: 24px;
  font-weight: 800;
  color: var(--text);
}
.pvp-result-panel {
  width: 100%;
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  padding: 14px 10px 8px;
  background: linear-gradient(145deg, rgba(21, 24, 48, 0.96), rgba(13, 15, 34, 0.96));
  box-shadow: 0 16px 30px rgba(0, 0, 0, 0.42);
  animation: pvp-outcome-pulse 0.36s ease;
  position: relative;
  overflow: hidden;
}
.pvp-result-panel-dynamic .pvp-result-seq {
  opacity: 0;
  animation: pvp-result-seq-in 0.56s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}
.pvp-result-panel-dynamic .result-seq-1 { animation-delay: 0.05s; }
.pvp-result-panel-dynamic .result-seq-2 { animation-delay: 0.16s; }
.pvp-result-panel-dynamic .result-seq-3 { animation-delay: 0.24s; }
.pvp-result-panel-dynamic .result-seq-4 { animation-delay: 0.33s; }
.pvp-result-panel-dynamic .result-seq-5 { animation-delay: 0.42s; }
.pvp-result-panel-dynamic .result-seq-6 { animation-delay: 0.5s; }
.pvp-result-panel-dynamic .result-seq-7 { animation-delay: 0.62s; }
.pvp-result-panel-dynamic .result-seq-8 { animation-delay: 0.74s; }
.pvp-result-panel-dynamic .result-seq-9 { animation-delay: 0.86s; }
.pvp-result-panel-dynamic .result-emoji {
  animation-name: pvp-result-emoji-pop;
  animation-duration: 0.7s;
  animation-timing-function: cubic-bezier(0.17, 0.89, 0.32, 1.25);
}
.pvp-result-panel::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(120deg, transparent 20%, rgba(255,255,255,0.22) 52%, transparent 82%);
  animation: cosmetic-shimmer 3.2s linear infinite;
  opacity: 0.18;
}
.pvp-result-panel > * {
  position: relative;
  z-index: 1;
}
.pvp-result-panel.outcome-win {
  border-color: rgba(0, 212, 170, 0.45);
  box-shadow: 0 16px 34px rgba(0, 0, 0, 0.48), 0 0 24px rgba(0, 212, 170, 0.26);
}
.pvp-result-panel.outcome-lose {
  border-color: rgba(255, 71, 87, 0.45);
  box-shadow: 0 16px 34px rgba(0, 0, 0, 0.48), 0 0 24px rgba(255, 71, 87, 0.22);
}
.pvp-result-panel.outcome-draw {
  border-color: rgba(255, 165, 2, 0.45);
  box-shadow: 0 16px 34px rgba(0, 0, 0, 0.48), 0 0 24px rgba(255, 165, 2, 0.24);
}
.pvp-result-actions {
  width: 100%;
  margin-top: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.pvp-result-reward-list {
  margin-top: 10px;
}
.pvp-result-reward-btn {
  margin-top: 6px;
}
.pvp-result-collect-note {
  margin-top: 8px;
  font-size: 12px;
  color: rgba(206, 217, 255, 0.9);
}
.pvp-result-transition-overlay {
  position: fixed;
  inset: 0;
  z-index: 2400;
  display: grid;
  place-items: center;
  animation: pvp-result-transition-fade 0.26s ease both;
}
.pvp-result-transition-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(8, 11, 24, 0.74);
  backdrop-filter: blur(5px);
}
.pvp-result-transition-card {
  position: relative;
  z-index: 1;
  width: min(90vw, 440px);
  border-radius: 18px;
  border: 1px solid rgba(145, 169, 255, 0.28);
  background: linear-gradient(160deg, rgba(17, 24, 48, 0.95), rgba(10, 15, 33, 0.96));
  box-shadow: 0 24px 40px rgba(0, 0, 0, 0.5);
  padding: 18px 16px;
  text-align: center;
  display: grid;
  gap: 10px;
  justify-items: center;
  animation: pvp-result-transition-rise 0.34s cubic-bezier(0.19, 1, 0.22, 1) both;
}
.pvp-result-transition-spinner {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  border: 3px solid rgba(160, 184, 255, 0.24);
  border-top-color: #88b7ff;
  animation: pvp-result-transition-spin 0.9s linear infinite;
}
.pvp-result-transition-title {
  font-size: 18px;
  font-weight: 900;
  color: #eef3ff;
}
.pvp-result-transition-subtitle {
  font-size: 13px;
  color: #c8d3fb;
  font-weight: 700;
}
.pvp-emoji-editor-card {
  max-width: 460px;
}
.pvp-emoji-editor-hint {
  margin-top: 6px;
  font-size: 13px;
  color: var(--text2);
}
.pvp-emoji-editor-warning {
  margin-top: 6px;
  margin-bottom: 2px;
  font-size: 12px;
  font-weight: 700;
  color: #ffd1d1;
}
.pvp-emoji-slots-wrap {
  margin-top: 12px;
  padding: 10px 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(131, 157, 248, 0.38);
  background: linear-gradient(160deg, rgba(20, 34, 80, 0.82), rgba(13, 22, 52, 0.86));
}
.pvp-emoji-section-title {
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  color: #c9d9ff;
  margin-bottom: 8px;
}
.pvp-emoji-section-title.pvp-emoji-section-title-options {
  margin-top: 0;
  margin-bottom: 8px;
}
.pvp-emoji-divider {
  margin: 12px 0 10px;
  height: 1px;
  background: linear-gradient(90deg, rgba(125, 151, 235, 0), rgba(125, 151, 235, 0.75), rgba(125, 151, 235, 0));
}
.pvp-emoji-slots {
  display: grid;
  grid-template-columns: repeat(6, minmax(0, 1fr));
  gap: 10px;
}
.pvp-emoji-slot {
  position: relative;
  min-height: 68px;
  border-radius: 12px;
  border: 1px solid rgba(143, 175, 255, 0.4);
  background: linear-gradient(160deg, rgba(18, 31, 74, 0.88), rgba(9, 17, 45, 0.92));
  color: #edf3ff;
  display: grid;
  place-items: center;
  gap: 5px;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(190, 210, 255, 0.12);
  transition: all 0.18s ease;
}
.pvp-emoji-slot.active {
  border-color: rgba(88, 233, 204, 0.85);
  background: linear-gradient(160deg, rgba(18, 66, 88, 0.9), rgba(11, 31, 57, 0.95));
  box-shadow: 0 0 0 2px rgba(88, 233, 204, 0.22), 0 0 16px rgba(88, 233, 204, 0.18);
}
.pvp-emoji-slot-index {
  font-size: 10px;
  font-weight: 800;
  color: rgba(212, 225, 255, 0.9);
}
.pvp-emoji-slot-value {
  font-size: 27px;
  line-height: 1;
  font-weight: 700;
}
.pvp-emoji-slot-remove {
  position: absolute;
  top: 4px;
  right: 6px;
  font-size: 14px;
  font-weight: 800;
  color: rgba(255, 212, 212, 0.94);
}
.pvp-emoji-groups {
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.pvp-emoji-group-btn {
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.08);
  color: var(--text);
  padding: 5px 11px;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.16s ease;
}
.pvp-emoji-group-btn.active {
  border-color: rgba(0, 212, 170, 0.6);
  background: rgba(0, 212, 170, 0.18);
}
.pvp-emoji-editor-list {
  margin-top: 0;
  display: grid;
  grid-template-columns: repeat(8, minmax(0, 1fr));
  gap: 8px;
  max-height: min(42vh, 260px);
  overflow-y: auto;
  padding-right: 4px;
  align-content: start;
}
.pvp-emoji-picker-actions {
  margin-top: 12px;
  flex-wrap: wrap;
}
.pvp-emoji-option {
  width: 100%;
  height: 48px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
  font-size: 24px;
  cursor: pointer;
  transition: all 0.16s ease;
}
.pvp-emoji-option.active {
  border-color: rgba(0, 212, 170, 0.7);
  background: rgba(0, 212, 170, 0.16);
  box-shadow: 0 0 0 2px rgba(0, 212, 170, 0.24);
}
.pvp-emoji-option:active {
  transform: scale(0.95);
}

.arena-admin-card {
  width: min(1020px, calc(100vw - 24px));
  max-height: min(92dvh, 940px);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: clamp(12px, 1.8vw, 20px);
  text-align: left;
  border: 1px solid rgba(122, 140, 236, 0.32);
  background:
    radial-gradient(120% 120% at 20% 0%, rgba(62, 84, 182, 0.22), rgba(62, 84, 182, 0) 42%),
    linear-gradient(164deg, rgba(10, 14, 44, 0.98), rgba(7, 11, 34, 0.99));
  box-shadow: 0 20px 48px rgba(0, 0, 0, 0.46), inset 0 1px 0 rgba(255, 255, 255, 0.08);
}
.arena-admin-card h3 {
  margin-bottom: 2px;
}
.arena-admin-subtitle {
  color: var(--text2);
  font-size: 13px;
  line-height: 1.35;
  margin-top: -1px;
  margin-bottom: 1px;
}
.arena-admin-auth-box {
  display: grid;
  gap: 10px;
}
.arena-admin-auth-label {
  font-size: 11px;
  color: var(--text2);
  font-weight: 600;
}
.arena-admin-password {
  width: 100%;
}
.arena-admin-auth-msg {
  min-height: 18px;
  font-size: 12px;
  font-weight: 700;
  color: var(--warning);
}
.arena-admin-panel {
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
  flex: 1;
  overflow: hidden;
}
.arena-admin-stats {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 10px;
}
.arena-admin-stat {
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: linear-gradient(140deg, rgba(25, 30, 62, 0.88), rgba(14, 18, 41, 0.9));
  padding: 10px 11px;
  text-align: center;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
}
.arena-admin-stat span {
  display: block;
  font-size: 10px;
  color: rgba(191, 198, 233, 0.92);
  margin-bottom: 2px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}
.arena-admin-stat strong {
  font-size: 19px;
  color: var(--text);
}
.arena-admin-toolbar {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
  padding: 0 2px;
}
.arena-admin-toolbar-title {
  font-size: 12px;
  font-weight: 800;
  color: rgba(191, 198, 233, 0.92);
  letter-spacing: 0.3px;
  text-transform: uppercase;
}
.arena-admin-updated-at {
  font-size: 12px;
  color: rgba(186, 196, 236, 0.94);
  text-align: right;
  white-space: nowrap;
  font-weight: 700;
}
.arena-admin-sections {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px;
  min-height: 0;
  flex: 1;
  overflow: hidden;
}
.arena-admin-section {
  min-height: 0;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  gap: 10px;
  border-radius: 18px;
  border: 1px solid rgba(120, 139, 230, 0.3);
  background: linear-gradient(146deg, rgba(13, 19, 55, 0.95), rgba(8, 14, 42, 0.96));
  padding: 10px;
  overflow: hidden;
}
.arena-admin-section * {
  min-width: 0;
}
.arena-admin-section-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}
.arena-admin-section-head h4 {
  margin: 0;
  font-size: 15px;
  font-weight: 800;
  color: var(--text);
}
.arena-admin-section-hint {
  font-size: 11px;
  font-weight: 700;
  color: #8ff7dd;
  border: 1px solid rgba(0, 212, 170, 0.4);
  background: rgba(0, 212, 170, 0.14);
  border-radius: 999px;
  padding: 4px 10px;
  text-transform: uppercase;
  letter-spacing: 0.4px;
}
.arena-admin-list {
  max-height: none;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  align-content: flex-start;
  gap: 8px;
  padding: 8px;
  padding-right: 6px;
  border-radius: 16px;
  border: 1px solid rgba(120, 139, 230, 0.28);
  background: linear-gradient(160deg, rgba(9, 15, 42, 0.88), rgba(8, 14, 36, 0.82));
  scrollbar-gutter: stable;
}
.arena-admin-history-list {
  max-height: none;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  align-content: flex-start;
  gap: 8px;
  padding: 8px;
  padding-right: 6px;
  border-radius: 16px;
  border: 1px solid rgba(120, 139, 230, 0.28);
  background: linear-gradient(160deg, rgba(9, 15, 42, 0.82), rgba(8, 14, 36, 0.76));
  scrollbar-gutter: stable;
}
.arena-admin-history-item {
  display: flex;
  flex-direction: column;
  gap: 8px;
  border-radius: 18px;
  border: 1px solid rgba(120, 142, 236, 0.34);
  background: linear-gradient(148deg, rgba(20, 29, 74, 0.95), rgba(12, 20, 54, 0.96));
  padding: 9px 10px;
  width: 100%;
  min-width: 0;
  flex: 0 0 auto;
  box-shadow: 0 8px 16px rgba(3, 7, 25, 0.28), inset 0 1px 0 rgba(255, 255, 255, 0.08);
}
.arena-admin-history-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
  flex-wrap: wrap;
  min-width: 0;
}
.arena-admin-history-id-wrap {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  flex: 1 1 200px;
  gap: 8px;
  min-width: 0;
  max-width: 100%;
}
.arena-admin-history-id {
  font-size: 12px;
  color: rgba(178, 189, 234, 0.96);
  font-weight: 800;
  line-height: 1.15;
  min-width: 0;
  max-width: 100%;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.arena-admin-history-time {
  font-size: 12px;
  color: #786fff;
  font-weight: 800;
  margin-left: auto;
  max-width: 100%;
  text-align: right;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.arena-admin-history-versus {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.arena-admin-history-player {
  min-width: 0;
  display: grid;
  justify-items: center;
  text-align: center;
  gap: 5px;
}
.arena-admin-history-player-right {
  justify-items: center;
  text-align: center;
}
.arena-admin-history-avatar {
  font-size: 30px;
  line-height: 1;
}
.arena-admin-history-name {
  font-size: 13px;
  font-weight: 800;
  color: var(--text);
  min-width: 0;
  max-width: 100%;
  text-align: center;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.arena-admin-history-score {
  text-align: center;
  font-size: clamp(16px, 1.7vw, 22px);
  font-weight: 900;
  color: #9df5dc;
  white-space: nowrap;
  min-width: 72px;
  border: 1px solid rgba(123, 164, 230, 0.46);
  border-radius: 999px;
  background: linear-gradient(146deg, rgba(47, 70, 128, 0.4), rgba(25, 43, 92, 0.36));
  padding: 4px 10px;
  box-shadow: inset 0 1px 0 rgba(198, 221, 255, 0.12), 0 4px 10px rgba(5, 13, 35, 0.3);
}
.arena-admin-history-result {
  font-size: 11px;
  color: rgba(179, 187, 225, 0.94);
  text-align: center;
  border-top: 1px dashed rgba(255, 255, 255, 0.16);
  padding-top: 6px;
}
.arena-admin-history-item-quiz {
  border-color: rgba(255, 214, 122, 0.35);
  background: linear-gradient(148deg, rgba(53, 38, 18, 0.92), rgba(35, 25, 11, 0.92));
}
.arena-admin-history-versus-quiz .arena-admin-history-score {
  color: #ffe3a9;
  border-color: rgba(255, 214, 122, 0.35);
  background: rgba(255, 214, 122, 0.12);
}
.arena-admin-empty {
  border: 1px dashed rgba(255, 255, 255, 0.18);
  border-radius: 12px;
  padding: 18px 12px;
  text-align: center;
  color: var(--text2);
  font-size: 13px;
}
.arena-admin-item {
  display: flex;
  flex-direction: column;
  gap: 8px;
  border: 1px solid rgba(120, 142, 236, 0.36);
  border-radius: 18px;
  padding: 9px 10px 10px;
  width: 100%;
  min-width: 0;
  flex: 0 0 auto;
  background: linear-gradient(148deg, rgba(22, 30, 78, 0.96), rgba(13, 20, 56, 0.97));
  box-shadow: 0 8px 16px rgba(3, 7, 25, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.09);
}
.arena-admin-item-quiz {
  border-color: rgba(255, 214, 122, 0.32);
  background: linear-gradient(148deg, rgba(52, 36, 17, 0.93), rgba(33, 23, 11, 0.93));
}
.arena-admin-item-top {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  margin-bottom: 0;
  min-width: 0;
}
.arena-admin-item-id-wrap {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  flex: 1 1 200px;
  gap: 8px;
  min-width: 0;
  max-width: 100%;
}
.arena-admin-item-id {
  font-size: 12px;
  color: rgba(182, 193, 238, 0.97);
  font-weight: 800;
  line-height: 1.15;
  min-width: 0;
  max-width: 100%;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.arena-admin-item-meta {
  font-size: 12px;
  color: #786fff;
  font-weight: 800;
  text-align: right;
  margin-left: auto;
  max-width: 100%;
  white-space: normal;
  line-height: 1.15;
  overflow-wrap: anywhere;
  word-break: break-word;
  letter-spacing: 0.2px;
}
.arena-admin-versus {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.arena-admin-versus-quiz .arena-admin-score {
  color: #ffe3a9;
  border-color: rgba(255, 214, 122, 0.35);
  background: rgba(255, 214, 122, 0.12);
}
.arena-admin-player {
  min-width: 0;
  display: grid;
  justify-items: center;
  text-align: center;
  gap: 5px;
}
.arena-admin-player-right {
  justify-items: center;
  text-align: center;
}
.arena-admin-avatar {
  font-size: 30px;
  line-height: 1;
}
.arena-admin-name {
  font-size: 13px;
  font-weight: 800;
  color: var(--text);
  line-height: 1.08;
  min-width: 0;
  max-width: 100%;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
  text-align: center;
}
.arena-admin-botcat {
  display: inline-flex;
  width: fit-content;
  max-width: 100%;
  font-size: 10px;
  font-weight: 700;
  color: #89ffd5;
  border: 1px solid rgba(0, 212, 170, 0.35);
  border-radius: 999px;
  padding: 3px 8px;
  background: rgba(0, 212, 170, 0.12);
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
  line-height: 1;
}
.arena-admin-score {
  font-size: clamp(16px, 1.7vw, 22px);
  font-weight: 900;
  color: #9df5dc;
  min-width: 72px;
  text-align: center;
  border: 1px solid rgba(123, 164, 230, 0.52);
  border-radius: 999px;
  background: linear-gradient(146deg, rgba(47, 70, 128, 0.44), rgba(25, 43, 92, 0.4));
  padding: 4px 10px;
  box-shadow: inset 0 1px 0 rgba(198, 221, 255, 0.14), 0 5px 12px rgba(5, 13, 35, 0.38);
}
.arena-admin-source-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  border: 1px solid rgba(160, 177, 255, 0.34);
  background: rgba(160, 177, 255, 0.12);
  color: #d4ddff;
  font-size: 8px;
  font-weight: 800;
  letter-spacing: 0.26px;
  text-transform: uppercase;
  line-height: 1;
  padding: 3px 7px;
  max-width: 100%;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.arena-admin-source-badge.source-hidden_bot {
  border-color: rgba(0, 212, 170, 0.36);
  background: rgba(0, 212, 170, 0.13);
  color: #95ffd9;
}
.arena-admin-source-badge.source-hidden_quiz {
  border-color: rgba(255, 214, 122, 0.38);
  background: rgba(255, 214, 122, 0.16);
  color: #ffe1a3;
}
.arena-admin-source-badge.source-rest,
.arena-admin-source-badge.source-realtime {
  border-color: rgba(143, 166, 255, 0.36);
  background: rgba(143, 166, 255, 0.14);
  color: #d2deff;
}
.arena-admin-list::-webkit-scrollbar,
.arena-admin-history-list::-webkit-scrollbar {
  width: 10px;
}
.arena-admin-list::-webkit-scrollbar-thumb,
.arena-admin-history-list::-webkit-scrollbar-thumb {
  border-radius: 999px;
  background: rgba(129, 150, 222, 0.34);
}
.arena-admin-list::-webkit-scrollbar-track,
.arena-admin-history-list::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.04);
  border-radius: 999px;
}

/* Keep monitor panel vertically scrollable only and prevent horizontal clipping/scroll. */
#arena-admin-modal,
.arena-admin-card,
.arena-admin-panel,
.arena-admin-sections,
.arena-admin-section,
.arena-admin-list,
.arena-admin-history-list {
  overflow-x: hidden;
}
.arena-admin-list,
.arena-admin-history-list {
  overflow-y: auto;
}
.arena-admin-list > *,
.arena-admin-history-list > * {
  flex: 0 0 auto;
}
.arena-admin-item,
.arena-admin-history-item {
  width: 100%;
  min-width: 0;
  overflow: visible;
  box-sizing: border-box;
}
.arena-admin-item-top,
.arena-admin-history-top {
  min-width: 0;
  flex-wrap: wrap;
}
.arena-admin-item-id-wrap,
.arena-admin-history-id-wrap {
  width: auto;
  min-width: 0;
  max-width: 100%;
  flex-wrap: wrap;
  row-gap: 4px;
}
.arena-admin-item-id,
.arena-admin-history-id,
.arena-admin-item-meta,
.arena-admin-history-time,
.arena-admin-name,
.arena-admin-history-name,
.arena-admin-history-result {
  min-width: 0;
  max-width: 100%;
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.arena-admin-name,
.arena-admin-history-name {
  overflow: visible;
  text-overflow: clip;
}
.arena-admin-source-badge,
.arena-admin-botcat {
  max-width: 100%;
  white-space: normal;
  line-height: 1.15;
  text-align: center;
}

.ranking-item {
  position: relative;
  overflow: hidden;
}
.ranking-item::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--rank-bg, transparent);
  opacity: 0.7;
  pointer-events: none;
}
.ranking-item > * {
  position: relative;
  z-index: 1;
}

/* Home Coins Display */
.home-coins-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 20px;
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255,165,2,0.2);
  border-radius: 14px;
  margin-bottom: 16px;
  box-shadow: 0 0 12px rgba(255,165,2,0.1);
}
.coin-icon { font-size: 22px; }
.coin-count {
  font-size: 20px;
  font-weight: 800;
  color: var(--warning);
  font-variant-numeric: tabular-nums;
}

/* Shop Screen */
.shop-coins-badge {
  margin-left: auto;
  background: rgba(255,165,2,0.15);
  color: var(--warning);
  font-weight: 800;
  font-size: 14px;
  padding: 6px 14px;
  border-radius: 20px;
  border: 1px solid rgba(255,165,2,0.3);
  white-space: nowrap;
}
.shop-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}
.shop-tab {
  flex: 1;
  padding: 10px 6px;
  background: var(--glass-bg);
  border: 2px solid var(--glass-border);
  border-radius: 12px;
  color: var(--text2);
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  text-align: center;
  transition: all 0.2s;
}
.shop-tab.active {
  border-color: var(--primary);
  color: var(--text);
  background: rgba(108, 99, 255, 0.15);
  box-shadow: var(--glow-primary);
}
.shop-grid {
  display: flex;
  flex-direction: column;
  gap: 10px;
  flex: 1;
  overflow-y: auto;
  padding-bottom: 20px;
}
.shop-rarity-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.shop-rarity-toggle {
  width: 100%;
  border-radius: 12px;
  border: 1px solid rgba(126, 146, 236, 0.34);
  background: linear-gradient(140deg, rgba(18, 26, 66, 0.84), rgba(10, 16, 46, 0.84));
  color: rgba(215, 224, 255, 0.95);
  min-height: 34px;
  padding: 8px 12px;
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}
.shop-rarity-toggle.rarity-common { border-color: rgba(165, 183, 255, 0.32); color: rgba(211, 220, 255, 0.95); }
.shop-rarity-toggle.rarity-uncommon { border-color: rgba(83, 217, 171, 0.34); color: rgba(168, 255, 226, 0.95); }
.shop-rarity-toggle.rarity-rare { border-color: rgba(86, 190, 255, 0.36); color: rgba(169, 228, 255, 0.95); }
.shop-rarity-toggle.rarity-epic { border-color: rgba(196, 120, 255, 0.38); color: rgba(232, 188, 255, 0.95); }
.shop-rarity-toggle.rarity-legendary { border-color: rgba(255, 194, 94, 0.44); color: rgba(255, 226, 170, 0.98); }
.shop-rarity-title {
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.shop-rarity-count {
  margin-left: auto;
  min-width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.22);
  background: rgba(255, 255, 255, 0.08);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.85);
}
.shop-rarity-arrow {
  font-size: 14px;
  opacity: 0.85;
  transform: rotate(-90deg);
  transition: transform 0.2s ease;
}
.shop-rarity-arrow.open {
  transform: rotate(0deg);
}
.shop-rarity-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}
.shop-rarity-empty {
  border-radius: 10px;
  padding: 8px 10px;
  border: 1px dashed rgba(159, 176, 255, 0.34);
  color: rgba(202, 214, 255, 0.74);
  font-size: 11px;
  text-align: center;
}
.shop-group-header {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  min-height: 30px;
  border-radius: 12px;
  border: 1px solid rgba(126, 146, 236, 0.34);
  background: linear-gradient(140deg, rgba(18, 26, 66, 0.84), rgba(10, 16, 46, 0.84));
  color: rgba(215, 224, 255, 0.95);
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 6px 10px;
  margin-top: 2px;
}
.shop-group-header:first-child {
  margin-top: 0;
}
.shop-group-common { border-color: rgba(165, 183, 255, 0.32); color: rgba(211, 220, 255, 0.95); }
.shop-group-uncommon { border-color: rgba(83, 217, 171, 0.34); color: rgba(168, 255, 226, 0.95); }
.shop-group-rare { border-color: rgba(86, 190, 255, 0.36); color: rgba(169, 228, 255, 0.95); }
.shop-group-epic { border-color: rgba(196, 120, 255, 0.38); color: rgba(232, 188, 255, 0.95); }
.shop-group-legendary { border-color: rgba(255, 194, 94, 0.44); color: rgba(255, 226, 170, 0.98); }
.shop-item {
  background: var(--glass-bg);
  backdrop-filter: blur(8px);
  border: 2px solid var(--glass-border);
  border-radius: 16px;
  padding: 12px 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  transition: all 0.25s;
  position: relative;
  overflow: hidden;
}
.shop-item.owned {
  border-color: rgba(0,212,170,0.3);
}
.shop-item.equipped {
  border-color: var(--primary);
  box-shadow: var(--glow-primary);
  background: rgba(108, 99, 255, 0.08);
}
.shop-item-preview {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 72px;
  width: 100%;
  perspective: 900px;
  transition: transform 0.18s ease;
}
.shop-item-preview-btn {
  width: 100%;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  text-align: inherit;
}
.shop-item-preview-btn:focus-visible {
  outline: 2px solid rgba(118, 164, 255, 0.72);
  outline-offset: 2px;
  border-radius: 12px;
}
.shop-item-preview-btn:active .shop-item-preview {
  transform: scale(0.985);
}
.shop-preview-cosmetic {
  width: 100%;
  height: 78px;
  border-radius: 14px;
  position: relative;
  overflow: hidden;
  isolation: isolate;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: linear-gradient(140deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01));
  box-shadow: inset 0 1px 1px rgba(255,255,255,0.1), 0 8px 22px rgba(0,0,0,0.22);
}
.shop-preview-frame-wrap {
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(140deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01)) !important;
}
.shop-preview-frame {
  width: 68px;
  height: 68px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(19, 27, 49, 0.9);
  position: relative;
  overflow: hidden;
  isolation: isolate;
  transform: translateZ(0);
}
.shop-preview-avatar-core,
.avatar-emoji-core {
  position: relative;
  z-index: 3;
  line-height: 1;
}
.shop-preview-frame[class*="cos-frame-"],
.hero-avatar[class*="cos-frame-"],
.rank-avatar[class*="cos-frame-"],
.pvp-player-avatar[class*="cos-frame-"] {
  z-index: 1;
}
.shop-preview-avatar-core {
  font-size: 34px;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.35));
}
.shop-preview-emoji {
  font-size: 40px;
  line-height: 1;
  filter: drop-shadow(0 8px 16px rgba(108, 99, 255, 0.35));
}
.shop-preview-emoji-wrap {
  width: 100%;
  height: 78px;
  border-radius: 14px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.12);
  background: linear-gradient(145deg, rgba(108,99,255,0.16), rgba(255,107,157,0.14));
}
.shop-preview-reflect {
  position: absolute;
  inset: -35%;
  z-index: 4;
  pointer-events: none;
  background: linear-gradient(118deg, transparent 24%, rgba(255,255,255,0.32) 49%, transparent 76%);
  mix-blend-mode: screen;
  animation: cosmetic-reflect-sweep 3.4s linear infinite;
}
.shop-preview-particles {
  position: absolute;
  inset: 0;
  z-index: 2;
  pointer-events: none;
  opacity: 0.68;
  background:
    radial-gradient(circle at 18% 78%, rgba(255,255,255,0.34) 0 2px, transparent 2px),
    radial-gradient(circle at 76% 18%, rgba(255,255,255,0.26) 0 1px, transparent 1px),
    radial-gradient(circle at 58% 62%, rgba(255,255,255,0.2) 0 1.5px, transparent 1.5px);
  animation: cosmetic-particle-drift 5.4s linear infinite;
}
.shop-preview-bg {
  border: 1px solid rgba(255, 255, 255, 0.14);
  height: 78px;
  padding: 4px;
  background: linear-gradient(140deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
  box-shadow: none !important;
}
.shop-preview-bg-canvas {
  position: absolute;
  inset: 4px;
  border-radius: 10px;
  overflow: hidden;
  isolation: isolate;
  background-position: center center !important;
  background-repeat: no-repeat !important;
  background-size: cover !important;
  transform: translateZ(0);
}
.shop-preview-bg-canvas::before,
.shop-preview-bg-canvas::after {
  display: none !important;
  animation: none !important;
  background: none !important;
}
.shop-preview-bg-content {
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: 10px;
  z-index: 3;
  display: flex;
  align-items: center;
  gap: 8px;
}
.shop-preview-bg-avatar {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 17px;
  border: 2px solid rgba(255,255,255,0.35);
  background: rgba(18, 22, 42, 0.55);
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}
.shop-preview-bg-name {
  color: rgba(255,255,255,0.92);
  font-size: 11px;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - 40px);
  text-shadow: 0 2px 5px rgba(0,0,0,0.35);
}
.shop-preview-bg > .shop-preview-particles {
  inset: 4px;
  border-radius: 10px;
}
.shop-preview-frame,
.hero-avatar,
.rank-avatar,
.pvp-player-avatar {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}
.shop-preview-bg,
.user-profile-hero,
.ranking-item,
.pvp-score-card,
.match-accept-player-card {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}
.cos-legendary-frame {
  box-shadow:
    inset 0 0 10px rgba(255, 255, 255, 0.22),
    inset 0 0 24px rgba(168, 236, 255, 0.18),
    0 0 14px rgba(255, 206, 126, 0.34),
    0 0 30px rgba(128, 214, 255, 0.3),
    0 0 48px rgba(135, 92, 255, 0.3);
  animation: none !important;
  transform: none !important;
}
.cos-legendary-frame::before,
.cos-legendary-frame::after {
  display: none;
  animation: none !important;
  opacity: 1 !important;
}
.cos-legendary-bg {
  box-shadow:
    inset 0 0 24px rgba(255, 255, 255, 0.14),
    inset 0 0 78px rgba(114, 88, 255, 0.22),
    0 0 24px rgba(132, 208, 255, 0.24),
    0 0 42px rgba(255, 180, 103, 0.2);
}
.cos-legendary-bg::before,
.cos-legendary-bg::after {
  display: none;
}

/* Shop item full preview modal */
.shop-item-preview-modal {
  z-index: 2860;
}
.shop-item-preview-card {
  max-width: 460px;
  max-height: min(86vh, 640px);
  overflow-y: auto;
}
.shop-item-preview-card p {
  margin-bottom: 12px;
}
.shop-modal-profile {
  position: relative;
  border-radius: 18px;
  border: 1px solid rgba(160, 184, 255, 0.34);
  overflow: hidden;
  padding: 12px;
  min-height: 108px;
  margin-bottom: 12px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 14px 28px rgba(0, 0, 0, 0.32);
}
.shop-modal-profile-content {
  position: relative;
  z-index: 2;
  display: flex;
  align-items: center;
  gap: 12px;
}
.shop-modal-avatar {
  width: 62px;
  height: 62px;
  font-size: 32px;
  flex-shrink: 0;
}
.shop-modal-profile-info {
  min-width: 0;
  flex: 1;
}
.shop-modal-profile-name {
  font-size: 16px;
  font-weight: 800;
  color: #eff3ff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.shop-modal-profile-meta {
  margin-top: 2px;
  color: rgba(228, 236, 255, 0.86);
  font-size: 12px;
}
.shop-modal-profile-badges {
  margin-top: 6px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

/* Strong static overlays for legendary cosmetics */
.cos-legendary-frame.cos-frame-diamond::before,
.cos-legendary-frame.cos-frame-diamond::after,
.cos-legendary-frame.cos-frame-phoenix::before,
.cos-legendary-frame.cos-frame-phoenix::after,
.cos-legendary-frame.cos-frame-void::before,
.cos-legendary-frame.cos-frame-void::after,
.cos-legendary-frame.cos-frame-cosmic::before,
.cos-legendary-frame.cos-frame-cosmic::after,
.cos-legendary-frame.cos-frame-divine::before,
.cos-legendary-frame.cos-frame-divine::after,
.cos-legendary-frame.cos-frame-arcane::before,
.cos-legendary-frame.cos-frame-arcane::after,
.cos-legendary-frame.cos-frame-eclipse::before,
.cos-legendary-frame.cos-frame-eclipse::after,
.cos-legendary-frame.cos-frame-sakura::before,
.cos-legendary-frame.cos-frame-sakura::after,
.cos-legendary-bg.cos-bg-bg_cyberstorm::before,
.cos-legendary-bg.cos-bg-bg_cyberstorm::after,
.cos-legendary-bg.cos-bg-bg_royal_nebula::before,
.cos-legendary-bg.cos-bg-bg_royal_nebula::after {
  display: block;
  animation: none !important;
}
.cos-legendary-frame.cos-frame-diamond::before {
  opacity: 0.9;
  background:
    radial-gradient(circle at 26% 22%, rgba(224, 255, 255, 0.78) 0 2px, transparent 4px),
    radial-gradient(circle at 78% 72%, rgba(176, 236, 255, 0.68) 0 2px, transparent 4px),
    conic-gradient(from 0deg, rgba(166, 245, 255, 0.34), rgba(170, 124, 255, 0.3), rgba(166, 245, 255, 0.34));
}
.cos-legendary-frame.cos-frame-diamond::after {
  opacity: 0.84;
  background:
    linear-gradient(118deg, transparent 20%, rgba(238, 255, 255, 0.66) 50%, transparent 82%),
    radial-gradient(circle at 50% 50%, rgba(124, 244, 255, 0.34), transparent 62%);
}
.cos-legendary-frame.cos-frame-phoenix::before {
  opacity: 0.92;
  background:
    radial-gradient(circle at 24% 82%, rgba(255, 206, 108, 0.8) 0 2px, transparent 4px),
    radial-gradient(circle at 74% 24%, rgba(255, 136, 66, 0.76) 0 2px, transparent 4px),
    linear-gradient(138deg, rgba(255, 170, 78, 0.34), rgba(255, 74, 0, 0.28), rgba(255, 219, 162, 0.24));
}
.cos-legendary-frame.cos-frame-phoenix::after {
  opacity: 0.86;
  background:
    radial-gradient(circle at 48% 88%, rgba(255, 240, 184, 0.62), transparent 56%),
    linear-gradient(112deg, transparent 18%, rgba(255, 244, 206, 0.56) 50%, transparent 84%);
}
.cos-legendary-frame.cos-frame-void::before {
  opacity: 0.9;
  background:
    radial-gradient(circle at 18% 24%, rgba(216, 174, 255, 0.74) 0 2px, transparent 4px),
    radial-gradient(circle at 84% 78%, rgba(118, 98, 255, 0.74) 0 2px, transparent 4px),
    radial-gradient(circle at 50% 50%, rgba(28, 12, 68, 0.56), transparent 62%);
}
.cos-legendary-frame.cos-frame-void::after {
  opacity: 0.84;
  background:
    linear-gradient(126deg, rgba(142, 102, 255, 0.34), rgba(22, 8, 58, 0.28), rgba(200, 162, 255, 0.3)),
    linear-gradient(108deg, transparent 22%, rgba(224, 210, 255, 0.44) 50%, transparent 80%);
}
.cos-legendary-frame.cos-frame-cosmic::before {
  opacity: 0.88;
  background:
    radial-gradient(circle at 18% 24%, rgba(205, 189, 255, 0.76) 0 2px, transparent 4px),
    radial-gradient(circle at 84% 74%, rgba(148, 198, 255, 0.72) 0 2px, transparent 4px),
    conic-gradient(from 0deg, rgba(142, 102, 255, 0.28), rgba(84, 156, 255, 0.24), rgba(142, 102, 255, 0.28));
}
.cos-legendary-frame.cos-frame-cosmic::after {
  opacity: 0.82;
  background:
    linear-gradient(118deg, transparent 20%, rgba(228, 236, 255, 0.5) 50%, transparent 82%),
    radial-gradient(circle at 50% 50%, rgba(132, 174, 255, 0.28), transparent 62%);
}
.cos-legendary-frame.cos-frame-divine::before {
  opacity: 0.9;
  background:
    radial-gradient(circle at 20% 26%, rgba(255, 242, 186, 0.8) 0 2px, transparent 4px),
    radial-gradient(circle at 80% 74%, rgba(255, 216, 114, 0.76) 0 2px, transparent 4px),
    conic-gradient(from 0deg, rgba(255, 218, 122, 0.3), rgba(255, 168, 62, 0.24), rgba(255, 218, 122, 0.3));
}
.cos-legendary-frame.cos-frame-divine::after {
  opacity: 0.84;
  background:
    linear-gradient(116deg, transparent 18%, rgba(255, 250, 220, 0.54) 50%, transparent 84%),
    radial-gradient(circle at 50% 50%, rgba(255, 214, 112, 0.28), transparent 62%);
}
.cos-legendary-frame.cos-frame-arcane::before {
  opacity: 0.9;
  background:
    radial-gradient(circle at 22% 24%, rgba(194, 176, 255, 0.78) 0 2px, transparent 4px),
    radial-gradient(circle at 78% 76%, rgba(98, 226, 246, 0.74) 0 2px, transparent 4px),
    conic-gradient(from 0deg, rgba(160, 102, 255, 0.28), rgba(68, 214, 236, 0.22), rgba(160, 102, 255, 0.28));
}
.cos-legendary-frame.cos-frame-arcane::after {
  opacity: 0.84;
  background:
    linear-gradient(124deg, rgba(156, 102, 255, 0.28), rgba(42, 16, 96, 0.24), rgba(102, 214, 236, 0.22)),
    linear-gradient(108deg, transparent 22%, rgba(216, 202, 255, 0.42) 50%, transparent 80%);
}
.cos-legendary-frame.cos-frame-eclipse::before {
  opacity: 0.9;
  background:
    radial-gradient(circle at 16% 50%, rgba(255, 226, 132, 0.8) 0 2px, transparent 4px),
    radial-gradient(circle at 84% 50%, rgba(255, 176, 82, 0.74) 0 2px, transparent 4px),
    radial-gradient(circle at 50% 50%, rgba(20, 14, 8, 0.56), transparent 62%);
}
.cos-legendary-frame.cos-frame-eclipse::after {
  opacity: 0.84;
  background:
    linear-gradient(126deg, rgba(255, 208, 108, 0.28), rgba(42, 26, 10, 0.24), rgba(255, 154, 54, 0.22)),
    linear-gradient(108deg, transparent 24%, rgba(255, 234, 176, 0.4) 50%, transparent 80%);
}
.cos-legendary-frame.cos-frame-sakura::before {
  opacity: 0.9;
  background:
    radial-gradient(circle at 24% 24%, rgba(255, 202, 232, 0.8) 0 2px, transparent 4px),
    radial-gradient(circle at 76% 74%, rgba(255, 156, 206, 0.74) 0 2px, transparent 4px),
    conic-gradient(from 0deg, rgba(255, 166, 212, 0.3), rgba(255, 118, 186, 0.22), rgba(255, 166, 212, 0.3));
}
.cos-legendary-frame.cos-frame-sakura::after {
  opacity: 0.84;
  background:
    linear-gradient(118deg, transparent 18%, rgba(255, 224, 240, 0.48) 50%, transparent 82%),
    radial-gradient(circle at 50% 50%, rgba(255, 154, 204, 0.26), transparent 62%);
}
.cos-legendary-bg.cos-bg-bg_cyberstorm::before {
  opacity: 0.74;
  background:
    linear-gradient(132deg, rgba(0, 255, 255, 0.24), rgba(114, 74, 255, 0.28), rgba(0, 255, 255, 0.22)),
    repeating-linear-gradient(118deg, rgba(176, 250, 255, 0.2) 0 2px, transparent 2px 20px);
}
.cos-legendary-bg.cos-bg-bg_cyberstorm::after {
  opacity: 0.68;
  background:
    radial-gradient(circle at 20% 24%, rgba(164, 255, 255, 0.42), transparent 34%),
    radial-gradient(circle at 78% 72%, rgba(174, 146, 255, 0.42), transparent 36%),
    linear-gradient(108deg, transparent 28%, rgba(255, 255, 255, 0.34) 50%, transparent 72%);
}
.cos-legendary-bg.cos-bg-bg_royal_nebula::before {
  opacity: 0.76;
  background:
    linear-gradient(128deg, rgba(255, 201, 110, 0.28), rgba(148, 94, 255, 0.3), rgba(255, 201, 110, 0.24)),
    conic-gradient(from 0deg, rgba(255, 224, 146, 0.18), rgba(176, 126, 255, 0.22), rgba(255, 224, 146, 0.18));
}
.cos-legendary-bg.cos-bg-bg_royal_nebula::after {
  opacity: 0.7;
  background:
    radial-gradient(circle at 24% 78%, rgba(255, 222, 154, 0.46), transparent 36%),
    radial-gradient(circle at 76% 24%, rgba(202, 144, 255, 0.46), transparent 38%),
    linear-gradient(108deg, transparent 30%, rgba(255, 248, 214, 0.36) 50%, transparent 72%);
}
[class*="cos-frame-"]::before {
  content: '';
  position: absolute;
  inset: -14%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.5;
}
[class*="cos-frame-"]::after {
  content: '';
  position: absolute;
  inset: -12%;
  pointer-events: none;
  z-index: 1;
  opacity: 0.45;
}
[class*="cos-frame-"] {
  box-shadow: 0 0 0 rgba(0,0,0,0);
}
.cos-frame-default::before {
  background:
    radial-gradient(circle at 18% 22%, rgba(175, 193, 255, 0.3) 0 2px, transparent 2px),
    radial-gradient(circle at 82% 72%, rgba(255, 255, 255, 0.22) 0 1px, transparent 1px);
  animation: cosmetic-particle-drift 6.2s linear infinite;
}
.cos-frame-default::after {
  background: linear-gradient(112deg, transparent 18%, rgba(186, 174, 255, 0.24) 48%, transparent 82%);
  animation: cosmetic-shimmer 3s linear infinite;
}
.cos-frame-gold::after {
  background: linear-gradient(112deg, transparent 18%, rgba(255, 224, 120, 0.4) 48%, transparent 82%);
  animation: cosmetic-shimmer 2.8s linear infinite;
}
.cos-frame-gold::before {
  background:
    radial-gradient(circle at 18% 22%, rgba(255, 240, 180, 0.48) 0 2px, transparent 2px),
    radial-gradient(circle at 80% 78%, rgba(255, 214, 102, 0.42) 0 1.5px, transparent 1.5px);
  animation: cosmetic-particle-drift 5.2s linear infinite;
}
.cos-frame-fire::after {
  background: radial-gradient(circle at 50% 90%, rgba(255, 87, 34, 0.55), transparent 65%);
  animation: cosmetic-breath 1.1s ease-in-out infinite;
}
.cos-frame-fire::before {
  background:
    radial-gradient(circle at 20% 78%, rgba(255, 149, 0, 0.46) 0 2px, transparent 2px),
    radial-gradient(circle at 70% 20%, rgba(255, 78, 0, 0.42) 0 1.6px, transparent 1.6px);
  animation: cosmetic-particle-drift 3.6s linear infinite;
}
.cos-frame-ice::after {
  background:
    linear-gradient(140deg, rgba(168, 238, 255, 0.26), transparent 42%),
    radial-gradient(circle at 70% 20%, rgba(190, 250, 255, 0.35), transparent 45%);
  animation: cosmetic-shimmer 3.5s linear infinite;
}
.cos-frame-ice::before {
  background:
    radial-gradient(circle at 16% 18%, rgba(214, 247, 255, 0.42) 0 2px, transparent 2px),
    radial-gradient(circle at 78% 76%, rgba(187, 241, 255, 0.36) 0 1.4px, transparent 1.4px);
  animation: cosmetic-particle-drift 5.8s linear infinite;
}
.cos-frame-neon::after {
  background: radial-gradient(circle, rgba(199, 123, 255, 0.28), transparent 65%);
  animation: cosmetic-breath 1s ease-in-out infinite;
}
.cos-frame-neon::before {
  background:
    radial-gradient(circle at 12% 30%, rgba(215, 122, 255, 0.36) 0 2px, transparent 2px),
    radial-gradient(circle at 82% 62%, rgba(127, 220, 255, 0.34) 0 1.5px, transparent 1.5px);
  animation: cosmetic-particle-drift 4.6s linear infinite;
}
.cos-frame-rainbow::after {
  background: conic-gradient(from 0deg, rgba(255, 0, 132, 0.32), rgba(255, 165, 2, 0.32), rgba(0, 212, 170, 0.32), rgba(0, 119, 255, 0.32), rgba(255, 0, 132, 0.32));
  animation: cosmetic-hue-shift 2.5s linear infinite;
}
.cos-frame-rainbow::before {
  background:
    radial-gradient(circle at 22% 26%, rgba(255, 255, 255, 0.34) 0 1.8px, transparent 1.8px),
    radial-gradient(circle at 78% 74%, rgba(255, 255, 255, 0.32) 0 1.3px, transparent 1.3px);
  animation: cosmetic-particle-drift 4.8s linear infinite;
}
.cos-frame-diamond::after {
  background:
    linear-gradient(112deg, transparent 12%, rgba(242, 255, 255, 0.5) 50%, transparent 88%),
    repeating-linear-gradient(160deg, rgba(196, 240, 255, 0.14) 0 1px, transparent 1px 8px),
    radial-gradient(circle at 18% 76%, rgba(130, 225, 255, 0.28) 0 2px, transparent 2px),
    radial-gradient(circle at 82% 20%, rgba(159, 203, 255, 0.22) 0 1.5px, transparent 1.5px),
    radial-gradient(circle at 50% 48%, rgba(120, 238, 255, 0.2), transparent 62%),
    radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.08) 0 18%, transparent 58%);
  background-size: 175% 100%, 120% 120%, 120px 120px, 140px 140px, cover, 140% 140%;
  animation: legendary-reflect-glint 2s ease-in-out infinite, legendary-fluid-flow 4s linear infinite, legendary-prism-spin 7.2s linear infinite reverse, legendary-lens-glow 2.8s ease-in-out infinite;
  mix-blend-mode: soft-light;
  opacity: 0.7;
}
.cos-frame-diamond::before {
  background:
    conic-gradient(from 0deg, rgba(174, 255, 255, 0.24), rgba(162, 120, 255, 0.2), rgba(174, 255, 255, 0.24)),
    radial-gradient(circle at 20% 24%, rgba(220, 255, 255, 0.58) 0 2px, transparent 3px),
    radial-gradient(circle at 78% 66%, rgba(167, 248, 255, 0.48) 0 1.4px, transparent 2.5px),
    radial-gradient(ellipse at 50% 94%, rgba(192, 233, 255, 0.2) 0 28%, transparent 68%),
    radial-gradient(ellipse at 62% 86%, rgba(225, 242, 255, 0.16) 0 26%, transparent 64%);
  background-size: cover, 120px 120px, 140px 140px, 120% 120%, 130% 130%;
  animation: legendary-prism-spin 5.6s linear infinite, cosmetic-particle-drift 2.8s linear infinite, legendary-smoke-drift 5.2s ease-in-out infinite, legendary-spectrum-shift 7.6s ease-in-out infinite;
}
.cos-frame-diamond {
  box-shadow:
    0 0 22px rgba(128, 245, 255, 0.56),
    0 0 44px rgba(153, 120, 255, 0.4),
    0 0 62px rgba(162, 218, 255, 0.3);
}
.cos-frame-ghost::after {
  background: radial-gradient(circle, rgba(255, 255, 255, 0.26), transparent 68%);
  animation: cosmetic-breath 1.7s ease-in-out infinite;
}
.cos-frame-ghost::before {
  background:
    radial-gradient(circle at 20% 20%, rgba(255,255,255,0.26) 0 2px, transparent 2px),
    radial-gradient(circle at 76% 78%, rgba(240,244,255,0.22) 0 1.4px, transparent 1.4px);
  animation: cosmetic-particle-drift 6.8s linear infinite;
}
.cos-frame-matrix::after {
  background:
    repeating-linear-gradient(180deg, rgba(0, 255, 65, 0.16) 0 3px, transparent 3px 8px);
  animation: cosmetic-shimmer 2.1s linear infinite;
}
.cos-frame-matrix::before {
  background:
    radial-gradient(circle at 14% 28%, rgba(0, 255, 86, 0.4) 0 1.5px, transparent 1.5px),
    radial-gradient(circle at 84% 72%, rgba(101, 255, 133, 0.32) 0 1.3px, transparent 1.3px);
  animation: cosmetic-particle-drift 3.1s linear infinite;
}
.cos-frame-phoenix::after {
  background:
    radial-gradient(circle at 24% 84%, rgba(255, 196, 74, 0.42), transparent 34%),
    radial-gradient(circle at 74% 24%, rgba(255, 84, 22, 0.36), transparent 40%),
    radial-gradient(circle at 50% 56%, rgba(255, 92, 0, 0.3), transparent 42%),
    repeating-radial-gradient(circle at 50% 78%, rgba(255, 210, 140, 0.16) 0 1.2px, transparent 1.2px 8px),
    linear-gradient(140deg, rgba(255, 132, 54, 0.2), transparent 58%),
    radial-gradient(circle at 48% 88%, rgba(255, 244, 194, 0.14) 0 20%, transparent 56%);
  background-size: cover, cover, 130% 130%, 120% 120%, cover, 120% 120%;
  animation: cosmetic-breath 0.88s ease-in-out infinite, legendary-flare-flicker 1.7s ease-in-out infinite, legendary-ember-rise 1.6s linear infinite, legendary-electro-surge 3.8s ease-in-out infinite, legendary-lens-glow 2.6s ease-in-out infinite;
}
.cos-frame-phoenix::before {
  background:
    radial-gradient(circle at 22% 22%, rgba(255, 236, 172, 0.58) 0 2px, transparent 3px),
    radial-gradient(circle at 80% 74%, rgba(255, 140, 76, 0.52) 0 1.6px, transparent 2.5px),
    radial-gradient(ellipse at 48% 56%, rgba(255, 98, 0, 0.36), transparent 56%),
    radial-gradient(ellipse at 26% 88%, rgba(124, 104, 96, 0.2) 0 28%, transparent 70%),
    radial-gradient(ellipse at 72% 90%, rgba(162, 148, 138, 0.18) 0 26%, transparent 68%),
    radial-gradient(ellipse at 50% 94%, rgba(255, 241, 214, 0.18) 0 24%, transparent 72%);
  background-size: 120px 120px, 140px 140px, cover, 130% 130%, 130% 130%, cover;
  animation: legendary-ember-rise 1.7s linear infinite, cosmetic-particle-drift 1.8s linear infinite, legendary-smoke-drift 4.1s ease-in-out infinite;
}
.cos-frame-phoenix {
  box-shadow:
    0 0 22px rgba(255, 168, 56, 0.68),
    0 0 46px rgba(255, 90, 0, 0.48),
    0 0 66px rgba(255, 214, 132, 0.32);
}
.cos-frame-void::after {
  background:
    linear-gradient(125deg, rgba(98, 56, 224, 0.36), rgba(18, 9, 48, 0.14), rgba(194, 146, 255, 0.32)),
    conic-gradient(from 0deg at 52% 50%, rgba(194, 156, 255, 0.12), rgba(40, 18, 99, 0.2), rgba(194, 156, 255, 0.12)),
    radial-gradient(circle at 52% 50%, rgba(36, 18, 90, 0.22), transparent 58%),
    repeating-linear-gradient(166deg, rgba(191, 221, 255, 0.1) 0 1px, transparent 1px 9px),
    linear-gradient(112deg, transparent 24%, rgba(255,255,255,0.18) 52%, transparent 82%),
    repeating-radial-gradient(circle at 50% 50%, rgba(184, 151, 255, 0.08) 0 2px, transparent 2px 11px);
  background-size: 240% 240%, 200% 200%, cover, 100% 100%, 170% 100%, 130% 130%;
  animation: legendary-void-drift 2.5s ease-in-out infinite, legendary-rain-fall 1.9s linear infinite, legendary-reflect-glint 2.6s ease-in-out infinite, legendary-electro-surge 4.2s ease-in-out infinite, legendary-spectrum-shift 7.8s ease-in-out infinite;
}
.cos-frame-void::before {
  background:
    radial-gradient(circle at 16% 26%, rgba(214, 180, 255, 0.46) 0 2px, transparent 3px),
    radial-gradient(circle at 84% 72%, rgba(114, 82, 255, 0.46) 0 1.4px, transparent 2.5px),
    radial-gradient(ellipse at 50% 50%, rgba(20, 10, 45, 0.5), transparent 52%),
    radial-gradient(ellipse at 34% 84%, rgba(118, 125, 138, 0.16) 0 28%, transparent 68%),
    radial-gradient(ellipse at 66% 90%, rgba(160, 165, 176, 0.14) 0 26%, transparent 64%),
    radial-gradient(circle at 30% 8%, rgba(225, 242, 255, 0.34) 0 1.2px, transparent 2px),
    radial-gradient(circle at 70% 20%, rgba(224, 236, 245, 0.28) 0 1px, transparent 2px),
    repeating-linear-gradient(178deg, rgba(201, 232, 255, 0.1) 0 1px, transparent 1px 10px);
  background-size: 120px 120px, 140px 140px, cover, 130% 130%, 130% 130%, 84px 84px, 96px 96px, 100% 100%;
  animation: cosmetic-stars 3.1s linear infinite, legendary-nebula-orbit 7.2s linear infinite, legendary-smoke-drift 5s ease-in-out infinite, legendary-lens-glow 3.3s ease-in-out infinite;
}
.cos-frame-void {
  box-shadow:
    0 0 20px rgba(170, 124, 255, 0.58),
    0 0 42px rgba(69, 36, 176, 0.46),
    0 0 62px rgba(132, 180, 255, 0.28);
}
[class*="cos-bg-"]::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.62;
}
[class*="cos-bg-"]::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.55;
}
[class*="cos-bg-"] > *,
.ranking-item > *,
.pvp-score-card > *:not(.match-accept-dot):not(.match-accept-state),
.user-profile-hero > *:not(.hero-bg-glow) {
  position: relative;
  z-index: 2;
}
.user-profile-hero > .hero-bg-glow {
  position: absolute;
  z-index: 0;
}
.shop-preview-bg > .shop-preview-reflect { z-index: 4; }
.shop-preview-bg > .shop-preview-particles { z-index: 3; }
.shop-preview-bg > .shop-preview-reflect,
.shop-preview-bg > .shop-preview-particles,
.shop-preview-bg > .shop-preview-bg-content {
  position: absolute;
}
.shop-preview-bg > .shop-preview-bg-content {
  left: 10px;
  right: 10px;
  bottom: 8px;
  z-index: 5;
  display: flex;
  align-items: center;
  gap: 8px;
  min-height: 30px;
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(9, 14, 28, 0.42);
  backdrop-filter: blur(3px);
}
.cos-bg-bg_default::before {
  background:
    radial-gradient(circle at 18% 72%, rgba(255,255,255,0.22) 0 2px, transparent 2px),
    radial-gradient(circle at 80% 22%, rgba(186, 174, 255, 0.2) 0 1.2px, transparent 1.2px);
  animation: cosmetic-particle-drift 6.2s linear infinite;
}
.cos-bg-bg_default::after {
  background: linear-gradient(120deg, transparent 24%, rgba(255,255,255,0.14) 52%, transparent 80%);
  animation: cosmetic-shimmer 3.6s linear infinite;
}
.cos-bg-bg_sunset::before {
  background:
    radial-gradient(circle at 24% 78%, rgba(255, 197, 122, 0.28) 0 2px, transparent 2px),
    radial-gradient(circle at 74% 26%, rgba(255, 112, 154, 0.22) 0 1.4px, transparent 1.4px);
  animation: cosmetic-particle-drift 5.8s linear infinite;
}
.cos-bg-bg_sunset::after {
  background: linear-gradient(120deg, rgba(255, 133, 70, 0.28), rgba(255, 219, 128, 0.2), rgba(255, 107, 157, 0.24));
  background-size: 220% 220%;
  animation: cosmetic-wave 4.4s ease-in-out infinite;
}
.cos-bg-bg_ocean::before {
  background:
    radial-gradient(circle at 22% 22%, rgba(139, 233, 255, 0.26) 0 2px, transparent 2px),
    radial-gradient(circle at 78% 74%, rgba(72, 245, 225, 0.24) 0 1.4px, transparent 1.4px);
  animation: cosmetic-particle-drift 5.2s linear infinite;
}
.cos-bg-bg_ocean::after {
  background: linear-gradient(120deg, rgba(0, 174, 255, 0.24), rgba(0, 212, 170, 0.28), rgba(0, 102, 255, 0.2));
  background-size: 220% 220%;
  animation: cosmetic-wave 4.2s ease-in-out infinite;
}
.cos-bg-bg_forest::before {
  background:
    radial-gradient(circle at 20% 80%, rgba(147, 223, 137, 0.24) 0 2px, transparent 2px),
    radial-gradient(circle at 78% 26%, rgba(194, 255, 170, 0.2) 0 1.2px, transparent 1.2px);
  animation: cosmetic-particle-drift 6.4s linear infinite;
}
.cos-bg-bg_forest::after {
  background: linear-gradient(120deg, rgba(90, 200, 120, 0.2), rgba(52, 120, 60, 0.28), rgba(129, 211, 87, 0.2));
  background-size: 220% 220%;
  animation: cosmetic-wave 5s ease-in-out infinite;
}
.cos-bg-bg_galaxy::before {
  background:
    radial-gradient(circle at 12% 20%, rgba(255,255,255,0.22) 0 2px, transparent 2px),
    radial-gradient(circle at 86% 76%, rgba(255,255,255,0.18) 0 1px, transparent 1px),
    radial-gradient(circle at 56% 44%, rgba(163, 115, 255, 0.24), transparent 36%);
  animation: cosmetic-stars 8.4s linear infinite;
}
.cos-bg-bg_galaxy::after {
  background:
    radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.22) 0 2px, transparent 2px),
    radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.2) 0 1px, transparent 1px),
    radial-gradient(circle at 50% 45%, rgba(196, 154, 255, 0.22), transparent 46%);
  background-size: 130px 130px, 160px 160px, cover;
  animation: cosmetic-stars 7s linear infinite;
}
.cos-bg-bg_lava::before {
  background:
    radial-gradient(circle at 24% 82%, rgba(255, 156, 42, 0.28) 0 2px, transparent 2px),
    radial-gradient(circle at 74% 22%, rgba(255, 92, 0, 0.22) 0 1.4px, transparent 1.4px);
  animation: cosmetic-particle-drift 3.2s linear infinite;
}
.cos-bg-bg_lava::after {
  background:
    radial-gradient(circle at 40% 65%, rgba(255, 80, 0, 0.34), transparent 40%),
    radial-gradient(circle at 70% 35%, rgba(255, 179, 0, 0.22), transparent 36%);
  animation: cosmetic-breath 1.2s ease-in-out infinite;
}
.cos-bg-bg_aurora::before {
  background:
    radial-gradient(circle at 20% 78%, rgba(188, 255, 229, 0.2) 0 2px, transparent 2px),
    radial-gradient(circle at 80% 26%, rgba(189, 165, 255, 0.24) 0 1.5px, transparent 1.5px);
  animation: cosmetic-particle-drift 6s linear infinite;
}
.cos-bg-bg_aurora::after {
  background: linear-gradient(130deg, rgba(0, 255, 170, 0.16), rgba(129, 92, 255, 0.2), rgba(91, 200, 255, 0.18), rgba(0, 255, 170, 0.16));
  background-size: 260% 260%;
  animation: cosmetic-wave 5.2s ease-in-out infinite;
}
.cos-bg-bg_cyberstorm::before {
  background:
    radial-gradient(circle at 16% 22%, rgba(148, 250, 255, 0.36) 0 2px, transparent 3px),
    radial-gradient(circle at 82% 78%, rgba(130, 174, 255, 0.3) 0 1.5px, transparent 2.5px),
    radial-gradient(ellipse at 52% 44%, rgba(72, 34, 140, 0.32), transparent 52%),
    repeating-linear-gradient(112deg, rgba(156, 250, 255, 0.1) 0 1px, transparent 1px 18px),
    repeating-linear-gradient(168deg, rgba(206, 232, 255, 0.12) 0 1px, transparent 1px 14px),
    radial-gradient(ellipse at 22% 88%, rgba(126, 142, 161, 0.18) 0 28%, transparent 68%),
    radial-gradient(ellipse at 78% 92%, rgba(168, 177, 196, 0.16) 0 26%, transparent 64%),
    radial-gradient(circle at 18% 12%, rgba(201, 255, 205, 0.24) 0 1.2px, transparent 2px),
    radial-gradient(circle at 74% 18%, rgba(239, 250, 255, 0.24) 0 1.2px, transparent 2px);
  background-size: 120px 120px, 140px 140px, cover, cover, 100% 100%, 130% 130%, 130% 130%, 64px 64px, 80px 80px;
  animation: cosmetic-stars 4.2s linear infinite, legendary-arc-flash 2.8s linear infinite, legendary-smoke-drift 4.8s ease-in-out infinite, legendary-spectrum-shift 6.8s ease-in-out infinite;
}
.cos-bg-bg_cyberstorm::after {
  background:
    linear-gradient(132deg, rgba(0, 248, 255, 0.14), rgba(112, 76, 255, 0.2), rgba(0, 248, 255, 0.12)),
    radial-gradient(ellipse at 30% 30%, rgba(186, 255, 255, 0.16), transparent 50%),
    radial-gradient(ellipse at 70% 70%, rgba(160, 120, 255, 0.18), transparent 50%),
    linear-gradient(108deg, transparent 30%, rgba(255,255,255,0.12) 50%, transparent 70%);
  background-size: 260% 260%, cover, cover, 200% 100%;
  animation: cosmetic-wave 2.4s ease-in-out infinite, legendary-electro-surge 4.8s ease-in-out infinite, legendary-lens-glow 3.4s ease-in-out infinite;
}
.cos-bg-bg_cyberstorm {
  box-shadow:
    inset 0 0 34px rgba(90, 246, 255, 0.24),
    inset 0 0 66px rgba(112, 76, 255, 0.26),
    0 0 26px rgba(91, 214, 255, 0.3),
    0 0 48px rgba(157, 114, 255, 0.24);
}
.cos-bg-bg_royal_nebula::before {
  background:
    radial-gradient(circle at 20% 78%, rgba(255, 218, 132, 0.36) 0 2px, transparent 3px),
    radial-gradient(circle at 76% 24%, rgba(192, 126, 255, 0.36) 0 1.6px, transparent 2.5px),
    radial-gradient(ellipse at 50% 52%, rgba(255, 154, 80, 0.26), transparent 50%),
    conic-gradient(from 0deg, rgba(255, 214, 132, 0.12), rgba(186, 122, 255, 0.14), rgba(255, 214, 132, 0.12)),
    radial-gradient(ellipse at 24% 86%, rgba(173, 164, 154, 0.18) 0 28%, transparent 68%),
    radial-gradient(ellipse at 76% 90%, rgba(184, 177, 190, 0.16) 0 26%, transparent 64%),
    radial-gradient(circle at 44% 86%, rgba(132, 220, 255, 0.22) 0 1.4px, transparent 2px),
    radial-gradient(circle at 60% 72%, rgba(152, 238, 255, 0.22) 0 1px, transparent 2px);
  background-size: 120px 120px, 140px 140px, cover, cover, 130% 130%, 130% 130%, 96px 96px, 116px 116px;
  animation: cosmetic-particle-drift 2.9s linear infinite, legendary-nebula-orbit 7.8s linear infinite, legendary-smoke-drift 4.8s ease-in-out infinite, legendary-spectrum-shift 7.5s ease-in-out infinite;
}
.cos-bg-bg_royal_nebula::after {
  background:
    linear-gradient(128deg, rgba(255, 188, 84, 0.16), rgba(142, 92, 255, 0.2), rgba(255, 188, 84, 0.14)),
    radial-gradient(ellipse at 75% 25%, rgba(255, 226, 142, 0.2), transparent 50%),
    radial-gradient(ellipse at 25% 75%, rgba(196, 136, 255, 0.18), transparent 50%),
    linear-gradient(108deg, transparent 30%, rgba(255,255,255,0.12) 50%, transparent 70%);
  background-size: 260% 260%, cover, cover, 200% 100%;
  animation: cosmetic-wave 2.8s ease-in-out infinite, legendary-electro-surge 5.2s ease-in-out infinite, legendary-lens-glow 3.2s ease-in-out infinite;
}
.cos-bg-bg_royal_nebula {
  box-shadow:
    inset 0 0 34px rgba(255, 205, 114, 0.24),
    inset 0 0 68px rgba(146, 90, 255, 0.26),
    0 0 26px rgba(255, 192, 108, 0.3),
    0 0 44px rgba(129, 196, 255, 0.24);
}
.shop-item[data-rarity="legendary"] .shop-preview-cosmetic,
.shop-item[data-rarity="legendary"] .shop-preview-emoji-wrap {
  box-shadow:
    inset 0 1px 3px rgba(255,255,255,0.24),
    0 0 20px rgba(255, 167, 81, 0.3),
    0 0 38px rgba(137, 94, 255, 0.26);
}
.shop-item[data-rarity="legendary"] .shop-preview-bg {
  box-shadow: none !important;
}
.shop-item[data-rarity="legendary"] .shop-preview-reflect {
  animation-duration: 2.2s;
  opacity: 0.96;
}

.shop-preview-frame[class*="cos-frame-"] {
  animation: cosmetic-pulse-shadow 2.4s ease-in-out infinite;
}

/* Frames by rarity */
[class*="cos-frame-"]::before,
[class*="cos-frame-"]::after {
  display: none !important;
  animation: none !important;
}
.cos-frame-default { background: #2a3554 !important; }
.cos-frame-gold { background: #5a4822 !important; }
.cos-frame-fire { background: linear-gradient(135deg, #5a2014, #a33612, #db6826) !important; }
.cos-frame-ice { background: linear-gradient(135deg, #1d3f58, #2a628b, #5fa6d8) !important; }
.cos-frame-ghost { background: linear-gradient(135deg, #31374f, #4a5372, #7b84a8) !important; }
.cos-frame-neon {
  background: linear-gradient(132deg, #2a224f, #5530a8, #2f7a9d) !important;
}
.cos-frame-rainbow {
  background: linear-gradient(132deg, #ca2b66, #d47f1f, #1da47c, #2f62d0, #9f3bc4) !important;
}
.cos-frame-matrix {
  background: linear-gradient(132deg, #0f301f, #1c6d44, #1f9f6d) !important;
}
.cos-frame-neon::before,
.cos-frame-rainbow::before,
.cos-frame-matrix::before {
  display: none !important;
}
.cos-frame-neon::after,
.cos-frame-rainbow::after,
.cos-frame-matrix::after {
  display: block !important;
  opacity: 0.64;
  background:
    linear-gradient(110deg, transparent 20%, rgba(255,255,255,0.36) 50%, transparent 80%),
    linear-gradient(132deg, rgba(255,255,255,0.08), rgba(255,255,255,0));
  background-size: 190% 100%, cover;
  animation: cosmetic-reflect-sweep 3.2s linear infinite !important;
}
.cos-legendary-frame.cos-frame-diamond::before,
.cos-legendary-frame.cos-frame-diamond::after,
.cos-legendary-frame.cos-frame-phoenix::before,
.cos-legendary-frame.cos-frame-phoenix::after,
.cos-legendary-frame.cos-frame-void::before,
.cos-legendary-frame.cos-frame-void::after,
.cos-legendary-frame.cos-frame-cosmic::before,
.cos-legendary-frame.cos-frame-cosmic::after,
.cos-legendary-frame.cos-frame-divine::before,
.cos-legendary-frame.cos-frame-divine::after,
.cos-legendary-frame.cos-frame-arcane::before,
.cos-legendary-frame.cos-frame-arcane::after,
.cos-legendary-frame.cos-frame-eclipse::before,
.cos-legendary-frame.cos-frame-eclipse::after,
.cos-legendary-frame.cos-frame-sakura::before,
.cos-legendary-frame.cos-frame-sakura::after {
  display: block !important;
  opacity: 0.86;
}
.cos-legendary-frame.cos-frame-diamond::before {
  background:
    radial-gradient(circle at 24% 24%, rgba(220, 255, 255, 0.75) 0 2px, transparent 4px),
    radial-gradient(circle at 78% 72%, rgba(168, 234, 255, 0.68) 0 2px, transparent 4px),
    conic-gradient(from 0deg, rgba(160, 242, 255, 0.28), rgba(166, 120, 255, 0.24), rgba(160, 242, 255, 0.28));
  background-size: 130px 130px, 150px 150px, 220% 220%;
  animation: legendary-diamond-drift 7.5s linear infinite;
}
.cos-legendary-frame.cos-frame-diamond::after {
  background:
    linear-gradient(116deg, transparent 18%, rgba(240, 255, 255, 0.48) 50%, transparent 82%),
    radial-gradient(circle at 50% 50%, rgba(122, 232, 255, 0.24), transparent 62%);
  background-size: 180% 100%, 150% 150%;
  animation: legendary-diamond-sweep 5.4s ease-in-out infinite;
}
.cos-legendary-frame.cos-frame-phoenix::before {
  background:
    radial-gradient(circle at 24% 84%, rgba(255, 206, 108, 0.8) 0 2px, transparent 4px),
    radial-gradient(circle at 74% 26%, rgba(255, 126, 56, 0.74) 0 2px, transparent 4px),
    linear-gradient(142deg, rgba(255, 170, 78, 0.32), rgba(255, 82, 0, 0.24), rgba(255, 226, 170, 0.2));
  background-size: 120px 120px, 146px 146px, 220% 220%;
  animation: legendary-phoenix-rise 4.8s linear infinite;
}
.cos-legendary-frame.cos-frame-phoenix::after {
  background:
    radial-gradient(circle at 48% 90%, rgba(255, 240, 184, 0.5), transparent 56%),
    linear-gradient(112deg, transparent 20%, rgba(255, 246, 210, 0.4) 50%, transparent 84%);
  background-size: 160% 160%, 170% 100%;
  animation: legendary-phoenix-heat 3.8s ease-in-out infinite;
}
.cos-legendary-frame.cos-frame-void::before {
  background:
    radial-gradient(circle at 16% 26%, rgba(216, 174, 255, 0.72) 0 2px, transparent 4px),
    radial-gradient(circle at 84% 72%, rgba(116, 98, 255, 0.72) 0 2px, transparent 4px),
    radial-gradient(circle at 50% 50%, rgba(26, 12, 66, 0.5), transparent 60%);
  background-size: 128px 128px, 146px 146px, 180% 180%;
  animation: legendary-void-orbit 8.2s linear infinite;
}
.cos-legendary-frame.cos-frame-void::after {
  background:
    linear-gradient(126deg, rgba(142, 102, 255, 0.28), rgba(22, 8, 58, 0.22), rgba(200, 162, 255, 0.24)),
    repeating-linear-gradient(168deg, rgba(214, 198, 255, 0.16) 0 1px, transparent 1px 11px);
  background-size: 220% 220%, 120% 120%;
  animation: legendary-void-drift-soft 6.8s ease-in-out infinite;
}
.hero-avatar {
  animation: none !important;
  transform: none !important;
}
@keyframes legendary-diamond-drift {
  0% { background-position: 12% 88%, 84% 76%, 0% 50%; }
  50% { background-position: 22% 42%, 74% 30%, 100% 50%; }
  100% { background-position: 30% -8%, 66% -18%, 0% 50%; }
}
@keyframes legendary-diamond-sweep {
  0% { background-position: -120% 50%, 42% 50%; }
  50% { background-position: 50% 50%, 58% 50%; }
  100% { background-position: 160% 50%, 42% 50%; }
}
@keyframes legendary-phoenix-rise {
  0% { background-position: 18% 92%, 78% 88%, 0% 60%; }
  50% { background-position: 26% 52%, 70% 42%, 60% 50%; }
  100% { background-position: 34% 2%, 62% -8%, 100% 40%; }
}
@keyframes legendary-phoenix-heat {
  0% { background-position: 50% 100%, -100% 50%; }
  50% { background-position: 50% 72%, 50% 50%; }
  100% { background-position: 50% 100%, 160% 50%; }
}
@keyframes legendary-void-orbit {
  0% { background-position: 14% 24%, 84% 74%, 50% 50%; }
  50% { background-position: 78% 22%, 22% 76%, 50% 50%; }
  100% { background-position: 14% 24%, 84% 74%, 50% 50%; }
}
@keyframes legendary-void-drift-soft {
  0% { background-position: 0% 50%, 0% 0%; }
  50% { background-position: 100% 50%, 30px -24px; }
  100% { background-position: 0% 50%, -30px 24px; }
}

/* Legacy background class fallbacks (unused ids only) */
.cos-bg-bg_forest,
.cos-bg-bg_lava,
.cos-bg-bg_cyberstorm,
.cos-bg-bg_royal_nebula {
  background-size: cover !important;
}
.cos-bg-bg_forest::before,
.cos-bg-bg_forest::after,
.cos-bg-bg_lava::before,
.cos-bg-bg_lava::after,
.cos-bg-bg_cyberstorm::before,
.cos-bg-bg_cyberstorm::after,
.cos-bg-bg_royal_nebula::before,
.cos-bg-bg_royal_nebula::after {
  display: none !important;
  animation: none !important;
  background: none !important;
}

/* Shop preview rarity rules (final override) */
.shop-preview-frame-wrap .shop-preview-reflect,
.shop-preview-frame-wrap .shop-preview-particles,
.shop-preview-bg .shop-preview-reflect,
.shop-preview-bg .shop-preview-particles {
  display: none !important;
  animation: none !important;
}
.shop-preview-frame-wrap[data-rarity="epic"] .shop-preview-reflect {
  display: block !important;
  opacity: 0.68;
  animation: cosmetic-reflect-sweep 3.2s linear infinite !important;
}
.shop-preview-frame-wrap[data-rarity="legendary"] .shop-preview-reflect {
  display: block !important;
  opacity: 0.76;
  animation: cosmetic-reflect-sweep 2.7s linear infinite !important;
}
.shop-preview-frame-wrap[data-rarity="legendary"] .shop-preview-particles {
  display: block !important;
  opacity: 0.72;
  animation: cosmetic-particle-drift 4.6s linear infinite !important;
}
.shop-preview-bg .shop-preview-reflect {
  display: none !important;
  animation: none !important;
  background: none !important;
}
.shop-preview-bg[data-rarity="legendary"] .shop-preview-particles {
  display: block !important;
  opacity: 0.7;
  animation: cosmetic-particle-drift 4.5s linear infinite !important;
}
.shop-preview-bg .shop-preview-reflect,
.shop-preview-bg .shop-preview-particles {
  box-shadow: none !important;
  filter: none !important;
}
.shop-preview-bg[data-rarity="legendary"][data-bg-id="bg_celestial"] .shop-preview-particles {
  background:
    radial-gradient(circle at 14% 24%, rgba(255, 236, 168, 0.52) 0 1.6px, transparent 2.6px),
    radial-gradient(circle at 82% 76%, rgba(120, 196, 255, 0.46) 0 1.3px, transparent 2.3px),
    radial-gradient(circle at 50% 44%, rgba(255, 206, 118, 0.38) 0 1.2px, transparent 2.2px);
  background-size: 84px 84px, 108px 108px, 92px 92px;
  animation: cosmetic-particle-drift 3.7s linear infinite !important;
}
.shop-preview-bg[data-rarity="legendary"][data-bg-id="bg_graphite_prime"] .shop-preview-particles {
  background:
    radial-gradient(circle at 14% 74%, rgba(255, 255, 255, 0.46) 0 1.5px, transparent 2.5px),
    radial-gradient(circle at 78% 24%, rgba(186, 255, 102, 0.42) 0 1.4px, transparent 2.4px),
    radial-gradient(circle at 52% 46%, rgba(138, 248, 40, 0.36) 0 1.2px, transparent 2.2px);
  background-size: 88px 88px, 114px 114px, 96px 96px;
  animation: cosmetic-particle-drift 3.4s linear infinite !important;
}
.shop-preview-bg[data-rarity="legendary"][data-bg-id="bg_kanji_storm"] .shop-preview-particles {
  background:
    radial-gradient(circle at 14% 26%, rgba(250, 236, 196, 0.46) 0 1.5px, transparent 2.5px),
    radial-gradient(circle at 82% 74%, rgba(232, 206, 148, 0.42) 0 1.3px, transparent 2.3px),
    radial-gradient(circle at 50% 48%, rgba(214, 186, 124, 0.36) 0 1.2px, transparent 2.2px);
  background-size: 84px 84px, 108px 108px, 92px 92px;
  animation: cosmetic-particle-drift 3.6s linear infinite !important;
}
.shop-preview-bg[data-rarity="legendary"][data-bg-id="bg_tribal_ember"] .shop-preview-particles {
  background:
    radial-gradient(circle at 18% 78%, rgba(255, 255, 255, 0.5) 0 1.6px, transparent 2.6px),
    radial-gradient(circle at 76% 24%, rgba(232, 232, 232, 0.44) 0 1.4px, transparent 2.4px),
    radial-gradient(circle at 50% 54%, rgba(196, 196, 196, 0.36) 0 1.2px, transparent 2.2px);
  background-size: 88px 88px, 112px 112px, 96px 96px;
  animation: cosmetic-particle-drift 3.5s linear infinite !important;
}
.shop-preview-bg[data-rarity="legendary"][data-bg-id="bg_draconic"] .shop-preview-particles {
  background:
    radial-gradient(circle at 20% 80%, rgba(255, 218, 166, 0.44) 0 1.6px, transparent 2.6px),
    radial-gradient(circle at 74% 24%, rgba(255, 146, 110, 0.4) 0 1.4px, transparent 2.4px),
    radial-gradient(circle at 48% 54%, rgba(196, 148, 248, 0.32) 0 1.2px, transparent 2.2px);
  background-size: 92px 92px, 118px 118px, 98px 98px;
  animation: cosmetic-particle-drift 3.4s linear infinite !important;
}
.cos-bg-kaleido {
  transform: translateZ(0);
  will-change: background-position, filter;
  background-size: 180% 180%, 150% 150%, 160% 160%, 170% 170%, cover !important;
  animation: legendary-kaleido-pan 7.8s linear infinite, legendary-kaleido-breathe 5.2s ease-in-out infinite;
}
.cos-bg-kaleido[class*="cos-bg-"]::before,
.cos-bg-kaleido[class*="cos-bg-"]::after {
  display: block !important;
  pointer-events: none;
  transform-origin: 50% 50%;
  background-repeat: repeat;
}
.cos-bg-kaleido[class*="cos-bg-"]::before {
  opacity: 0.28 !important;
  background:
    repeating-conic-gradient(from 0deg at 50% 50%, rgba(255, 255, 255, 0.14) 0 6deg, transparent 6deg 17deg),
    repeating-linear-gradient(32deg, rgba(255, 255, 255, 0.08) 0 1px, transparent 1px 11px);
  background-size: 220% 220%, 170% 170%;
  mix-blend-mode: screen;
  animation: legendary-kaleido-spin-a 8.4s linear infinite !important;
}
.cos-bg-kaleido[class*="cos-bg-"]::after {
  opacity: 0.24 !important;
  background:
    repeating-conic-gradient(from 180deg at 50% 50%, rgba(255, 255, 255, 0.1) 0 5deg, transparent 5deg 15deg),
    repeating-linear-gradient(-34deg, rgba(255, 255, 255, 0.06) 0 1px, transparent 1px 12px);
  background-size: 210% 210%, 180% 180%;
  mix-blend-mode: soft-light;
  animation: legendary-kaleido-spin-b 10.6s linear infinite !important;
}
.cos-bg-kaleido[data-bg-id="bg_galaxy"]::before {
  background:
    repeating-conic-gradient(from 0deg at 50% 50%, rgba(204, 130, 255, 0.2) 0 7deg, transparent 7deg 18deg),
    repeating-linear-gradient(34deg, rgba(114, 214, 255, 0.14) 0 1px, transparent 1px 11px);
}
.cos-bg-kaleido[data-bg-id="bg_galaxy"]::after {
  background:
    repeating-conic-gradient(from 180deg at 50% 50%, rgba(128, 176, 255, 0.16) 0 5deg, transparent 5deg 15deg),
    repeating-linear-gradient(-36deg, rgba(214, 168, 255, 0.11) 0 1px, transparent 1px 12px);
}
.cos-bg-kaleido[data-bg-id="bg_celestial"]::before {
  background:
    repeating-conic-gradient(from 0deg at 50% 50%, rgba(255, 219, 110, 0.3) 0 7deg, transparent 7deg 18deg),
    repeating-linear-gradient(34deg, rgba(255, 194, 88, 0.18) 0 1px, transparent 1px 10px);
}
.cos-bg-kaleido[data-bg-id="bg_celestial"]::after {
  background:
    repeating-conic-gradient(from 180deg at 50% 50%, rgba(255, 238, 170, 0.22) 0 5deg, transparent 5deg 14deg),
    repeating-linear-gradient(-32deg, rgba(255, 205, 110, 0.16) 0 1px, transparent 1px 11px);
}
.cos-bg-kaleido[data-bg-id="bg_graphite_prime"]::before {
  background:
    repeating-linear-gradient(108deg, rgba(255, 255, 255, 0.24) 0 2px, transparent 2px 16px),
    repeating-linear-gradient(148deg, rgba(168, 255, 56, 0.24) 0 2px, transparent 2px 18px);
}
.cos-bg-kaleido[data-bg-id="bg_graphite_prime"] {
  filter: saturate(1.26) contrast(1.2);
}
.cos-bg-kaleido[data-bg-id="bg_graphite_prime"]::after {
  background:
    repeating-linear-gradient(96deg, rgba(255, 255, 255, 0.2) 0 1px, transparent 1px 11px),
    repeating-linear-gradient(-36deg, rgba(132, 244, 34, 0.18) 0 1px, transparent 1px 12px);
}
.cos-bg-kaleido[data-bg-id="bg_kanji_storm"]::before {
  background:
    repeating-linear-gradient(90deg, transparent 0 16px, rgba(232, 206, 142, 0.24) 16px 18px, transparent 18px 42px),
    repeating-linear-gradient(0deg, transparent 0 14px, rgba(246, 228, 182, 0.2) 14px 16px, transparent 16px 36px);
}
.cos-bg-kaleido[data-bg-id="bg_kanji_storm"] {
  filter: saturate(1.08) contrast(1.2);
}
.cos-bg-kaleido[data-bg-id="bg_kanji_storm"]::after {
  background:
    repeating-linear-gradient(90deg, transparent 0 26px, rgba(214, 186, 126, 0.2) 26px 30px, transparent 30px 58px),
    repeating-linear-gradient(0deg, transparent 0 20px, rgba(232, 212, 164, 0.16) 20px 22px, transparent 22px 48px);
}
.cos-bg-kaleido[data-bg-id="bg_tribal_ember"]::before {
  background:
    repeating-conic-gradient(from 0deg at 50% 50%, rgba(255, 255, 255, 0.3) 0 9deg, transparent 9deg 19deg),
    repeating-linear-gradient(42deg, rgba(255, 255, 255, 0.2) 0 1px, transparent 1px 9px);
}
.cos-bg-kaleido[data-bg-id="bg_tribal_ember"] {
  filter: saturate(0.18) contrast(1.34);
}
.cos-bg-kaleido[data-bg-id="bg_tribal_ember"]::after {
  background:
    repeating-conic-gradient(from 180deg at 50% 50%, rgba(244, 244, 244, 0.24) 0 7deg, transparent 7deg 16deg),
    repeating-linear-gradient(-42deg, rgba(222, 222, 222, 0.16) 0 1px, transparent 1px 10px);
}
.cos-bg-kaleido[data-bg-id="bg_draconic"]::before {
  background:
    repeating-conic-gradient(from 0deg at 50% 50%, rgba(255, 178, 98, 0.22) 0 7deg, transparent 7deg 18deg),
    repeating-linear-gradient(30deg, rgba(255, 92, 64, 0.16) 0 1px, transparent 1px 10px);
}
.cos-bg-kaleido[data-bg-id="bg_draconic"]::after {
  background:
    repeating-conic-gradient(from 180deg at 50% 50%, rgba(186, 104, 255, 0.16) 0 5deg, transparent 5deg 14deg),
    repeating-linear-gradient(-38deg, rgba(255, 214, 144, 0.12) 0 1px, transparent 1px 12px);
}
@media (prefers-reduced-motion: reduce) {
  .cos-bg-kaleido {
    animation: none !important;
    filter: saturate(1.08) contrast(1.04) !important;
  }
  .cos-bg-kaleido[class*="cos-bg-"]::before,
  .cos-bg-kaleido[class*="cos-bg-"]::after {
    animation: none !important;
    opacity: 0.14 !important;
  }
}
/* Static background policy: epic + legendary without overlay and without motion */
.cos-bg-bg_sunset,
.cos-bg-bg_aurora,
.cos-bg-bg_voltage,
.cos-bg-bg_galaxy,
.cos-bg-bg_celestial,
.cos-bg-bg_draconic,
.cos-bg-bg_graphite_prime,
.cos-bg-bg_kanji_storm,
.cos-bg-bg_tribal_ember,
.cos-bg-bg_graphite_havoc,
.cos-bg-bg_kanji_reactor,
.cos-bg-bg_tribal_cipher {
  animation: none !important;
  filter: none !important;
  box-shadow: none !important;
  background-repeat: no-repeat, no-repeat, no-repeat !important;
  background-position: center center, center center, center center !important;
  background-size: 82% 82%, 100% 100%, 100% 100% !important;
}
.cos-bg-bg_sunset::before,
.cos-bg-bg_sunset::after,
.cos-bg-bg_aurora::before,
.cos-bg-bg_aurora::after,
.cos-bg-bg_voltage::before,
.cos-bg-bg_voltage::after,
.cos-bg-bg_galaxy::before,
.cos-bg-bg_galaxy::after,
.cos-bg-bg_celestial::before,
.cos-bg-bg_celestial::after,
.cos-bg-bg_draconic::before,
.cos-bg-bg_draconic::after,
.cos-bg-bg_graphite_prime::before,
.cos-bg-bg_graphite_prime::after,
.cos-bg-bg_kanji_storm::before,
.cos-bg-bg_kanji_storm::after,
.cos-bg-bg_tribal_ember::before,
.cos-bg-bg_tribal_ember::after,
.cos-bg-bg_graphite_havoc::before,
.cos-bg-bg_graphite_havoc::after,
.cos-bg-bg_kanji_reactor::before,
.cos-bg-bg_kanji_reactor::after,
.cos-bg-bg_tribal_cipher::before,
.cos-bg-bg_tribal_cipher::after {
  display: none !important;
  animation: none !important;
  background: none !important;
}
.shop-preview-bg[data-rarity="epic"] .shop-preview-particles,
.shop-preview-bg[data-rarity="legendary"] .shop-preview-particles {
  display: none !important;
  animation: none !important;
  background: none !important;
}
.shop-preview-bg[data-rarity="epic"] .shop-preview-reflect,
.shop-preview-bg[data-rarity="legendary"] .shop-preview-reflect {
  display: none !important;
  animation: none !important;
  background: none !important;
}
.cos-bg-kaleido,
.cos-bg-kaleido[class*="cos-bg-"]::before,
.cos-bg-kaleido[class*="cos-bg-"]::after {
  animation: none !important;
  background: none !important;
}
/* Legendary text backgrounds: neon sign flicker (outdoor style) */
.cos-bg-bg_graphite_prime::before,
.cos-bg-bg_kanji_storm::before,
.cos-bg-bg_tribal_ember::before,
.cos-bg-bg_graphite_havoc::before,
.cos-bg-bg_kanji_reactor::before,
.cos-bg-bg_tribal_cipher::before {
  display: block !important;
  background: inherit !important;
  background-repeat: no-repeat !important;
  background-position: center center !important;
  background-size: 82% 82%, 100% 100%, 100% 100% !important;
  mix-blend-mode: screen !important;
  opacity: 0.44 !important;
  filter: blur(2.4px) saturate(1.74) brightness(1.24) contrast(1.12);
  animation: legend-neon-sign-flicker 2.8s linear infinite, legend-neon-sign-surge 5.4s ease-in-out infinite !important;
}
.cos-bg-bg_graphite_prime::after,
.cos-bg-bg_kanji_storm::after,
.cos-bg-bg_tribal_ember::after,
.cos-bg-bg_graphite_havoc::after,
.cos-bg-bg_kanji_reactor::after,
.cos-bg-bg_tribal_cipher::after {
  display: block !important;
  background: inherit !important;
  background-repeat: no-repeat !important;
  background-position: center center !important;
  background-size: 82% 82%, 100% 100%, 100% 100% !important;
  mix-blend-mode: lighten !important;
  opacity: 0.28 !important;
  filter: blur(6.4px) saturate(1.66) brightness(1.16) contrast(1.08);
  animation: legend-neon-sign-flicker-soft 3.6s linear infinite, legend-neon-sign-surge-soft 6.2s ease-in-out infinite !important;
}
@keyframes legend-neon-sign-flicker {
  0%, 4%, 10%, 14%, 19%, 28%, 36%, 46%, 55%, 63%, 72%, 80%, 88%, 100% {
    opacity: 0.5;
    filter: blur(2.4px) saturate(1.8) brightness(1.36) contrast(1.16);
  }
  5%, 20%, 37%, 56%, 73%, 89% {
    opacity: 0.22;
    filter: blur(3.4px) saturate(1.28) brightness(0.72) contrast(1.02);
  }
  6.3%, 21.2%, 38.2%, 57.4%, 74.2%, 90.2% {
    opacity: 0.06;
    filter: blur(4.9px) saturate(1.02) brightness(0.36) contrast(0.96);
  }
  7.1%, 22.1%, 39.1%, 58.1%, 75.1%, 91.1% {
    opacity: 0.38;
    filter: blur(3px) saturate(1.62) brightness(1.08) contrast(1.12);
  }
}
@keyframes legend-neon-sign-flicker-soft {
  0%, 8%, 14%, 22%, 31%, 40%, 50%, 60%, 69%, 78%, 86%, 100% {
    opacity: 0.32;
    filter: blur(6.4px) saturate(1.72) brightness(1.24) contrast(1.1);
  }
  9%, 23%, 41%, 61%, 79%, 87% {
    opacity: 0.17;
    filter: blur(7.8px) saturate(1.2) brightness(0.72) contrast(1.02);
  }
  10.2%, 24.2%, 42.2%, 62.2%, 80.2%, 88.2% {
    opacity: 0.08;
    filter: blur(9.6px) saturate(1.02) brightness(0.46) contrast(0.96);
  }
  11%, 25%, 43%, 63%, 81%, 89% {
    opacity: 0.24;
    filter: blur(7px) saturate(1.46) brightness(0.98) contrast(1.06);
  }
}
@keyframes legend-neon-sign-surge {
  0%, 16%, 34%, 52%, 71%, 100% {
    opacity: 0.44;
    transform: scale(1);
  }
  18%, 36%, 54%, 73% {
    opacity: 0.56;
    transform: scale(1.01);
  }
  19.2%, 37.3%, 55.1%, 74.2% {
    opacity: 0.08;
    transform: scale(0.996);
  }
  20%, 38%, 56%, 75% {
    opacity: 0.5;
    transform: scale(1.012);
  }
}
@keyframes legend-neon-sign-surge-soft {
  0%, 26%, 54%, 100% {
    opacity: 0.28;
    transform: scale(1);
  }
  12%, 40%, 68%, 86% {
    opacity: 0.36;
    transform: scale(1.01);
  }
  13.6%, 41.7%, 69.4%, 87.6% {
    opacity: 0.1;
    transform: scale(0.997);
  }
}
@media (prefers-reduced-motion: reduce) {
  .cos-bg-bg_graphite_prime::before,
  .cos-bg-bg_kanji_storm::before,
  .cos-bg-bg_tribal_ember::before,
  .cos-bg-bg_graphite_havoc::before,
  .cos-bg-bg_kanji_reactor::before,
  .cos-bg-bg_tribal_cipher::before,
  .cos-bg-bg_graphite_prime::after,
  .cos-bg-bg_kanji_storm::after,
  .cos-bg-bg_tribal_ember::after,
  .cos-bg-bg_graphite_havoc::after,
  .cos-bg-bg_kanji_reactor::after,
  .cos-bg-bg_tribal_cipher::after {
    animation: none !important;
    opacity: 0.14 !important;
  }
}
.shop-equipped-summary {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
  margin: 10px 0 12px;
}
.shop-equipped-chip {
  display: grid;
  gap: 2px;
  border: 1px solid rgba(120, 136, 216, 0.32);
  border-radius: 10px;
  padding: 7px 9px;
  background: rgba(14, 18, 44, 0.7);
}
.shop-equipped-chip-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: rgba(173, 186, 232, 0.88);
}
.shop-equipped-chip-value {
  font-size: 12px;
  font-weight: 700;
  color: rgba(240, 245, 255, 0.96);
}
.shop-item-name {
  font-size: 11px;
  font-weight: 700;
  color: #eef4ff;
  text-align: center;
  line-height: 1.25;
  min-height: 28px;
  width: fit-content;
  max-width: 100%;
  padding: 3px 8px;
  border-radius: 8px;
  border: 1px solid rgba(148, 178, 255, 0.42);
  background: #122247;
}
.shop-item-rarity {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  border-radius: 999px;
  padding: 3px 9px;
  border: 1px solid transparent;
  line-height: 1;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
}
.shop-item-rarity.rarity-common {
  color: #b6bcc8;
  background: rgba(182, 188, 200, 0.16);
  border-color: rgba(182, 188, 200, 0.34);
}
.shop-item-rarity.rarity-uncommon {
  color: #9bf5ae;
  background: rgba(155, 245, 174, 0.18);
  border-color: rgba(155, 245, 174, 0.4);
}
.shop-item-rarity.rarity-rare {
  color: #8fe4ff;
  background: rgba(143, 228, 255, 0.16);
  border-color: rgba(143, 228, 255, 0.4);
}
.shop-item-rarity.rarity-epic {
  color: #d29bff;
  background: rgba(210, 155, 255, 0.18);
  border-color: rgba(210, 155, 255, 0.42);
}
.shop-item-rarity.rarity-legendary {
  color: #ffbe72;
  background: rgba(255, 190, 114, 0.2);
  border-color: rgba(255, 190, 114, 0.45);
}
.shop-item[data-rarity="legendary"] {
  box-shadow: inset 0 1px 0 rgba(255, 190, 114, 0.24), 0 8px 18px rgba(255, 124, 0, 0.18);
}
.shop-item[data-rarity="epic"] {
  box-shadow: inset 0 1px 0 rgba(210, 155, 255, 0.2), 0 8px 16px rgba(170, 83, 255, 0.14);
}
.shop-btn {
  width: 100%;
  padding: 7px 8px;
  border-radius: 10px;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  border: none;
  text-align: center;
  transition: all 0.2s;
}
.shop-btn:active { transform: scale(0.95); }
.shop-btn-buy {
  background: var(--gradient-primary);
  color: white;
  box-shadow: 0 2px 10px var(--primary-glow);
}
.shop-btn-buy.disabled {
  opacity: 0.4;
  pointer-events: none;
  box-shadow: none;
}
.shop-btn-equip {
  background: rgba(108, 99, 255, 0.15);
  color: var(--primary);
  border: 1px solid rgba(108, 99, 255, 0.3);
}
.shop-btn-equip:hover {
  background: rgba(108, 99, 255, 0.22);
}
.shop-btn-equip.is-equipped {
  background: rgba(108, 99, 255, 0.22);
}
.shop-btn-equip:disabled {
  opacity: 0.55;
  cursor: default;
}
.shop-btn-equipped {
  background: rgba(108, 99, 255, 0.15);
  color: var(--primary);
  border: 1px solid rgba(108, 99, 255, 0.3);
  font-size: 10px;
  line-height: 1.25;
  min-height: 34px;
  white-space: normal;
  padding: 6px 8px;
}
.shop-btn-unequip {
  background: rgba(255, 107, 107, 0.12);
  color: #ff6b6b;
  border: 1px solid rgba(255, 107, 107, 0.3);
  font-size: 11px;
  margin-top: 4px;
}
.shop-btn-unequip:hover {
  background: rgba(255, 107, 107, 0.22);
}
.shop-btn-owned {
  background: rgba(0,212,170,0.1);
  color: var(--secondary);
  font-size: 12px;
  padding: 8px 12px;
  border-radius: 10px;
  font-weight: 700;
  text-align: center;
}
@media (min-width: 560px) {
  .shop-equipped-summary {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* Coin particle animation */
.coin-particle {
  position: fixed;
  font-size: 20px;
  top: 50%;
  z-index: 1000;
  pointer-events: none;
  animation: coin-fly 1s ease-out forwards;
}
@keyframes coin-fly {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translateY(-120px) scale(0.5); opacity: 0; }
}

/* Purchase glow animation */
@keyframes purchase-glow {
  0% { box-shadow: 0 0 0 rgba(108,99,255,0); }
  50% { box-shadow: 0 0 30px rgba(108,99,255,0.6), 0 0 60px rgba(108,99,255,0.3); }
  100% { box-shadow: 0 0 0 rgba(108,99,255,0); }
}

/* Scrollbar */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--bg3); border-radius: 2px; }

/* Fallback for browsers without backdrop-filter */
@supports not (backdrop-filter: blur(8px)) {
  .stat-card-modern, .ranking-item, .option-btn,
  .question-card, .feedback-explain, .result-stat,
  .stats-card, .achievement-card, .audio-option,
  .lang-card, .topic-card, .diff-card, .avatar-option,
  .ranking-tab, .btn-secondary, .shop-item, .shop-tab {
    background: var(--bg2);
    border-color: var(--bg3);
  }
}

@media (max-width: 768px) {
  .shop-equipped-summary {
    grid-template-columns: 1fr;
  }
  .pve-quiz-shell {
    margin-bottom: 8px;
    padding: 9px 10px;
    border-radius: 12px;
  }
  .pve-quiz-mode,
  .pve-quiz-difficulty {
    font-size: 10px;
  }
  .pve-quiz-meta {
    margin-top: 6px;
    font-size: 11px;
  }
  .quiz-info-main {
    gap: 7px;
    flex-wrap: wrap;
  }
  .btn-quiz-menu {
    width: 34px;
    height: 34px;
    font-size: 15px;
  }
  .pve-quiz-body {
    padding-bottom: 8px;
  }
  .pve-result-content {
    padding: 8px 6px calc(104px + var(--safe-bottom));
  }
  .quiz-action-modal {
    border-radius: 16px;
    padding: 14px 12px 12px;
    gap: 8px;
  }
  .quiz-action-title {
    font-size: 16px;
  }
  .quiz-action-subtitle {
    font-size: 11px;
  }
  #arena-admin-modal {
    padding: 12px;
  }
  .arena-admin-card {
    width: min(100%, 97vw);
    max-height: 92dvh;
    padding: 14px 12px;
    border-radius: 17px;
    gap: 10px;
  }
  .arena-admin-card h3 {
    font-size: 21px;
  }
  .arena-admin-panel {
    gap: 9px;
  }
  .arena-admin-toolbar {
    justify-content: flex-start;
    padding: 0;
  }
  .arena-admin-updated-at {
    font-size: 11px;
  }
  .arena-admin-sections {
    grid-template-columns: 1fr;
    grid-template-rows: minmax(0, 1fr) minmax(0, 1fr);
    gap: 10px;
  }
  .arena-admin-section {
    max-height: none;
    border-radius: 15px;
    padding: 9px;
    gap: 8px;
  }
  .arena-admin-section-head h4 {
    font-size: 14px;
  }
  .arena-admin-section-hint {
    font-size: 10px;
    padding: 3px 9px;
  }
  .arena-admin-list,
  .arena-admin-history-list {
    padding: 7px;
    gap: 7px;
    border-radius: 13px;
  }
  .arena-admin-item,
  .arena-admin-history-item {
    border-radius: 15px;
    padding: 8px 9px;
  }
  .arena-admin-item-id,
  .arena-admin-history-id {
    font-size: 11px;
  }
  .arena-admin-item-meta,
  .arena-admin-history-time {
    font-size: 11px;
    white-space: normal;
    line-height: 1.2;
  }
  .arena-admin-avatar,
  .arena-admin-history-avatar {
    font-size: 26px;
  }
  .arena-admin-name,
  .arena-admin-history-name {
    font-size: 12px;
  }
  .arena-admin-score,
  .arena-admin-history-score {
    min-width: 66px;
    padding: 4px 9px;
    font-size: clamp(15px, 4.2vw, 20px);
  }
}

@media (max-width: 430px) {
  .select-subtitle {
    font-size: 12px;
    margin-bottom: 11px;
  }
  .category-section {
    gap: 8px;
    margin-bottom: 18px;
  }
  .category-label {
    font-size: 11px;
    letter-spacing: 1px;
  }
  .category-desc {
    font-size: 12px;
  }
  .lang-grid {
    gap: 11px;
    padding-bottom: 12px;
  }
  .lang-card {
    padding: 12px 11px 11px 13px;
    gap: 10px;
    border-radius: 16px;
  }
  .lang-icon {
    width: 46px;
    height: 46px;
    font-size: 25px;
    border-radius: 12px;
  }
  .lang-name {
    font-size: 15px;
  }
  .lang-desc {
    font-size: 12px;
    margin-top: 2px;
  }
  .lang-meta {
    margin-top: 7px;
  }
  .lang-pct {
    font-size: 12px;
  }
  .topic-header-card {
    border-radius: 16px;
    padding: 12px;
    margin-bottom: 10px;
  }
  .topic-header-title {
    font-size: 18px;
  }
  .topic-header-desc {
    font-size: 12px;
  }
  .topic-header-meta {
    gap: 5px;
  }
  .topic-header-meta span {
    font-size: 10px;
    padding: 3px 8px;
  }
  .topic-list {
    gap: 10px;
  }
  .topic-card {
    padding: 12px 10px 11px;
    gap: 9px;
    border-radius: 16px;
  }
  .topic-emoji {
    width: 40px;
    height: 40px;
    font-size: 23px;
    border-radius: 10px;
  }
  .topic-name-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }
  .topic-name {
    font-size: 15px;
  }
  .topic-count {
    font-size: 9px;
    padding: 3px 7px;
  }
  .topic-desc {
    font-size: 12px;
  }
  .topic-progress-row {
    margin-top: 7px;
    gap: 7px;
  }
  .topic-progress-pct {
    font-size: 10px;
  }
  .topic-badge {
    font-size: 10px;
    padding: 4px 7px;
  }
  .topic-arrow {
    display: none;
  }
  #screen-login {
    padding-top: calc(10px + var(--safe-top));
    padding-bottom: calc(10px + var(--safe-bottom));
  }
  .login-shell {
    width: 100%;
  }
  .login-bg-grid {
    inset: 8px;
    border-radius: 22px;
  }
  .login-title {
    font-size: clamp(38px, 10.6vw, 52px);
  }
  .login-logo-wrap {
    width: 92px;
    height: 92px;
  }
  .login-logo-symbol {
    font-size: 46px;
  }
  .login-subtitle {
    font-size: 12px;
    line-height: 1.44;
  }
  .login-card {
    padding: 16px 14px;
    gap: 14px;
    border-radius: 22px;
  }
  .login-pill {
    font-size: 9px;
    padding: 5px 8px;
  }
  .login-auth-panel {
    padding: 12px;
    gap: 8px;
  }
  .login-google-btn {
    min-height: 50px;
    font-size: 14px;
  }
  .update-notice-bar {
    top: calc(6px + var(--safe-top));
    width: calc(100% - 12px);
  }
  .update-notice-inner {
    gap: 8px;
    padding: 7px 8px 7px 9px;
    border-radius: 12px;
  }
  .update-notice-title {
    font-size: 11px;
  }
  .update-notice-text {
    font-size: 9px;
  }
  .update-notice-btn {
    min-height: 30px;
    min-width: 82px;
    padding: 5px 10px;
    font-size: 11px;
  }
  .cookie-consent-banner {
    width: calc(100% - 12px);
    bottom: calc(10px + var(--safe-bottom));
  }
  .cookie-consent-card {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
    padding: 11px;
  }
  .cookie-consent-actions {
    width: 100%;
    justify-content: stretch;
  }
  .cookie-consent-btn {
    flex: 1;
  }
  .ranking-item {
    grid-template-columns: 30px 42px minmax(0, 1fr) auto;
    column-gap: 8px;
    padding: 10px 10px;
  }
  .rank-name { font-size: 12.5px; }
  .rank-meta { font-size: 10px; }
  .rank-xp { font-size: 11px; }
  .tier-badge-rank {
    max-width: none;
    padding: 2px 6px;
    font-size: 9px;
  }
  .hero-content {
    display: grid;
    grid-template-columns: 56px minmax(0, 1fr);
    gap: 10px;
    align-items: center;
    padding-right: 0;
    padding-top: 0;
    min-height: 76px;
  }
  .hero-avatar-wrap {
    width: 56px;
    height: 56px;
  }
  .hero-avatar {
    width: 56px;
    height: 56px;
    font-size: 29px;
  }
  .hero-info {
    min-width: 0;
  }
  .hero-name {
    font-size: 15px;
  }
  .hero-level-pill {
    min-height: 22px;
    padding: 3px 9px;
    font-size: 10px;
  }
  .hero-meta {
    flex-wrap: wrap;
    row-gap: 3px;
    column-gap: 5px;
    margin-bottom: 5px;
    font-size: 11px;
  }
  .hero-dot {
    display: none;
  }
  .hero-badges-line {
    gap: 5px 6px;
    margin-bottom: 5px;
  }
  .hero-badges-group {
    flex-wrap: wrap;
    gap: 5px;
  }
  .hero-badges-group .tier-badge {
    font-size: 9px;
    padding: 2px 6px;
    max-width: none;
  }
  .hero-coins {
    padding: 3px 7px;
    border-width: 1px;
  }
  .hero-coins-icon {
    font-size: 12px;
  }
  .hero-coins-value {
    font-size: 12px;
  }
  .hero-logout {
    padding: 5px 10px;
    font-size: 11px;
  }
  .diff-card {
    padding: 16px 12px;
    gap: 6px;
  }
  .diff-meta {
    font-size: 10px;
  }
  .diff-progress {
    width: 100%;
  }
  .match-accept-card {
    max-width: 100%;
    width: 97vw;
    padding: 16px 12px 14px;
  }
  .match-accept-players {
    gap: 7px;
    grid-template-columns: minmax(0, 1fr) 34px minmax(0, 1fr);
  }
  .match-accept-vs {
    width: 34px;
    height: 34px;
    font-size: 20px;
  }
  .match-accept-player-card {
    min-height: 136px;
    padding: 10px 8px 32px;
    border-radius: 16px;
  }
  .match-accept-avatar {
    width: 36px;
    height: 36px;
    font-size: 19px;
  }
  .match-accept-name-block .pvp-player-name {
    font-size: 12px;
    line-height: 1.16;
  }
  .match-accept-meta {
    font-size: 10px;
    line-height: 1.1;
  }
  .match-accept-dot {
    top: 8px;
    right: 8px;
    inset: 8px 8px auto auto;
    left: auto;
    bottom: auto;
    transform: none;
    width: 9px;
    height: 9px;
  }
  .match-accept-player-card > .match-accept-dot {
    top: 8px !important;
    right: 8px !important;
    left: auto !important;
    bottom: auto !important;
    transform: none !important;
  }
  .match-accept-player .match-accept-state {
    font-size: 10px;
    left: 50%;
    right: auto;
    transform: translateX(-50%);
    bottom: 8px;
    max-width: calc(100% - 12px);
    padding: 2px 7px;
  }
  .pvp-emoji-editor-list {
    grid-template-columns: repeat(5, minmax(0, 1fr));
  }
  .pvp-emoji-slots {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
  #arena-admin-modal {
    padding: 10px;
  }
  .arena-admin-card {
    width: min(100%, 96vw);
    max-height: 92dvh;
    padding: 12px 10px;
    border-radius: 16px;
    gap: 8px;
  }
  .arena-admin-card h3 {
    font-size: 20px;
    margin-bottom: 0;
  }
  .arena-admin-auth-box {
    gap: 8px;
  }
  .arena-admin-auth-label {
    font-size: 10px;
  }
  .arena-admin-panel {
    gap: 8px;
  }
  .arena-admin-toolbar {
    justify-content: flex-start;
    gap: 6px;
    padding: 0;
  }
  .arena-admin-updated-at {
    font-size: 11px;
  }
  .arena-admin-sections {
    grid-template-columns: 1fr;
    grid-template-rows: minmax(0, 1fr) minmax(0, 1fr);
    gap: 8px;
  }
  .arena-admin-section {
    padding: 8px;
    max-height: none;
    border-radius: 14px;
    gap: 8px;
  }
  .arena-admin-section-head {
    gap: 6px;
  }
  .arena-admin-section-head h4 {
    font-size: 13px;
  }
  .arena-admin-section-hint {
    font-size: 10px;
    padding: 3px 8px;
  }
  .arena-admin-list,
  .arena-admin-history-list {
    gap: 6px;
    padding: 6px;
    padding-right: 4px;
    border-radius: 12px;
  }
  .arena-admin-item,
  .arena-admin-history-item {
    gap: 6px;
    padding: 8px;
    border-radius: 14px;
  }
  .arena-admin-item-top {
    align-items: center;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 6px;
    margin-bottom: 0;
  }
  .arena-admin-item-id-wrap {
    width: auto;
    flex: 1 1 180px;
    min-width: 0;
    max-width: 100%;
  }
  .arena-admin-item-meta {
    margin-left: auto;
    text-align: right;
    max-width: 100%;
  }
  .arena-admin-history-id-wrap {
    width: 100%;
    gap: 6px;
  }
  .arena-admin-item-id,
  .arena-admin-history-id {
    font-size: 11px;
  }
  .arena-admin-item-meta,
  .arena-admin-history-time {
    font-size: 11px;
    line-height: 1.2;
    white-space: normal;
  }
  .arena-admin-versus,
  .arena-admin-history-versus {
    grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr);
    gap: 6px;
  }
  .arena-admin-player,
  .arena-admin-history-player {
    gap: 4px;
  }
  .arena-admin-avatar,
  .arena-admin-history-avatar {
    font-size: 24px;
  }
  .arena-admin-name,
  .arena-admin-history-name {
    font-size: 12px;
  }
  .arena-admin-botcat {
    font-size: 9px;
    padding: 3px 6px;
  }
  .arena-admin-score,
  .arena-admin-history-score {
    min-width: 64px;
    padding: 3px 8px;
    font-size: clamp(14px, 5.2vw, 20px);
  }
  .arena-admin-history-result {
    font-size: 10px;
    line-height: 1.2;
    padding-top: 5px;
  }
  .arena-admin-source-badge {
    font-size: 8px;
    padding: 3px 6px;
  }
}

@media (max-width: 360px) {
  .category-label {
    font-size: 10px;
  }
  .category-desc {
    font-size: 11px;
  }
  .lang-card {
    padding: 11px 10px;
    gap: 8px;
  }
  .lang-icon {
    width: 40px;
    height: 40px;
    font-size: 21px;
  }
  .lang-name {
    font-size: 14px;
  }
  .lang-desc {
    font-size: 11px;
  }
  .lang-meta {
    gap: 6px;
    margin-top: 6px;
  }
  .topic-header-title {
    font-size: 16px;
  }
  .topic-header-desc {
    font-size: 11px;
  }
  .topic-card {
    padding: 11px 9px;
    gap: 8px;
  }
  .topic-emoji {
    width: 36px;
    height: 36px;
    font-size: 20px;
  }
  .topic-name {
    font-size: 14px;
  }
  .topic-desc {
    font-size: 11px;
  }
  .topic-badge {
    font-size: 9px;
    padding: 3px 6px;
  }
  .login-title {
    font-size: clamp(32px, 10.8vw, 42px);
  }
  .login-logo-wrap {
    width: 82px;
    height: 82px;
  }
  .login-logo-symbol {
    font-size: 38px;
  }
  .login-pill-row {
    gap: 6px;
  }
  .login-pill {
    font-size: 9px;
    padding: 4px 7px;
  }
  .login-card {
    padding: 14px 12px;
    gap: 12px;
  }
  .login-auth-panel {
    padding: 10px;
  }
  .login-google-btn {
    min-height: 46px;
    font-size: 13px;
  }
  .update-notice-btn {
    min-width: 74px;
    font-size: 10px;
    padding: 5px 9px;
  }
  .update-notice-title {
    font-size: 10px;
  }
  .update-notice-text {
    font-size: 8px;
  }
  .cookie-consent-title {
    font-size: 12px;
  }
  .cookie-consent-text {
    font-size: 10px;
  }
  .cookie-consent-btn {
    min-height: 32px;
    font-size: 10px;
  }
  .user-profile-hero {
    padding: 12px;
    border-radius: 18px;
  }
  .hero-content {
    grid-template-columns: 52px minmax(0, 1fr);
    gap: 8px;
    padding-right: 0;
    padding-top: 0;
    min-height: 70px;
  }
  .hero-avatar-wrap {
    width: 52px;
    height: 52px;
  }
  .hero-avatar {
    width: 52px;
    height: 52px;
    font-size: 26px;
  }
  .hero-name {
    font-size: 14px;
  }
  .hero-level-pill {
    min-height: 20px;
    padding: 2px 8px;
    font-size: 10px;
  }
  .hero-badges-group .tier-badge {
    max-width: none;
  }
  #arena-admin-modal {
    padding: 8px;
  }
  .arena-admin-card {
    padding: 10px 8px;
    gap: 7px;
  }
  .arena-admin-card h3 {
    font-size: 18px;
  }
  .arena-admin-section {
    padding: 7px;
  }
  .arena-admin-avatar,
  .arena-admin-history-avatar {
    font-size: 22px;
  }
  .arena-admin-name,
  .arena-admin-history-name {
    font-size: 11px;
  }
  .arena-admin-score,
  .arena-admin-history-score {
    min-width: 58px;
    font-size: clamp(13px, 4.8vw, 17px);
    padding: 3px 7px;
  }
  .hero-logout {
    padding: 4px 8px;
    font-size: 10px;
  }
  .pvp-emoji-editor-list {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
  .pvp-emoji-slots {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.15s !important;
  }
}

/* Final frame rarity mapping */
:root {
  --frame-inner-bg-default: rgba(19, 27, 49, 0.9);
}

.shop-preview-frame[class*="cos-frame-"],
.hero-avatar[class*="cos-frame-"],
.rank-avatar[class*="cos-frame-"],
.pvp-player-avatar[class*="cos-frame-"] {
  animation: none !important;
  transform: none !important;
  filter: none !important;
}
.shop-preview-frame[class*="cos-frame-"]::before,
.shop-preview-frame[class*="cos-frame-"]::after,
.hero-avatar[class*="cos-frame-"]::before,
.hero-avatar[class*="cos-frame-"]::after,
.rank-avatar[class*="cos-frame-"]::before,
.rank-avatar[class*="cos-frame-"]::after,
.pvp-player-avatar[class*="cos-frame-"]::before,
.pvp-player-avatar[class*="cos-frame-"]::after {
  display: none !important;
  animation: none !important;
}

/* Common: solid border, default inner background, no effects */
.shop-preview-frame.cos-frame-default,
.hero-avatar.cos-frame-default,
.rank-avatar.cos-frame-default,
.pvp-player-avatar.cos-frame-default,
.cos-frame-default {
  border: 3px solid var(--primary) !important;
  background-image: none !important;
  background: var(--frame-inner-bg-default) !important;
  box-shadow: none !important;
}
.shop-preview-frame.cos-frame-slate,
.hero-avatar.cos-frame-slate,
.rank-avatar.cos-frame-slate,
.pvp-player-avatar.cos-frame-slate,
.cos-frame-slate {
  border: 3px solid #7f8aa4 !important;
  background-image: none !important;
  background: var(--frame-inner-bg-default) !important;
}
.shop-preview-frame.cos-frame-amber,
.hero-avatar.cos-frame-amber,
.rank-avatar.cos-frame-amber,
.pvp-player-avatar.cos-frame-amber,
.cos-frame-amber {
  border: 3px solid #c7863a !important;
  background-image: none !important;
  background: var(--frame-inner-bg-default) !important;
}
.shop-preview-frame.cos-frame-ruby,
.hero-avatar.cos-frame-ruby,
.rank-avatar.cos-frame-ruby,
.pvp-player-avatar.cos-frame-ruby,
.cos-frame-ruby {
  border: 3px solid #ff5778 !important;
  background-image: none !important;
  background: rgba(66, 26, 40, 0.96) !important;
}
.shop-preview-frame.cos-frame-lime,
.hero-avatar.cos-frame-lime,
.rank-avatar.cos-frame-lime,
.pvp-player-avatar.cos-frame-lime,
.cos-frame-lime {
  border: 3px solid #67e57e !important;
  background-image: none !important;
  background: rgba(18, 52, 34, 0.96) !important;
}
[class*="cos-frame-"].cos-frame-default::before,
[class*="cos-frame-"].cos-frame-default::after {
  display: none !important;
  content: none !important;
}

/* Uncommon: gradient border, default inner background, no effects */
.cos-frame-gold {
  border: 3px solid #f0bf58 !important;
  background-image:
    linear-gradient(var(--frame-inner-bg-default), var(--frame-inner-bg-default)),
    linear-gradient(132deg, #ffcf6a, #ffd700, #ffb347) !important;
  background-origin: border-box !important;
  background-clip: padding-box, border-box !important;
  box-shadow: none !important;
}

/* Rare: gradient border, smooth themed inner background, no effects */
.cos-frame-fire {
  border: 3px solid #ff8248 !important;
  background-image:
    linear-gradient(145deg, rgba(75, 28, 18, 0.94), rgba(120, 44, 18, 0.9)),
    linear-gradient(132deg, #ff9b5d, #ff5f28, #ffbf7a) !important;
  background-origin: border-box !important;
  background-clip: padding-box, border-box !important;
  box-shadow: none !important;
}
.cos-frame-ice {
  background-image:
    linear-gradient(145deg, rgba(20, 56, 82, 0.94), rgba(38, 86, 118, 0.9)),
    linear-gradient(132deg, #7adfff, #4bbcff, #a9ebff) !important;
  box-shadow: none !important;
}
.cos-frame-ghost {
  background-image:
    linear-gradient(145deg, rgba(45, 50, 74, 0.94), rgba(72, 80, 108, 0.9)),
    linear-gradient(132deg, #c8d2ff, #9aa7df, #e2e8ff) !important;
  box-shadow: none !important;
}

/* Epic: gradient border, soft neon, smooth themed inner background */
.cos-frame-neon {
  background-image:
    linear-gradient(145deg, rgba(26, 18, 62, 0.96), rgba(44, 32, 98, 0.92), rgba(24, 74, 102, 0.9)),
    linear-gradient(132deg, #dd8bff, #9a4cff, #5ce6ff) !important;
  box-shadow: inset 0 0 10px rgba(170, 102, 255, 0.28), inset 0 0 18px rgba(84, 196, 255, 0.22) !important;
}
.cos-frame-rainbow {
  background-image:
    linear-gradient(145deg, rgba(34, 26, 82, 0.96), rgba(48, 34, 104, 0.92), rgba(34, 74, 112, 0.9)),
    linear-gradient(132deg, #ff4b91, #ff9e3d, #45d5a0, #58a0ff, #bd67ff, #ff4b91) !important;
  box-shadow: inset 0 0 10px rgba(180, 122, 255, 0.24), inset 0 0 18px rgba(88, 160, 255, 0.2) !important;
}
.cos-frame-matrix {
  background-image:
    linear-gradient(145deg, rgba(10, 38, 24, 0.96), rgba(16, 58, 34, 0.92), rgba(18, 88, 50, 0.9)),
    linear-gradient(132deg, #a6ffb8, #3de96e, #74ffd0) !important;
  box-shadow: inset 0 0 10px rgba(84, 224, 124, 0.24), inset 0 0 18px rgba(116, 255, 170, 0.18) !important;
}

/* Legendary frames: base styles superseded by rebuilt FX section below */

/* Keep all frame particle layers behind the profile icon */
[class*="cos-frame-"]::before {
  z-index: 0 !important;
}
[class*="cos-frame-"]::after {
  z-index: 1 !important;
}

/* Old legendary hard overrides removed â€” rebuilt FX section handles all effects */

/* Rebuilt legendary frame FX from liferpg/frameEffects.tsx (frame + particles only) */
[class*="cos-frame-"].cos-frame-diamond,
[class*="cos-frame-"].cos-frame-phoenix,
[class*="cos-frame-"].cos-frame-void,
[class*="cos-frame-"].cos-frame-cosmic,
[class*="cos-frame-"].cos-frame-divine,
[class*="cos-frame-"].cos-frame-arcane,
[class*="cos-frame-"].cos-frame-eclipse,
[class*="cos-frame-"].cos-frame-sakura {
  position: relative;
  overflow: hidden;
  isolation: isolate;
  border-style: solid !important;
  border-width: 4px !important;
  background-origin: border-box !important;
  background-clip: padding-box, border-box !important;
}

[class*="cos-frame-"].cos-frame-diamond::before,
[class*="cos-frame-"].cos-frame-phoenix::before,
[class*="cos-frame-"].cos-frame-void::before,
[class*="cos-frame-"].cos-frame-cosmic::before,
[class*="cos-frame-"].cos-frame-divine::before,
[class*="cos-frame-"].cos-frame-arcane::before,
[class*="cos-frame-"].cos-frame-eclipse::before,
[class*="cos-frame-"].cos-frame-sakura::before {
  content: '' !important;
  display: block !important;
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0 !important;
}

[class*="cos-frame-"].cos-frame-diamond::after,
[class*="cos-frame-"].cos-frame-phoenix::after,
[class*="cos-frame-"].cos-frame-void::after,
[class*="cos-frame-"].cos-frame-cosmic::after,
[class*="cos-frame-"].cos-frame-divine::after,
[class*="cos-frame-"].cos-frame-arcane::after,
[class*="cos-frame-"].cos-frame-eclipse::after,
[class*="cos-frame-"].cos-frame-sakura::after {
  content: '' !important;
  display: block !important;
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 1 !important;
}

/* 1) Diamond: crystalline facets + prismatic shimmer */
[class*="cos-frame-"].cos-frame-diamond {
  border-color: #8adfff !important;
  background-image:
    /* Inner themed background: crystal facets */
    conic-gradient(from 0deg at 50% 50%,
      rgba(180, 240, 255, 0.12) 0deg, rgba(120, 200, 255, 0.06) 30deg,
      rgba(200, 160, 255, 0.1) 60deg, rgba(160, 230, 255, 0.04) 90deg,
      rgba(220, 245, 255, 0.14) 120deg, rgba(100, 190, 255, 0.06) 150deg,
      rgba(180, 140, 255, 0.1) 180deg, rgba(140, 220, 255, 0.05) 210deg,
      rgba(200, 250, 255, 0.12) 240deg, rgba(120, 180, 255, 0.06) 270deg,
      rgba(190, 150, 255, 0.11) 300deg, rgba(170, 235, 255, 0.05) 330deg,
      rgba(180, 240, 255, 0.12) 360deg),
    /* Crystal refraction lines */
    linear-gradient(60deg, transparent 42%, rgba(200, 240, 255, 0.08) 44%, rgba(220, 250, 255, 0.14) 46%, transparent 48%),
    linear-gradient(120deg, transparent 38%, rgba(180, 220, 255, 0.08) 40%, rgba(210, 245, 255, 0.12) 42%, transparent 44%),
    linear-gradient(-30deg, transparent 52%, rgba(190, 160, 255, 0.06) 54%, rgba(220, 200, 255, 0.1) 56%, transparent 58%),
    linear-gradient(145deg, rgba(22, 50, 74, 0.93), rgba(36, 76, 110, 0.89)),
    linear-gradient(138deg, #d5f4ff, #8adfff, #6dc8ff, #d5f4ff) !important;
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 230% 230% !important;
  box-shadow:
    0 0 20px rgba(138, 223, 255, 0.86),
    0 0 34px rgba(109, 200, 255, 0.48),
    inset 0 0 16px rgba(220, 244, 255, 0.24) !important;
  animation: legend-frame-diamond 3.2s ease-in-out infinite, legend-frame-rotate 18s linear infinite, legend-diamond-prismatic 6s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-diamond::before {
  background:
    /* Sparkle particles that shimmer like light hitting crystal */
    radial-gradient(circle at 16% 78%, rgba(255, 255, 255, 1) 0 1.8px, transparent 2.8px),
    radial-gradient(circle at 34% 24%, rgba(199, 242, 255, 0.96) 0 1.6px, transparent 2.6px),
    radial-gradient(circle at 58% 66%, rgba(167, 228, 255, 0.94) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 78% 32%, rgba(130, 212, 255, 0.92) 0 1.4px, transparent 2.3px),
    radial-gradient(circle at 88% 74%, rgba(255, 255, 255, 0.96) 0 1.3px, transparent 2.2px),
    radial-gradient(circle at 50% 50%, rgba(200, 160, 255, 0.92) 0 1.2px, transparent 2px);
  animation: legend-particle-firefly 5.6s ease-in-out infinite, legend-diamond-twinkle-burst 2.4s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-diamond::after {
  background:
    /* Prismatic rainbow flash layer */
    conic-gradient(from 0deg at 50% 50%,
      rgba(255, 200, 200, 0.18) 0deg, rgba(255, 255, 200, 0.18) 60deg,
      rgba(200, 255, 200, 0.18) 120deg, rgba(200, 255, 255, 0.18) 180deg,
      rgba(200, 200, 255, 0.18) 240deg, rgba(255, 200, 255, 0.18) 300deg,
      rgba(255, 200, 200, 0.18) 360deg),
    radial-gradient(circle at 22% 36%, rgba(255, 255, 255, 0.94) 0 1px, transparent 1.9px),
    radial-gradient(circle at 42% 82%, rgba(210, 245, 255, 0.92) 0 1px, transparent 1.9px),
    radial-gradient(circle at 74% 18%, rgba(164, 228, 255, 0.92) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 82% 58%, rgba(122, 210, 255, 0.9) 0 0.95px, transparent 1.8px);
  opacity: 0.9 !important;
  animation: legend-diamond-rainbow-spin 8s linear infinite, legend-particle-twinkle 1.9s ease-in-out infinite !important;
}

/* Phoenix: blazing wings + rising embers */
[class*="cos-frame-"].cos-frame-phoenix {
  border-color: #f97316 !important;
  background-image:
    /* Inner themed background: stylized flame wing silhouettes */
    radial-gradient(ellipse at 20% 60%, rgba(255, 160, 40, 0.16) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 60%, rgba(255, 160, 40, 0.16) 0%, transparent 50%),
    /* Left wing feather strokes */
    linear-gradient(205deg, transparent 30%, rgba(255, 180, 60, 0.1) 32%, rgba(255, 140, 30, 0.14) 34%, transparent 36%),
    linear-gradient(215deg, transparent 24%, rgba(255, 200, 80, 0.08) 26%, rgba(255, 160, 40, 0.12) 28%, transparent 30%),
    linear-gradient(225deg, transparent 18%, rgba(255, 220, 100, 0.06) 20%, rgba(255, 180, 50, 0.1) 22%, transparent 24%),
    /* Right wing feather strokes (mirrored) */
    linear-gradient(335deg, transparent 30%, rgba(255, 180, 60, 0.1) 32%, rgba(255, 140, 30, 0.14) 34%, transparent 36%),
    linear-gradient(325deg, transparent 24%, rgba(255, 200, 80, 0.08) 26%, rgba(255, 160, 40, 0.12) 28%, transparent 30%),
    linear-gradient(315deg, transparent 18%, rgba(255, 220, 100, 0.06) 20%, rgba(255, 180, 50, 0.1) 22%, transparent 24%),
    /* Central heat core */
    radial-gradient(ellipse at 50% 85%, rgba(255, 100, 20, 0.2) 0%, rgba(255, 60, 10, 0.08) 30%, transparent 60%),
    linear-gradient(145deg, rgba(78, 30, 14, 0.93), rgba(124, 46, 18, 0.89)),
    linear-gradient(138deg, #fdba74, #f97316, #ef4444, #fdba74) !important;
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 220% 220% !important;
  box-shadow:
    0 0 22px rgba(249, 115, 22, 0.88),
    0 0 38px rgba(239, 68, 68, 0.5),
    inset 0 0 18px rgba(251, 146, 60, 0.28) !important;
  animation: legend-frame-flame 2s ease-in-out infinite, legend-phoenix-heat-pulse 3s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-phoenix::before {
  background:
    /* Rising sparks â€” 9 embers scattered in a tall tile, repeats seamlessly */
    radial-gradient(circle at 12% 8%, rgba(255, 250, 210, 1) 0 1.6px, transparent 2.6px),
    radial-gradient(circle at 72% 18%, rgba(255, 200, 100, 0.97) 0 1.45px, transparent 2.4px),
    radial-gradient(circle at 38% 32%, rgba(255, 170, 60, 0.95) 0 1.35px, transparent 2.25px),
    radial-gradient(circle at 86% 44%, rgba(255, 140, 40, 0.94) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 22% 56%, rgba(255, 230, 160, 0.98) 0 1.4px, transparent 2.3px),
    radial-gradient(circle at 62% 65%, rgba(255, 120, 30, 0.93) 0 1.3px, transparent 2.2px),
    radial-gradient(circle at 48% 78%, rgba(255, 190, 80, 0.96) 0 1.55px, transparent 2.5px),
    radial-gradient(circle at 8% 88%, rgba(255, 160, 50, 0.94) 0 1.25px, transparent 2.15px),
    radial-gradient(circle at 78% 95%, rgba(255, 245, 200, 0.99) 0 1.35px, transparent 2.25px);
  background-size: 100% 180% !important;
  background-repeat: repeat-y !important;
  filter: drop-shadow(0 0 4px rgba(255, 170, 50, 0.92)) !important;
  mix-blend-mode: screen !important;
  animation: legend-phoenix-sparks-rise-a 3.4s linear infinite, legend-phoenix-sparks-sway-a 2.1s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-phoenix::after {
  background:
    /* Secondary sparks â€” different positions/sizes, slower rise */
    radial-gradient(circle at 52% 5%, rgba(255, 220, 140, 0.94) 0 1.15px, transparent 2px),
    radial-gradient(circle at 28% 14%, rgba(255, 160, 60, 0.92) 0 1.05px, transparent 1.9px),
    radial-gradient(circle at 82% 26%, rgba(255, 245, 200, 0.96) 0 1.2px, transparent 2.05px),
    radial-gradient(circle at 16% 38%, rgba(255, 130, 40, 0.9) 0 1px, transparent 1.85px),
    radial-gradient(circle at 68% 48%, rgba(255, 200, 100, 0.93) 0 1.1px, transparent 1.95px),
    radial-gradient(circle at 42% 60%, rgba(255, 110, 25, 0.88) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 90% 72%, rgba(255, 180, 70, 0.91) 0 1.08px, transparent 1.9px),
    radial-gradient(circle at 32% 84%, rgba(255, 240, 180, 0.95) 0 1.15px, transparent 2px),
    radial-gradient(circle at 58% 93%, rgba(255, 150, 50, 0.9) 0 1px, transparent 1.85px);
  background-size: 100% 240% !important;
  background-repeat: repeat-y !important;
  opacity: 0.92 !important;
  filter: drop-shadow(0 0 3px rgba(255, 140, 30, 0.85)) !important;
  mix-blend-mode: screen !important;
  animation: legend-phoenix-sparks-rise-b 5.1s linear infinite, legend-phoenix-sparks-sway-b 2.9s ease-in-out infinite !important;
}

/* Void: cosmic vortex + ethereal nebula */
[class*="cos-frame-"].cos-frame-void {
  border-color: #9b7bff !important;
  background-image:
    /* Inner themed background: swirling nebula vortex */
    conic-gradient(from 45deg at 50% 50%,
      rgba(155, 123, 255, 0.12) 0deg, rgba(34, 24, 88, 0.03) 45deg,
      rgba(82, 130, 220, 0.1) 90deg, rgba(28, 20, 78, 0.03) 135deg,
      rgba(180, 140, 255, 0.12) 180deg, rgba(30, 24, 86, 0.03) 225deg,
      rgba(88, 130, 220, 0.1) 270deg, rgba(20, 14, 66, 0.03) 315deg,
      rgba(155, 123, 255, 0.12) 360deg),
    /* Spiral arm traces */
    radial-gradient(ellipse at 35% 35%, rgba(140, 110, 255, 0.1) 0%, transparent 40%),
    radial-gradient(ellipse at 65% 65%, rgba(100, 160, 255, 0.08) 0%, transparent 40%),
    radial-gradient(ellipse at 30% 70%, rgba(180, 150, 255, 0.06) 0%, transparent 35%),
    radial-gradient(ellipse at 70% 30%, rgba(90, 140, 255, 0.06) 0%, transparent 35%),
    /* Central singularity */
    radial-gradient(circle at 50% 50%, rgba(4, 3, 12, 0.66) 0%, rgba(18, 10, 44, 0.2) 20%, transparent 45%),
    linear-gradient(145deg, rgba(10, 8, 30, 0.96), rgba(20, 10, 46, 0.93)),
    linear-gradient(138deg, #c6b1ff, #9b7bff, #6f58de, #c6b1ff) !important;
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 220% 220% !important;
  box-shadow:
    0 0 24px rgba(155, 123, 255, 0.9),
    0 0 42px rgba(111, 88, 222, 0.48),
    inset 0 0 18px rgba(214, 190, 255, 0.28) !important;
  animation: legend-frame-void 4.8s ease-in-out infinite, legend-frame-rotate 14s linear infinite, legend-void-warp 10s linear infinite !important;
}

[class*="cos-frame-"].cos-frame-void::before {
  background:
    /* Orbiting star particles */
    radial-gradient(circle at 50% 6%, rgba(229, 217, 255, 0.98) 0 1.6px, transparent 2.5px),
    radial-gradient(circle at 94% 50%, rgba(194, 168, 255, 0.96) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 50% 94%, rgba(154, 128, 255, 0.94) 0 1.4px, transparent 2.3px),
    radial-gradient(circle at 6% 50%, rgba(239, 231, 255, 0.94) 0 1.4px, transparent 2.3px),
    /* Extra orbiting particles */
    radial-gradient(circle at 76% 18%, rgba(120, 180, 255, 0.9) 0 1.1px, transparent 2px),
    radial-gradient(circle at 18% 76%, rgba(200, 170, 255, 0.88) 0 1px, transparent 1.9px);
  background-repeat: no-repeat;
  animation: legend-particle-orbit 10.8s linear infinite, legend-void-orbit-pulse 3s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-void::after {
  background:
    /* Distant star field */
    radial-gradient(circle at 20% 24%, rgba(255, 255, 255, 0.92) 0 1.1px, transparent 2px),
    radial-gradient(circle at 36% 76%, rgba(219, 199, 255, 0.88) 0 1px, transparent 1.9px),
    radial-gradient(circle at 58% 42%, rgba(183, 157, 255, 0.86) 0 1px, transparent 1.9px),
    radial-gradient(circle at 74% 70%, rgba(155, 123, 255, 0.84) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 84% 28%, rgba(227, 212, 255, 0.86) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 46% 14%, rgba(100, 160, 255, 0.82) 0 0.85px, transparent 1.7px),
    radial-gradient(circle at 14% 52%, rgba(200, 180, 255, 0.8) 0 0.8px, transparent 1.65px),
    /* Subtle nebula wash */
    radial-gradient(ellipse at 50% 50%, rgba(140, 110, 255, 0.08) 0%, transparent 50%);
  opacity: 0.86 !important;
  animation: legend-particle-twinkle 1.8s ease-in-out infinite, legend-void-star-drift 12s ease-in-out infinite !important;
}

/* 3) New legendary: Cosmic */
[class*="cos-frame-"].cos-frame-cosmic {
  border-color: #7c3aed !important;
  background-image:
    linear-gradient(145deg, rgba(30, 20, 66, 0.93), rgba(22, 34, 84, 0.89)),
    linear-gradient(138deg, #8b5cf6, #3b82f6, #6366f1, #8b5cf6) !important;
  background-size: 100% 100%, 220% 220% !important;
  box-shadow:
    0 0 22px rgba(139, 92, 246, 0.86),
    0 0 38px rgba(59, 130, 246, 0.42),
    inset 0 0 16px rgba(139, 92, 246, 0.24) !important;
  animation: legend-frame-cosmic 6s linear infinite, legend-frame-pulse 2s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-cosmic::before {
  background:
    radial-gradient(circle at 50% 6%, rgba(196, 181, 253, 0.96) 0 1.45px, transparent 2.35px),
    radial-gradient(circle at 94% 50%, rgba(147, 197, 253, 0.94) 0 1.35px, transparent 2.25px),
    radial-gradient(circle at 50% 94%, rgba(129, 140, 248, 0.92) 0 1.3px, transparent 2.2px),
    radial-gradient(circle at 6% 50%, rgba(224, 231, 255, 0.92) 0 1.25px, transparent 2.15px);
  background-repeat: no-repeat;
  animation: legend-particle-orbit 9.8s linear infinite !important;
}

[class*="cos-frame-"].cos-frame-cosmic::after {
  background:
    radial-gradient(circle at 20% 24%, rgba(255, 255, 255, 0.9) 0 1px, transparent 2px),
    radial-gradient(circle at 36% 76%, rgba(196, 181, 253, 0.88) 0 0.95px, transparent 1.9px),
    radial-gradient(circle at 58% 42%, rgba(147, 197, 253, 0.88) 0 0.95px, transparent 1.9px),
    radial-gradient(circle at 74% 70%, rgba(129, 140, 248, 0.86) 0 0.9px, transparent 1.8px),
    radial-gradient(circle at 84% 28%, rgba(224, 231, 255, 0.88) 0 0.9px, transparent 1.8px);
  opacity: 0.86 !important;
  animation: legend-particle-twinkle 1.7s ease-in-out infinite !important;
}

/* 3) New legendary: Divine */
[class*="cos-frame-"].cos-frame-divine {
  border-color: #facc15 !important;
  background-image:
    linear-gradient(145deg, rgba(66, 48, 10, 0.93), rgba(98, 68, 12, 0.89)),
    linear-gradient(138deg, #fde68a, #facc15, #f59e0b, #fde68a) !important;
  background-size: 100% 100%, 230% 230% !important;
  box-shadow:
    0 0 20px rgba(234, 179, 8, 0.86),
    0 0 34px rgba(251, 191, 36, 0.46),
    inset 0 0 16px rgba(253, 224, 71, 0.24) !important;
  animation: legend-frame-divine 3s ease-in-out infinite, legend-frame-rotate 20s linear infinite !important;
}

[class*="cos-frame-"].cos-frame-divine::before {
  background:
    radial-gradient(circle at 16% 78%, rgba(254, 243, 199, 0.96) 0 1.6px, transparent 2.5px),
    radial-gradient(circle at 34% 24%, rgba(254, 240, 138, 0.94) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 58% 66%, rgba(250, 204, 21, 0.94) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 78% 32%, rgba(253, 224, 71, 0.9) 0 1.4px, transparent 2.3px),
    radial-gradient(circle at 88% 74%, rgba(255, 255, 255, 0.92) 0 1.2px, transparent 2.1px);
  animation: legend-particle-firefly 6.1s ease-in-out infinite, legend-particle-glow-pulse 1.5s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-divine::after {
  background:
    radial-gradient(circle at 22% 36%, rgba(255, 255, 255, 0.92) 0 1px, transparent 1.9px),
    radial-gradient(circle at 42% 82%, rgba(253, 224, 71, 0.9) 0 1px, transparent 1.9px),
    radial-gradient(circle at 74% 18%, rgba(254, 240, 138, 0.9) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 82% 58%, rgba(250, 204, 21, 0.88) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 50% 50%, rgba(253, 224, 71, 0.18), transparent 62%);
  opacity: 0.9 !important;
  animation: legend-particle-firefly 7.2s ease-in-out -1.3s infinite, legend-particle-twinkle 1.9s ease-in-out infinite !important;
}

/* 4) Arcane: mystic runes + arcane energy */
[class*="cos-frame-"].cos-frame-arcane {
  border-color: #a78bfa !important;
  background-image:
    /* Inner themed background: arcane rune circle */
    conic-gradient(from 30deg at 50% 50%,
      rgba(168, 85, 247, 0.14) 0deg, rgba(99, 102, 241, 0.06) 36deg,
      rgba(6, 182, 212, 0.12) 72deg, rgba(139, 92, 246, 0.04) 108deg,
      rgba(168, 85, 247, 0.14) 144deg, rgba(99, 102, 241, 0.06) 180deg,
      rgba(6, 182, 212, 0.12) 216deg, rgba(139, 92, 246, 0.04) 252deg,
      rgba(168, 85, 247, 0.14) 288deg, rgba(99, 102, 241, 0.06) 324deg,
      rgba(168, 85, 247, 0.14) 360deg),
    /* Mystic energy veins */
    linear-gradient(40deg, transparent 40%, rgba(6, 182, 212, 0.1) 44%, rgba(168, 85, 247, 0.15) 48%, transparent 52%),
    linear-gradient(160deg, transparent 35%, rgba(139, 92, 246, 0.1) 39%, rgba(99, 102, 241, 0.14) 43%, transparent 47%),
    linear-gradient(-60deg, transparent 48%, rgba(6, 182, 212, 0.08) 52%, rgba(168, 85, 247, 0.12) 56%, transparent 60%),
    /* Core glow */
    radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.18) 0%, rgba(99, 102, 241, 0.08) 25%, transparent 50%),
    linear-gradient(145deg, rgba(18, 12, 52, 0.93), rgba(36, 20, 76, 0.89)),
    linear-gradient(138deg, #c4b5fd, #a78bfa, #818cf8, #c4b5fd) !important;
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 230% 230% !important;
  box-shadow:
    0 0 22px rgba(168, 85, 247, 0.88),
    0 0 38px rgba(99, 102, 241, 0.46),
    inset 0 0 16px rgba(196, 181, 253, 0.26) !important;
  animation: legend-frame-arcane 4s ease-in-out infinite, legend-frame-rotate 16s linear infinite, legend-arcane-pulse 5s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-arcane::before {
  background:
    /* Arcane spark particles */
    radial-gradient(circle at 18% 26%, rgba(196, 181, 253, 0.98) 0 1.7px, transparent 2.7px),
    radial-gradient(circle at 42% 72%, rgba(6, 182, 212, 0.96) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 68% 22%, rgba(168, 85, 247, 0.94) 0 1.4px, transparent 2.3px),
    radial-gradient(circle at 82% 68%, rgba(129, 140, 248, 0.94) 0 1.3px, transparent 2.2px),
    radial-gradient(circle at 30% 50%, rgba(6, 182, 212, 0.92) 0 1.2px, transparent 2px),
    radial-gradient(circle at 74% 46%, rgba(196, 181, 253, 0.9) 0 1.1px, transparent 1.9px),
    radial-gradient(circle at 50% 86%, rgba(168, 85, 247, 0.88) 0 1px, transparent 1.8px);
  animation: legend-particle-firefly 6.2s ease-in-out infinite, legend-arcane-rune-spin 3.6s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-arcane::after {
  background:
    /* Swirling arcane energy field */
    conic-gradient(from 120deg at 50% 50%,
      rgba(168, 85, 247, 0.12) 0deg, transparent 60deg,
      rgba(6, 182, 212, 0.12) 120deg, transparent 180deg,
      rgba(99, 102, 241, 0.12) 240deg, transparent 300deg,
      rgba(168, 85, 247, 0.12) 360deg),
    /* Spell mote particles */
    radial-gradient(circle at 24% 38%, rgba(255, 255, 255, 0.92) 0 1px, transparent 1.9px),
    radial-gradient(circle at 56% 18%, rgba(196, 181, 253, 0.9) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 78% 54%, rgba(6, 182, 212, 0.88) 0 0.9px, transparent 1.75px),
    radial-gradient(circle at 38% 82%, rgba(129, 140, 248, 0.88) 0 0.9px, transparent 1.75px),
    radial-gradient(circle at 62% 62%, rgba(168, 85, 247, 0.86) 0 0.85px, transparent 1.7px);
  opacity: 0.88 !important;
  animation: legend-arcane-vortex-spin 10s linear infinite, legend-particle-twinkle 2s ease-in-out infinite !important;
}

/* 5) Eclipse: solar corona + golden flares */
[class*="cos-frame-"].cos-frame-eclipse {
  border-color: #fbbf24 !important;
  background-image:
    /* Inner themed background: solar corona â€” bright edge, dark center */
    radial-gradient(circle at 50% 50%,
      rgba(2, 2, 2, 0.82) 0%, rgba(12, 9, 6, 0.62) 20%,
      rgba(98, 64, 14, 0.14) 40%, rgba(245, 158, 11, 0.1) 55%,
      rgba(251, 191, 36, 0.18) 70%, transparent 85%),
    /* Light ray streaks */
    linear-gradient(0deg, transparent 42%, rgba(251, 191, 36, 0.1) 46%, rgba(253, 224, 71, 0.16) 50%, rgba(251, 191, 36, 0.1) 54%, transparent 58%),
    linear-gradient(90deg, transparent 42%, rgba(245, 158, 11, 0.08) 46%, rgba(252, 211, 77, 0.14) 50%, rgba(245, 158, 11, 0.08) 54%, transparent 58%),
    linear-gradient(45deg, transparent 44%, rgba(251, 191, 36, 0.06) 48%, rgba(253, 224, 71, 0.1) 50%, rgba(251, 191, 36, 0.06) 52%, transparent 56%),
    linear-gradient(135deg, transparent 44%, rgba(245, 158, 11, 0.06) 48%, rgba(252, 211, 77, 0.1) 50%, rgba(245, 158, 11, 0.06) 52%, transparent 56%),
    linear-gradient(145deg, rgba(8, 7, 5, 0.96), rgba(18, 14, 8, 0.92)),
    linear-gradient(138deg, #fde68a, #fbbf24, #f59e0b, #fde68a) !important;
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 230% 230% !important;
  box-shadow:
    0 0 22px rgba(251, 191, 36, 0.9),
    0 0 40px rgba(245, 158, 11, 0.5),
    inset 0 0 16px rgba(253, 224, 71, 0.22) !important;
  animation: legend-frame-eclipse 4.4s ease-in-out infinite, legend-frame-rotate 20s linear infinite, legend-eclipse-corona-pulse 3s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-eclipse::before {
  background:
    /* Corona flare particles */
    radial-gradient(circle at 14% 50%, rgba(253, 224, 71, 0.98) 0 1.8px, transparent 2.8px),
    radial-gradient(circle at 50% 8%, rgba(251, 191, 36, 0.96) 0 1.6px, transparent 2.5px),
    radial-gradient(circle at 86% 50%, rgba(245, 158, 11, 0.94) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 50% 92%, rgba(252, 211, 77, 0.94) 0 1.5px, transparent 2.4px),
    radial-gradient(circle at 24% 22%, rgba(255, 255, 255, 0.92) 0 1.3px, transparent 2.2px),
    radial-gradient(circle at 76% 78%, rgba(253, 224, 71, 0.9) 0 1.2px, transparent 2px),
    radial-gradient(circle at 78% 24%, rgba(251, 191, 36, 0.88) 0 1.1px, transparent 1.9px);
  filter: drop-shadow(0 0 3px rgba(251, 191, 36, 0.7)) !important;
  animation: legend-particle-firefly 5.8s ease-in-out infinite, legend-particle-glow-pulse 2.2s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-eclipse::after {
  background:
    /* Rotating light halo */
    conic-gradient(from 0deg at 50% 50%,
      rgba(253, 224, 71, 0.14) 0deg, transparent 30deg,
      rgba(251, 191, 36, 0.14) 90deg, transparent 120deg,
      rgba(245, 158, 11, 0.14) 180deg, transparent 210deg,
      rgba(252, 211, 77, 0.14) 270deg, transparent 300deg,
      rgba(253, 224, 71, 0.14) 360deg),
    /* Distant sparkles */
    radial-gradient(circle at 22% 64%, rgba(255, 255, 255, 0.9) 0 0.95px, transparent 1.8px),
    radial-gradient(circle at 48% 28%, rgba(253, 224, 71, 0.88) 0 0.9px, transparent 1.75px),
    radial-gradient(circle at 72% 42%, rgba(251, 191, 36, 0.86) 0 0.85px, transparent 1.7px),
    radial-gradient(circle at 36% 78%, rgba(252, 211, 77, 0.84) 0 0.85px, transparent 1.7px),
    radial-gradient(circle at 82% 72%, rgba(245, 158, 11, 0.82) 0 0.8px, transparent 1.65px);
  opacity: 0.88 !important;
  animation: legend-eclipse-ray-rotate 12s linear infinite, legend-particle-twinkle 1.8s ease-in-out infinite !important;
}

/* 6) Cerejeira (Sakura): falling cherry blossom petals */
[class*="cos-frame-"].cos-frame-sakura {
  border-color: #f472b6 !important;
  background-image:
    /* Inner themed background: scattered petal shapes */
    radial-gradient(ellipse 12% 8% at 24% 30%, rgba(244, 114, 182, 0.14) 0%, transparent 100%),
    radial-gradient(ellipse 10% 14% at 68% 26%, rgba(249, 168, 212, 0.12) 0%, transparent 100%),
    radial-gradient(ellipse 14% 10% at 42% 72%, rgba(253, 164, 175, 0.13) 0%, transparent 100%),
    radial-gradient(ellipse 8% 12% at 78% 66%, rgba(244, 114, 182, 0.11) 0%, transparent 100%),
    radial-gradient(ellipse 12% 8% at 16% 58%, rgba(249, 168, 212, 0.1) 0%, transparent 100%),
    /* Soft floral watercolor wash */
    radial-gradient(circle at 50% 50%, rgba(244, 114, 182, 0.08) 0%, rgba(249, 168, 212, 0.04) 30%, transparent 55%),
    linear-gradient(145deg, rgba(52, 18, 38, 0.93), rgba(66, 24, 50, 0.89)),
    linear-gradient(138deg, #fecdd3, #f9a8d4, #f472b6, #fecdd3) !important;
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 230% 230% !important;
  box-shadow:
    0 0 20px rgba(244, 114, 182, 0.86),
    0 0 36px rgba(249, 168, 212, 0.44),
    inset 0 0 16px rgba(253, 164, 175, 0.24) !important;
  animation: legend-frame-sakura 3.6s ease-in-out infinite, legend-frame-rotate 22s linear infinite !important;
}

[class*="cos-frame-"].cos-frame-sakura::before {
  background:
    /* Falling petal particles â€” layer A (180% tile, top-to-bottom) */
    radial-gradient(ellipse 3.5px 2.5px at 12% 14%, rgba(255, 183, 197, 0.95) 0%, transparent 100%),
    radial-gradient(ellipse 3px 2px at 34% 42%, rgba(249, 168, 212, 0.92) 0%, transparent 100%),
    radial-gradient(ellipse 2.5px 3.5px at 56% 8%, rgba(244, 114, 182, 0.9) 0%, transparent 100%),
    radial-gradient(ellipse 3px 2.5px at 72% 56%, rgba(253, 164, 175, 0.88) 0%, transparent 100%),
    radial-gradient(ellipse 2.5px 3px at 88% 28%, rgba(249, 168, 212, 0.9) 0%, transparent 100%),
    radial-gradient(ellipse 3.5px 2px at 24% 72%, rgba(255, 183, 197, 0.86) 0%, transparent 100%),
    radial-gradient(ellipse 2.5px 3px at 48% 88%, rgba(244, 114, 182, 0.88) 0%, transparent 100%),
    radial-gradient(ellipse 3px 2px at 78% 102%, rgba(253, 164, 175, 0.86) 0%, transparent 100%),
    radial-gradient(ellipse 2.5px 2.5px at 62% 136%, rgba(249, 168, 212, 0.84) 0%, transparent 100%);
  background-size: 100% 180%;
  background-repeat: repeat-y;
  filter: drop-shadow(0 0 2px rgba(244, 114, 182, 0.6)) !important;
  mix-blend-mode: screen !important;
  animation: legend-sakura-petals-fall-a 4.2s linear infinite, legend-sakura-sway-a 3.8s ease-in-out infinite !important;
}

[class*="cos-frame-"].cos-frame-sakura::after {
  background:
    /* Falling petal particles â€” layer B (240% tile, different positions) */
    radial-gradient(ellipse 2.5px 3px at 8% 22%, rgba(253, 164, 175, 0.92) 0%, transparent 100%),
    radial-gradient(ellipse 3px 2px at 28% 68%, rgba(244, 114, 182, 0.9) 0%, transparent 100%),
    radial-gradient(ellipse 2.5px 3.5px at 46% 34%, rgba(255, 183, 197, 0.88) 0%, transparent 100%),
    radial-gradient(ellipse 3.5px 2.5px at 66% 94%, rgba(249, 168, 212, 0.86) 0%, transparent 100%),
    radial-gradient(ellipse 2px 3px at 82% 52%, rgba(244, 114, 182, 0.88) 0%, transparent 100%),
    radial-gradient(ellipse 3px 2.5px at 18% 112%, rgba(253, 164, 175, 0.84) 0%, transparent 100%),
    radial-gradient(ellipse 2.5px 2px at 42% 148%, rgba(249, 168, 212, 0.82) 0%, transparent 100%),
    radial-gradient(ellipse 3px 3px at 74% 176%, rgba(255, 183, 197, 0.84) 0%, transparent 100%),
    radial-gradient(ellipse 2.5px 2.5px at 58% 208%, rgba(244, 114, 182, 0.8) 0%, transparent 100%);
  background-size: 100% 240%;
  background-repeat: repeat-y;
  filter: drop-shadow(0 0 2px rgba(249, 168, 212, 0.5)) !important;
  mix-blend-mode: screen !important;
  opacity: 0.9 !important;
  animation: legend-sakura-petals-fall-b 6.3s linear infinite, legend-sakura-sway-b 4.4s ease-in-out infinite !important;
}

/* 2) Flame frame (rare) gets spark particles */
.shop-preview-frame.cos-frame-fire::before,
.hero-avatar.cos-frame-fire::before,
.rank-avatar.cos-frame-fire::before,
.pvp-player-avatar.cos-frame-fire::before,
[class*="cos-frame-"].cos-frame-fire::before,
.shop-preview-frame.cos-frame-fire::after,
.hero-avatar.cos-frame-fire::after,
.rank-avatar.cos-frame-fire::after,
.pvp-player-avatar.cos-frame-fire::after,
[class*="cos-frame-"].cos-frame-fire::after {
  content: '' !important;
  display: block !important;
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  pointer-events: none;
  mix-blend-mode: screen;
  will-change: background-position, opacity, transform;
}

[class*="cos-frame-"].cos-frame-fire::before {
  z-index: 2 !important;
  opacity: 1 !important;
  background:
    radial-gradient(circle at 12% 112%, rgba(255, 232, 190, 0.99) 0 1.8px, transparent 2.8px),
    radial-gradient(circle at 30% 109%, rgba(255, 192, 118, 0.98) 0 1.65px, transparent 2.65px),
    radial-gradient(circle at 50% 113%, rgba(255, 154, 82, 0.96) 0 1.55px, transparent 2.55px),
    radial-gradient(circle at 70% 110%, rgba(255, 124, 58, 0.94) 0 1.45px, transparent 2.45px),
    radial-gradient(circle at 88% 114%, rgba(255, 96, 38, 0.92) 0 1.35px, transparent 2.35px);
  filter: drop-shadow(0 0 6px rgba(255, 168, 78, 0.9));
  animation: legend-particle-fire-sparks 1.95s ease-out infinite !important;
}

[class*="cos-frame-"].cos-frame-fire::after {
  z-index: 2 !important;
  opacity: 0.96 !important;
  background:
    radial-gradient(circle at 18% 112%, rgba(255, 245, 220, 0.96) 0 1.2px, transparent 2px),
    radial-gradient(circle at 40% 109%, rgba(255, 214, 150, 0.94) 0 1.12px, transparent 1.92px),
    radial-gradient(circle at 60% 113%, rgba(255, 180, 112, 0.92) 0 1.06px, transparent 1.86px),
    radial-gradient(circle at 80% 110%, rgba(255, 144, 82, 0.9) 0 1px, transparent 1.8px),
    radial-gradient(circle at 94% 114%, rgba(255, 114, 58, 0.88) 0 0.95px, transparent 1.74px);
  filter: drop-shadow(0 0 5px rgba(255, 148, 62, 0.84));
  animation: legend-particle-fire-sparks 2.4s ease-out -0.9s infinite, legend-particle-glow-pulse 1.2s ease-in-out infinite !important;
}

@keyframes legend-frame-diamond {
  0%, 100% {
    box-shadow:
      0 0 18px rgba(138, 223, 255, 0.72),
      0 0 30px rgba(109, 200, 255, 0.34),
      inset 0 0 14px rgba(220, 244, 255, 0.2);
    border-color: #8adfff;
  }
  33% {
    box-shadow:
      0 0 24px rgba(180, 200, 255, 0.88),
      0 0 38px rgba(140, 180, 255, 0.5),
      inset 0 0 18px rgba(200, 220, 255, 0.26);
    border-color: #a8c8ff;
  }
  66% {
    box-shadow:
      0 0 28px rgba(138, 223, 255, 0.96),
      0 0 44px rgba(109, 200, 255, 0.6),
      inset 0 0 20px rgba(232, 250, 255, 0.3);
    border-color: #7aeeff;
  }
}

@keyframes legend-frame-flame {
  0%, 100% {
    box-shadow:
      0 0 18px rgba(249, 115, 22, 0.74),
      0 0 30px rgba(239, 68, 68, 0.36),
      inset 0 0 14px rgba(251, 146, 60, 0.2);
    background-position: 50% 50%, 0% 50%;
  }
  50% {
    box-shadow:
      0 0 26px rgba(249, 115, 22, 0.94),
      0 0 42px rgba(239, 68, 68, 0.58),
      inset 0 0 18px rgba(254, 215, 170, 0.26);
    background-position: 50% 50%, 100% 50%;
  }
}

@keyframes legend-frame-void {
  0%, 100% {
    box-shadow:
      0 0 18px rgba(155, 123, 255, 0.72),
      0 0 30px rgba(111, 88, 222, 0.32),
      inset 0 0 14px rgba(214, 190, 255, 0.2);
    border-color: #9b7bff;
  }
  33% {
    box-shadow:
      0 0 24px rgba(100, 160, 255, 0.88),
      0 0 40px rgba(80, 130, 255, 0.48),
      inset 0 0 18px rgba(180, 200, 255, 0.26);
    border-color: #7ba0ff;
  }
  66% {
    box-shadow:
      0 0 28px rgba(180, 140, 255, 0.96),
      0 0 48px rgba(140, 100, 255, 0.56),
      inset 0 0 22px rgba(230, 210, 255, 0.32);
    border-color: #b490ff;
  }
}

@keyframes legend-frame-cosmic {
  0%, 100% {
    box-shadow:
      0 0 18px rgba(139, 92, 246, 0.72),
      0 0 30px rgba(59, 130, 246, 0.32),
      inset 0 0 14px rgba(139, 92, 246, 0.2);
    background-position: 50% 50%, 0% 50%;
  }
  50% {
    box-shadow:
      0 0 26px rgba(139, 92, 246, 0.94),
      0 0 44px rgba(59, 130, 246, 0.54),
      inset 0 0 20px rgba(165, 180, 252, 0.28);
    background-position: 50% 50%, 100% 50%;
  }
}

@keyframes legend-frame-divine {
  0%, 100% {
    box-shadow:
      0 0 18px rgba(234, 179, 8, 0.72),
      0 0 30px rgba(251, 191, 36, 0.34),
      inset 0 0 14px rgba(253, 224, 71, 0.2);
  }
  50% {
    box-shadow:
      0 0 28px rgba(234, 179, 8, 0.96),
      0 0 46px rgba(251, 191, 36, 0.6),
      inset 0 0 20px rgba(254, 240, 138, 0.3);
  }
}

@keyframes legend-frame-rotate {
  0% { background-position: 50% 50%, 0% 50%; }
  100% { background-position: 50% 50%, 200% 50%; }
}

@keyframes legend-frame-pulse {
  0%, 100% { border-color: #7c3aed; }
  50% { border-color: #93c5fd; }
}

@keyframes legend-particle-fire {
  0% {
    opacity: 0;
    background-position: 10% 110%, 24% 114%, 38% 108%, 50% 116%, 62% 110%, 76% 114%, 90% 111%;
  }
  20% { opacity: 0.95; }
  100% {
    opacity: 0;
    background-position: 10% -14%, 24% -10%, 38% -16%, 50% -8%, 62% -15%, 76% -11%, 90% -13%;
  }
}

@keyframes legend-particle-fire-sparks {
  0% {
    opacity: 0;
    transform: translate3d(0, 1px, 0) scale(0.96);
    background-position: 12% 114%, 30% 111%, 50% 115%, 70% 112%, 88% 116%;
  }
  25% {
    opacity: 1;
    transform: translate3d(0, -0.2px, 0) scale(1.04);
  }
  100% {
    opacity: 0;
    transform: translate3d(0, -2px, 0) scale(1.08);
    background-position: 16% -12%, 36% -16%, 54% -10%, 76% -15%, 94% -11%;
  }
}

@keyframes legend-particle-orbit {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes legend-particle-firefly {
  0% { transform: translate3d(0, 0, 0); }
  25% { transform: translate3d(1.2px, -1.8px, 0); }
  50% { transform: translate3d(-1px, -3.6px, 0); }
  75% { transform: translate3d(1px, -2px, 0); }
  100% { transform: translate3d(0, 0, 0); }
}

@keyframes legend-particle-twinkle {
  0%, 100% { opacity: 0.34; }
  50% { opacity: 1; }
}

@keyframes legend-particle-glow-pulse {
  0%, 100% { filter: brightness(0.9); }
  50% { filter: brightness(1.35); }
}

/* === Diamond unique effects === */
@keyframes legend-diamond-prismatic {
  0%, 100% {
    filter: hue-rotate(0deg) brightness(1);
  }
  25% {
    filter: hue-rotate(8deg) brightness(1.06);
  }
  50% {
    filter: hue-rotate(-6deg) brightness(1.1);
  }
  75% {
    filter: hue-rotate(4deg) brightness(1.04);
  }
}
@keyframes legend-diamond-twinkle-burst {
  0%, 100% {
    opacity: 0.7;
    filter: brightness(0.95) drop-shadow(0 0 2px rgba(200, 240, 255, 0.6));
  }
  15% {
    opacity: 1;
    filter: brightness(1.5) drop-shadow(0 0 6px rgba(255, 255, 255, 0.95));
  }
  30% {
    opacity: 0.5;
    filter: brightness(0.85) drop-shadow(0 0 2px rgba(180, 220, 255, 0.5));
  }
  65% {
    opacity: 0.95;
    filter: brightness(1.35) drop-shadow(0 0 5px rgba(200, 180, 255, 0.9));
  }
  80% {
    opacity: 0.6;
    filter: brightness(0.9) drop-shadow(0 0 2px rgba(160, 200, 255, 0.55));
  }
}
@keyframes legend-diamond-rainbow-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* === Phoenix unique effects === */
@keyframes legend-phoenix-heat-pulse {
  0%, 100% {
    filter: brightness(1) saturate(1);
  }
  30% {
    filter: brightness(1.08) saturate(1.15);
  }
  60% {
    filter: brightness(1.15) saturate(1.3);
  }
  80% {
    filter: brightness(1.05) saturate(1.1);
  }
}
@keyframes legend-phoenix-ember-flicker {
  0%, 100% {
    opacity: 0.85;
    transform: scale(1) translate3d(0, 0, 0);
  }
  25% {
    opacity: 1;
    transform: scale(1.02) translate3d(0.3px, -0.4px, 0);
  }
  50% {
    opacity: 0.9;
    transform: scale(0.99) translate3d(-0.2px, 0.2px, 0);
  }
  75% {
    opacity: 1;
    transform: scale(1.01) translate3d(0.4px, -0.3px, 0);
  }
}

/* Rising sparks: scrolls background upward by one tile height = seamless loop */
@keyframes legend-phoenix-sparks-rise-a {
  from { background-position-y: 0%; }
  to { background-position-y: 180%; }
}
/* Secondary layer: tile height 240%, different cycle time = combined pattern repeats ~every 17s */
@keyframes legend-phoenix-sparks-rise-b {
  from { background-position-y: 0%; }
  to { background-position-y: 240%; }
}
/* Gentle horizontal sway so sparks don't rise perfectly straight */
@keyframes legend-phoenix-sparks-sway-a {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(0.8px); }
  75% { transform: translateX(-0.8px); }
}
@keyframes legend-phoenix-sparks-sway-b {
  0%, 100% { transform: translateX(0); }
  33% { transform: translateX(-0.6px); }
  66% { transform: translateX(0.7px); }
}

/* === Void unique effects === */
@keyframes legend-void-warp {
  0% {
    filter: hue-rotate(0deg);
  }
  50% {
    filter: hue-rotate(15deg);
  }
  100% {
    filter: hue-rotate(0deg);
  }
}
@keyframes legend-void-orbit-pulse {
  0%, 100% {
    opacity: 0.75;
    filter: drop-shadow(0 0 3px rgba(180, 150, 255, 0.7));
  }
  50% {
    opacity: 1;
    filter: drop-shadow(0 0 8px rgba(200, 170, 255, 0.95));
  }
}
@keyframes legend-void-star-drift {
  0%, 100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  25% {
    transform: translate3d(1px, -0.8px, 0) scale(1.02);
  }
  50% {
    transform: translate3d(-0.5px, 1px, 0) scale(0.98);
  }
  75% {
    transform: translate3d(-1px, -0.5px, 0) scale(1.01);
  }
}

/* Arcane frame keyframes */
@keyframes legend-frame-arcane {
  0%, 100% {
    box-shadow:
      0 0 20px rgba(168, 85, 247, 0.76),
      0 0 34px rgba(99, 102, 241, 0.36),
      inset 0 0 14px rgba(196, 181, 253, 0.22);
    border-color: #a78bfa;
  }
  33% {
    box-shadow:
      0 0 26px rgba(6, 182, 212, 0.88),
      0 0 42px rgba(139, 92, 246, 0.5),
      inset 0 0 18px rgba(6, 182, 212, 0.28);
    border-color: #818cf8;
  }
  66% {
    box-shadow:
      0 0 30px rgba(168, 85, 247, 0.96),
      0 0 48px rgba(99, 102, 241, 0.58),
      inset 0 0 22px rgba(196, 181, 253, 0.32);
    border-color: #c4b5fd;
  }
}

@keyframes legend-arcane-pulse {
  0%, 100% {
    filter: brightness(1) saturate(1);
  }
  50% {
    filter: brightness(1.12) saturate(1.15);
  }
}

@keyframes legend-arcane-rune-spin {
  0%, 100% {
    filter: hue-rotate(0deg) brightness(0.9);
  }
  25% {
    filter: hue-rotate(15deg) brightness(1.2);
  }
  50% {
    filter: hue-rotate(-10deg) brightness(0.85);
  }
  75% {
    filter: hue-rotate(8deg) brightness(1.15);
  }
}

@keyframes legend-arcane-vortex-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Eclipse frame keyframes */
@keyframes legend-frame-eclipse {
  0%, 100% {
    box-shadow:
      0 0 18px rgba(251, 191, 36, 0.78),
      0 0 34px rgba(245, 158, 11, 0.38),
      inset 0 0 14px rgba(253, 224, 71, 0.18);
    border-color: #fbbf24;
  }
  33% {
    box-shadow:
      0 0 28px rgba(245, 158, 11, 0.92),
      0 0 46px rgba(251, 191, 36, 0.54),
      inset 0 0 20px rgba(252, 211, 77, 0.3);
    border-color: #fcd34d;
  }
  66% {
    box-shadow:
      0 0 22px rgba(255, 140, 66, 0.84),
      0 0 38px rgba(245, 158, 11, 0.44),
      inset 0 0 16px rgba(253, 224, 71, 0.22);
    border-color: #f59e0b;
  }
}

@keyframes legend-eclipse-corona-pulse {
  0%, 100% {
    filter: brightness(1) saturate(1);
  }
  50% {
    filter: brightness(1.18) saturate(1.12);
  }
}

@keyframes legend-eclipse-ray-rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Sakura/Cerejeira frame keyframes */
@keyframes legend-frame-sakura {
  0%, 100% {
    box-shadow:
      0 0 18px rgba(244, 114, 182, 0.74),
      0 0 32px rgba(249, 168, 212, 0.34),
      inset 0 0 14px rgba(253, 164, 175, 0.2);
    border-color: #f472b6;
  }
  33% {
    box-shadow:
      0 0 24px rgba(249, 168, 212, 0.86),
      0 0 38px rgba(253, 164, 175, 0.48),
      inset 0 0 18px rgba(254, 205, 211, 0.28);
    border-color: #f9a8d4;
  }
  66% {
    box-shadow:
      0 0 22px rgba(244, 114, 182, 0.9),
      0 0 36px rgba(249, 168, 212, 0.52),
      inset 0 0 16px rgba(253, 164, 175, 0.26);
    border-color: #fda4af;
  }
}

@keyframes legend-sakura-petals-fall-a {
  from { background-position-y: 0%; }
  to { background-position-y: -180%; }
}

@keyframes legend-sakura-petals-fall-b {
  from { background-position-y: 0%; }
  to { background-position-y: -240%; }
}

@keyframes legend-sakura-sway-a {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(0.9px); }
  75% { transform: translateX(-0.9px); }
}

@keyframes legend-sakura-sway-b {
  0%, 100% { transform: translateX(0); }
  33% { transform: translateX(-0.7px); }
  66% { transform: translateX(0.8px); }
}

@media (prefers-reduced-motion: reduce) {
  [class*="cos-frame-"].cos-frame-diamond,
  [class*="cos-frame-"].cos-frame-phoenix,
  [class*="cos-frame-"].cos-frame-void,
  [class*="cos-frame-"].cos-frame-cosmic,
  [class*="cos-frame-"].cos-frame-divine,
  [class*="cos-frame-"].cos-frame-diamond::before,
  [class*="cos-frame-"].cos-frame-diamond::after,
  [class*="cos-frame-"].cos-frame-phoenix::before,
  [class*="cos-frame-"].cos-frame-phoenix::after,
  [class*="cos-frame-"].cos-frame-void::before,
  [class*="cos-frame-"].cos-frame-void::after,
  [class*="cos-frame-"].cos-frame-cosmic::before,
  [class*="cos-frame-"].cos-frame-cosmic::after,
  [class*="cos-frame-"].cos-frame-divine::before,
  [class*="cos-frame-"].cos-frame-divine::after,
  [class*="cos-frame-"].cos-frame-arcane,
  [class*="cos-frame-"].cos-frame-eclipse,
  [class*="cos-frame-"].cos-frame-sakura,
  [class*="cos-frame-"].cos-frame-arcane::before,
  [class*="cos-frame-"].cos-frame-arcane::after,
  [class*="cos-frame-"].cos-frame-eclipse::before,
  [class*="cos-frame-"].cos-frame-eclipse::after,
  [class*="cos-frame-"].cos-frame-sakura::before,
  [class*="cos-frame-"].cos-frame-sakura::after {
    animation: none !important;
  }

  [class*="cos-frame-"].cos-frame-fire::before,
  [class*="cos-frame-"].cos-frame-fire::after {
    animation: none !important;
    transform: none !important;
    opacity: 0.92 !important;
  }

  [class*="cos-frame-"].cos-frame-fire::before {
    background-position: 14% 78%, 32% 68%, 52% 74%, 72% 62%, 90% 70% !important;
  }

  [class*="cos-frame-"].cos-frame-fire::after {
    background-position: 20% 72%, 42% 62%, 62% 68%, 82% 58%, 94% 64% !important;
  }
}

/* Legendary frames: unique themed effects enabled */
